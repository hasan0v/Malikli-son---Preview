(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2221],{2317:(e,t,a)=>{Promise.resolve().then(a.bind(a,5495))},3873:e=>{e.exports={descriptionContainer:"ProductDescription_descriptionContainer__ALJvh",formattedContent:"ProductDescription_formattedContent__GXqwy",mainDescription:"ProductDescription_mainDescription__bQ8wQ",sectionTitle:"ProductDescription_sectionTitle__2GlDX",featuresSection:"ProductDescription_featuresSection__CqKks",featuresList:"ProductDescription_featuresList__0kDPN",featureItem:"ProductDescription_featureItem__uik5R",featureTitle:"ProductDescription_featureTitle__acjRV",featureContent:"ProductDescription_featureContent__gJQWV",featureSection:"ProductDescription_featureSection__R4oCO",highlightsSection:"ProductDescription_highlightsSection__mQl92",bulletList:"ProductDescription_bulletList__nM550",bulletItem:"ProductDescription_bulletItem__qAK3p",paragraph:"ProductDescription_paragraph__Z9Iwy"}},5495:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var i=a(5155),r=a(2115),n=a(6766),o=a(6874),l=a.n(o),s=a(5695),c=a(4540),d=a(9604),u=a(4060),_=a(3873),p=a.n(_);let m=e=>{let{description:t}=e,a=e=>(e=(e=(e=(e=e.replace(/✓/g,'<span class="checkmark">✓</span>')).replace(/\*([^*]+)\*/g,"<strong>$1</strong>")).replace(/(\d+%|\d+-\d+\s*[A-Z]+)/g,'<span class="highlight">$1</span>')).replace(/\n/g,"<br>"),(0,i.jsx)("span",{dangerouslySetInnerHTML:{__html:e}})),{mainDescription:r,bullets:n,features:o}=(e=>{let t=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split(/\.\s+|\n+/).filter(e=>e.trim()),a=[],i=[],r="";return t.forEach(e=>{let t=e.trim();/^[-•✓]\s*/.test(t)?a.push(t.replace(/^[-•✓]\s*/,"").trim()):/^\*[A-Za-z]/.test(t)?i.push(t.replace(/^\*/,"").trim()):t.length>20&&(r+=t+". ")}),{mainDescription:r.trim(),bullets:a,features:i}})(t);return n.length>0||o.length>0?(0,i.jsxs)("div",{className:p().descriptionContainer,children:[r&&(0,i.jsx)("div",{className:p().mainDescription,children:(0,i.jsx)("p",{children:a(r)})}),o.length>0&&(0,i.jsxs)("div",{className:p().featuresSection,children:[(0,i.jsx)("h3",{className:p().sectionTitle,children:"Key Features"}),(0,i.jsx)("div",{className:p().featuresList,children:o.map((e,t)=>{let[r,...n]=e.split(":");return(0,i.jsxs)("div",{className:p().featureItem,children:[(0,i.jsx)("h4",{className:p().featureTitle,children:r.trim()}),n.length>0&&(0,i.jsx)("p",{className:p().featureContent,children:a(n.join(":").trim())})]},t)})})]}),n.length>0&&(0,i.jsxs)("div",{className:p().highlightsSection,children:[(0,i.jsx)("h3",{className:p().sectionTitle,children:"Highlights"}),(0,i.jsx)("ul",{className:p().bulletList,children:n.map((e,t)=>(0,i.jsx)("li",{className:p().bulletItem,children:a(e)},t))})]})]}):(0,i.jsx)("div",{className:p().descriptionContainer,children:(0,i.jsx)("div",{className:p().formattedContent,children:(e=>{if(!e)return null;let t=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split(/(?=\s*[-•]\s*|\s*\*[A-Za-z]+[\s:]*|\s*✓)|\n\n+/).filter(e=>e.trim()),r=[];return t.forEach(e=>{let t=e.trim();if(!t)return;let a=t.match(/^([^.]*\.)\s*(.+)$/);if(a&&!t.match(/^[-•✓\*]/)){let[,e,t]=a;if(t.match(/[-•✓\*]/)||t.length>50){r.push(e.trim()),r.push(t.trim());return}}r.push(t)}),r.map((e,t)=>{let r=e.trim();if(!r)return null;if(/^[-•✓]\s*/.test(r)){let e=r.replace(/^[-•✓]\s*/,"").trim();return(0,i.jsx)("li",{className:p().bulletItem,children:a(e)},t)}if(/^\*[A-Za-z]/.test(r)){let e=r.replace(/^\*/,"").trim(),[n,...o]=e.split(":");return o.length>0?(0,i.jsxs)("div",{className:p().featureSection,children:[(0,i.jsx)("h4",{className:p().featureTitle,children:n.trim()}),(0,i.jsx)("p",{className:p().featureContent,children:a(o.join(":").trim())})]},t):(0,i.jsx)("div",{className:p().featureSection,children:(0,i.jsx)("h4",{className:p().featureTitle,children:a(e)})},t)}return(0,i.jsx)("p",{className:p().paragraph,children:a(r)},t)})})(t)})})};var h=a(171),f=a(8166),v=a.n(f);function x(){var e;let{t}=(0,h.useI18n)(),a=(0,s.useParams)(),o=null==a?void 0:a.slug,_=(0,s.useRouter)();(0,c.wA)(),(0,c.d4)(e=>!!e.auth.user);let[p,f]=(0,r.useState)(null),[x,g]=(0,r.useState)(!0),[j,N]=(0,r.useState)(null),[D,b]=(0,r.useState)(null),[y,k]=(0,r.useState)(null),[S,I]=(0,r.useState)(1),[C,T]=(0,r.useState)(null),[w,P]=(0,r.useState)(null),[z,O]=(0,r.useState)({x:0,y:0}),[L,E]=(0,r.useState)(!0),[M,F]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{if(!o||"string"!=typeof o){N(t("product.error.invalidSlug")),g(!1);return}try{let e=await (0,d.M$)(o);if(!e){N(t("product.error.notFound")),g(!1);return}if(f(e),e.images&&e.images.length>0){let t=e.images.find(e=>e.is_primary);b(t?t.image:e.images[0].image)}e.variants&&e.variants.length>0&&q(e.variants),g(!1)}catch(e){console.error("Error fetching product:",e),N(t("common.error")),g(!1)}})()},[o]);let q=e=>{if(1===e.length){k(e[0]),e[0].size_info&&T(e[0].size_info.id),e[0].color_info&&P(e[0].color_info.id);return}let t=e.find(e=>e.is_active);t&&(k(t),t.size_info&&T(t.size_info.id),t.color_info&&P(t.color_info.id))};(0,r.useEffect)(()=>{if(!p||!p.variants)return;let e=p.variants.find(e=>{let t=null===C||e.size_info&&e.size_info.id===C,a=null===w||e.color_info&&e.color_info.id===w;return t&&a});if(e){if(k(e),e.image)E(!0),b(e.image);else if(e.images&&e.images.length>0){E(!0);let t=e.images.find(e=>e.is_primary);b(t?t.image:e.images[0].image)}}},[C,w,p]);let B=e=>{E(!0),b(e)},A=async()=>{if(p){F(!0);try{let e=y?parseFloat(p.base_price)+parseFloat(y.additional_price):parseFloat(p.base_price),t=new URLSearchParams({buyNow:"true",productId:p.id.toString(),productName:p.name,productSlug:p.slug,price:e.toString(),quantity:S.toString(),...(null==y?void 0:y.id)&&{variantId:y.id.toString()},...D&&{image:D},...(null==y?void 0:y.color_info)&&{color:y.color_info.name,colorCode:y.color_info.hex_code},...(null==y?void 0:y.size_info)&&{size:y.size_info.name},...p.buy_now_link&&{buyNowLink:p.buy_now_link}});console.log("=== BUY NOW DEBUG - PRODUCT PAGE ==="),console.log("product.buy_now_link:",p.buy_now_link),console.log("buyNowLink in params:",p.buy_now_link?"YES":"NO"),console.log("Final URL params:",t.toString()),window.location.href="/checkout?".concat(t.toString())}catch(e){console.error("Error processing Buy Now:",e)}finally{F(!1)}}},H=[85,92,78,88,80];if(x)return(0,i.jsxs)("div",{className:v().loadingContainer,children:[(0,i.jsx)(u.A,{size:"large",color:"primary",text:t("product.loading.text")}),(0,i.jsx)("div",{className:v().skeletonFallback,children:(0,i.jsxs)("div",{className:v().productContainer,children:[(0,i.jsxs)("div",{className:v().galleryContainer,children:[(0,i.jsx)("div",{className:"".concat(v().skeletonMainImage," ").concat(v().skeleton)}),(0,i.jsx)("div",{style:{display:"flex",flexWrap:"wrap"},children:[1,2,3,4].map(e=>(0,i.jsx)("div",{className:"".concat(v().skeletonThumbnail," ").concat(v().skeleton)},e))})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"".concat(v().skeletonTitle," ").concat(v().skeleton)}),(0,i.jsx)("div",{className:"".concat(v().skeletonPrice," ").concat(v().skeleton)}),[1,2,3,4,5].map(e=>(0,i.jsx)("div",{className:"".concat(v().skeletonText," ").concat(v().skeleton),style:{width:"".concat(H[e-1],"%")}},e)),(0,i.jsx)("div",{className:"".concat(v().skeletonButton," ").concat(v().skeleton)})]})]})})]});if(j)return(0,i.jsxs)("div",{className:v().errorContainer,children:[(0,i.jsx)("h1",{className:v().errorTitle,children:t("product.error.somethingWrong")}),(0,i.jsx)("p",{className:v().errorMessage,children:j}),(0,i.jsx)("button",{className:v().errorButton,onClick:()=>_.push("/"),children:t("product.error.backToHome")})]});if(!p)return(0,i.jsxs)("div",{className:v().errorContainer,children:[(0,i.jsx)("h1",{className:v().errorTitle,children:t("product.error.notFound")}),(0,i.jsx)("p",{className:v().errorMessage,children:t("product.error.notFoundMessage")}),(0,i.jsx)("button",{className:v().errorButton,onClick:()=>_.push("/"),children:t("product.error.backToHome")})]});let V=y?(parseFloat(p.base_price)+parseFloat(y.additional_price)).toFixed(2):p.base_price,W=v().inStock,G=v().inStockText;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:v().productContainer,children:[(0,i.jsxs)("div",{className:v().galleryContainer,children:[(0,i.jsxs)("div",{className:v().mainImageContainer,onMouseMove:e=>{let{left:t,top:a,width:i,height:r}=e.currentTarget.getBoundingClientRect();O({x:(e.clientX-t)/i*100,y:(e.clientY-a)/r*100})},children:[L&&(0,i.jsx)("div",{className:v().imageLoadingOverlay,children:(0,i.jsx)(u.A,{size:"medium",color:"primary"})}),(0,i.jsx)(n.default,{src:D||(null==(e=p.images[0])?void 0:e.image)||"/placeholder-product.jpg",alt:p.name,fill:!0,className:v().mainImage,style:{transformOrigin:"".concat(z.x,"% ").concat(z.y,"%"),opacity:L?.3:1},onLoad:()=>E(!1),onError:()=>E(!1)}),(0,i.jsx)("div",{className:v().zoomOverlay})]}),(0,i.jsx)("div",{className:v().thumbnailsContainer,children:p.images.map(e=>(0,i.jsx)("div",{className:"".concat(v().thumbnailWrapper," ").concat(D===e.image?v().active:""),onClick:()=>B(e.image),children:(0,i.jsx)(n.default,{src:e.image,alt:e.alt_text||p.name,width:80,height:80,className:v().thumbnail})},e.id))})]}),(0,i.jsxs)("div",{className:v().productInfo,children:["          ",(0,i.jsxs)("div",{className:v().breadcrumbs,children:[(0,i.jsx)(l(),{href:"/",className:v().breadcrumbItem,children:t("product.breadcrumbs.home")}),(0,i.jsx)("span",{className:v().breadcrumbSeparator,children:"/"}),p.category_name&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l(),{href:"/categories/".concat(p.slug),className:v().breadcrumbItem,children:p.category_name}),(0,i.jsx)("span",{className:v().breadcrumbSeparator,children:"/"})]}),(0,i.jsx)("span",{className:v().breadcrumbItem,children:p.name})]}),(0,i.jsx)("h1",{className:v().productName,children:p.name}),"          ",(0,i.jsx)("div",{className:v().priceContainer,children:(0,i.jsxs)("span",{className:v().price,children:[V," ",t("product.price.currency")]})}),(0,i.jsxs)("div",{className:v().availabilitySection,children:[(0,i.jsx)("div",{className:"".concat(v().availabilityDot," ").concat(W)}),"            ",(0,i.jsx)("span",{className:"".concat(v().availabilityText," ").concat(G),children:t("product.availability.inStock")})]}),"          ",(0,i.jsx)("div",{className:v().description,children:(0,i.jsx)(m,{description:p.description||t("product.description.noDescription")})}),(0,i.jsx)("div",{className:v().divider}),(()=>{if(!p||!p.variants)return null;let e=new Map;p.variants.forEach(t=>{t.size_info&&e.set(t.size_info.id,t.size_info)});let a=Array.from(e.values());return 0===a.length?null:(0,i.jsxs)("div",{className:v().variantSection,children:[(0,i.jsx)("div",{className:v().variantTitle,children:t("product.variants.size")}),(0,i.jsx)("div",{className:v().variantOptions,children:a.sort((e,t)=>e.display_order-t.display_order).map(e=>(0,i.jsx)("div",{className:"".concat(v().sizeOption," ").concat(C===e.id?v().selected:""),onClick:()=>T(e.id),children:e.name},e.id))})]})})(),(()=>{if(!p||!p.variants)return null;let e=new Map;p.variants.forEach(t=>{t.color_info&&e.set(t.color_info.id,t.color_info)});let a=Array.from(e.values());return 0===a.length?null:(0,i.jsxs)("div",{className:v().variantSection,children:[(0,i.jsx)("div",{className:v().variantTitle,children:t("product.variants.color")}),(0,i.jsx)("div",{className:v().variantOptions,children:a.sort((e,t)=>e.display_order-t.display_order).map(e=>(0,i.jsx)("div",{className:"".concat(v().colorOption," ").concat(w===e.id?v().selected:""),style:{backgroundColor:e.hex_code||"#000000"},onClick:()=>P(e.id),title:e.name},e.id))})]})})(),y?(0,i.jsxs)("div",{className:v().selectedVariantInfo,children:["        ",y.size_info&&(0,i.jsxs)("div",{className:v().variantInfoItem,children:[(0,i.jsx)("span",{className:v().variantInfoLabel,children:t("product.variants.selectedInfo.size")}),(0,i.jsx)("span",{className:v().variantInfoValue,children:y.size_info.name})]}),y.color_info&&(0,i.jsxs)("div",{className:v().variantInfoItem,children:[(0,i.jsx)("span",{className:v().variantInfoLabel,children:t("product.variants.selectedInfo.color")}),(0,i.jsxs)("span",{className:v().variantInfoValue,children:[y.color_info.hex_code&&(0,i.jsx)("span",{className:v().colorPreview,style:{backgroundColor:y.color_info.hex_code}}),y.color_info.name]})]}),y.name_suffix&&(0,i.jsxs)("div",{className:v().variantInfoItem,children:[(0,i.jsx)("span",{className:v().variantInfoLabel,children:t("product.variants.selectedInfo.variant")}),(0,i.jsx)("span",{className:v().variantInfoValue,children:y.name_suffix})]})]}):null,"          ",(0,i.jsxs)("div",{className:v().ctaSection,children:[(0,i.jsxs)("button",{className:"".concat(v().addToCartButton," ").concat(M?v().loading:""),onClick:A,disabled:M,children:["              ",M?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.A,{size:"small",color:"white"}),(0,i.jsx)("span",{children:t("product.buttons.processing")})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,i.jsx)("path",{d:"M3 3h2l.4 2m0 0L7 13h10l4-8H5.4z"}),(0,i.jsx)("circle",{cx:"9",cy:"21",r:"1"}),(0,i.jsx)("circle",{cx:"20",cy:"21",r:"1"})]}),t("product.buttons.buyNow")]})]}),"          "]})]})]})})}},8166:e=>{e.exports={loadingContainer:"productDetail_loadingContainer__loc0X",skeletonFallback:"productDetail_skeletonFallback___a_3L",productContainer:"productDetail_productContainer__1HO_y",productInfo:"productDetail_productInfo__SLHZK",productName:"productDetail_productName__XFLMi",price:"productDetail_price__7UkJ3",mainImageContainer:"productDetail_mainImageContainer__qWeql",thumbnailsContainer:"productDetail_thumbnailsContainer__sBEyu",ctaSection:"productDetail_ctaSection__1U4f9",addToCartButton:"productDetail_addToCartButton___Cv9p",quantityWrapper:"productDetail_quantityWrapper__0yxGw",variantSection:"productDetail_variantSection__IpsN4",sizeOption:"productDetail_sizeOption__Udw3x",colorOption:"productDetail_colorOption__47x_3",additionalInfoSection:"productDetail_additionalInfoSection__coIPB",descriptionContent:"productDetail_descriptionContent__EOBxF",thumbnailWrapper:"productDetail_thumbnailWrapper__tMS1u",variantOptions:"productDetail_variantOptions__kLImq",galleryContainer:"productDetail_galleryContainer__T3cNQ",mainImage:"productDetail_mainImage__Hgmb5",zoomOverlay:"productDetail_zoomOverlay__cYnhr",active:"productDetail_active__cc9y9",thumbnail:"productDetail_thumbnail__RWU84",breadcrumbs:"productDetail_breadcrumbs__rZt6Z",breadcrumbItem:"productDetail_breadcrumbItem__qaF23",breadcrumbSeparator:"productDetail_breadcrumbSeparator__btMpg",priceContainer:"productDetail_priceContainer__EA3Da",originalPrice:"productDetail_originalPrice__PVYPr",discount:"productDetail_discount__u0xd7",availabilitySection:"productDetail_availabilitySection__re5uw",availabilityDot:"productDetail_availabilityDot__GU07f",pulse:"productDetail_pulse__IqXby",inStock:"productDetail_inStock__XmiRa",outOfStock:"productDetail_outOfStock__KgMey",availabilityText:"productDetail_availabilityText__fuuO_",inStockText:"productDetail_inStockText__Dhak2",outOfStockText:"productDetail_outOfStockText__ZIxGp",description:"productDetail_description__qoe7M",divider:"productDetail_divider__Giejd",variantTitle:"productDetail_variantTitle__Ksxaj",selected:"productDetail_selected__qYnoV",selectedVariantInfo:"productDetail_selectedVariantInfo__dqNKk",variantInfoItem:"productDetail_variantInfoItem__jMAUo",variantInfoLabel:"productDetail_variantInfoLabel__yVPIf",variantInfoValue:"productDetail_variantInfoValue__SU3_B",colorPreview:"productDetail_colorPreview__wEmAA",quantityLabel:"productDetail_quantityLabel__EEiy_",quantityControls:"productDetail_quantityControls__uZN5v",quantityButton:"productDetail_quantityButton__8Y4E1",quantityInput:"productDetail_quantityInput__zPQFy",descriptionHeader:"productDetail_descriptionHeader__hkV3J",lowStock:"productDetail_lowStock__6NAvX",lowStockText:"productDetail_lowStockText__mzp3k",relatedProductsSection:"productDetail_relatedProductsSection__sinly",sectionTitle:"productDetail_sectionTitle__ZWTpv",productGrid:"productDetail_productGrid__WhiHI",skeleton:"productDetail_skeleton__sEZya",shimmer:"productDetail_shimmer__mBla8",skeletonMainImage:"productDetail_skeletonMainImage__HH03C",skeletonThumbnail:"productDetail_skeletonThumbnail__hFYyP",skeletonTitle:"productDetail_skeletonTitle__5stG8",skeletonPrice:"productDetail_skeletonPrice__y0vMy",skeletonText:"productDetail_skeletonText__vI0Gf",skeletonButton:"productDetail_skeletonButton__E6yMs",errorContainer:"productDetail_errorContainer__f73vZ",errorTitle:"productDetail_errorTitle__RJOQ_",errorMessage:"productDetail_errorMessage__eaf4M",errorButton:"productDetail_errorButton__flo_x",imageLoadingOverlay:"productDetail_imageLoadingOverlay__FX3H2",loading:"productDetail_loading__GE4qn"}}},e=>{var t=t=>e(e.s=t);e.O(0,[9614,5829,6707,9800,2352,6530,2214,5748,2333,8187,5980,4676,7698,1659,8538,3516,901,9857,8268,4170,7635,9670,7593,6861,5885,7128,6136,9064,3743,5377,1980,7137,1880,4297,2868,4681,4833,6986,9002,9466,7692,6451,6373,8852,8096,7358],()=>t(2317)),_N_E=e.O()}]);