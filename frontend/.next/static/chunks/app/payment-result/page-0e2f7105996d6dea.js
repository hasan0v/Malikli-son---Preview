(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7403],{4410:e=>{e.exports={paymentResultPage:"payment-result_paymentResultPage__2FlQM",container:"payment-result_container__Rebum",loading:"payment-result_loading__tkpMF",spinner:"payment-result_spinner__nZEQr",spin:"payment-result_spin__QkbRC",success:"payment-result_success___R2pT",cancelled:"payment-result_cancelled__9PxvP",failed:"payment-result_failed__vl224",error:"payment-result_error__dql_v",icon:"payment-result_icon__O29T8",orderInfo:"payment-result_orderInfo__5ARwp",actions:"payment-result_actions__DAXyE",primaryButton:"payment-result_primaryButton__dRyf1",secondaryButton:"payment-result_secondaryButton__IjkHq"}},8236:(e,s,n)=>{Promise.resolve().then(n.bind(n,9185))},9185:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>u});var r=n(5155),l=n(2115),a=n(5695),t=n(4540),c=n(9493),i=n(171),d=n(4410),o=n.n(d);function u(){let{t:e}=(0,i.useI18n)(),s=(0,a.useRouter)(),n=(0,a.useSearchParams)(),{isAuthenticated:d}=(0,t.d4)(e=>e.auth),[u,p]=(0,l.useState)(!0),[m,h]=(0,l.useState)(null),[y,_]=(0,l.useState)(null),[x,j]=(0,l.useState)(null);if((0,l.useEffect)(()=>{let e=async()=>{try{let e=null==n?void 0:n.get("status"),s=null==n?void 0:n.get("orderid"),r=(null==n?void 0:n.get("payment"))==="success",l=(null==n?void 0:n.get("payment"))==="cancelled",a="failed";if(r||"success"===e?a="success":l||"cancelled"===e?a="cancelled":"failed"===e&&(a="failed"),h(a),j(s||null),s&&d){let e=localStorage.getItem("access_token");if(e)try{await (0,c.It)(s,"success"===a?"paid":"cancelled"===a?"pending":"failed",e)}catch(e){console.error("Failed to update order status:",e)}}}catch(e){console.error("Error processing payment result:",e),_("Failed to process payment result")}finally{p(!1)}};n&&e()},[n,d]),u)return(0,r.jsx)("div",{className:o().paymentResultPage,children:(0,r.jsx)("div",{className:o().container,children:(0,r.jsxs)("div",{className:o().loading,children:[(0,r.jsx)("div",{className:o().spinner}),(0,r.jsx)("h2",{children:"Processing payment result..."}),(0,r.jsx)("p",{children:"Please wait while we confirm your payment status."})]})})});let N=()=>{s.push("/")},f=()=>{s.push("/orders")};return(0,r.jsx)("div",{className:o().paymentResultPage,children:(0,r.jsxs)("div",{className:o().container,children:["success"===m&&(0,r.jsxs)("div",{className:o().success,children:[(0,r.jsx)("div",{className:o().icon,children:"✅"}),(0,r.jsx)("h1",{children:"Payment Successful!"}),(0,r.jsx)("p",{children:"Your order has been successfully processed."}),x&&(0,r.jsxs)("p",{className:o().orderInfo,children:["Order ID: ",(0,r.jsx)("strong",{children:x})]}),(0,r.jsxs)("div",{className:o().actions,children:[(0,r.jsx)("button",{onClick:f,className:o().primaryButton,children:"View Orders"}),(0,r.jsx)("button",{onClick:N,className:o().secondaryButton,children:"Continue Shopping"})]})]}),"cancelled"===m&&(0,r.jsxs)("div",{className:o().cancelled,children:[(0,r.jsx)("div",{className:o().icon,children:"⚠️"}),(0,r.jsx)("h1",{children:"Payment Cancelled"}),(0,r.jsx)("p",{children:"Your payment was cancelled. Your order is still pending."}),x&&(0,r.jsxs)("p",{className:o().orderInfo,children:["Order ID: ",(0,r.jsx)("strong",{children:x})]}),(0,r.jsx)("p",{children:"You can try to complete the payment again from your orders page."}),(0,r.jsxs)("div",{className:o().actions,children:[(0,r.jsx)("button",{onClick:f,className:o().primaryButton,children:"View Orders"}),(0,r.jsx)("button",{onClick:N,className:o().secondaryButton,children:"Continue Shopping"})]})]}),"failed"===m&&(0,r.jsxs)("div",{className:o().failed,children:[(0,r.jsx)("div",{className:o().icon,children:"❌"}),(0,r.jsx)("h1",{children:"Payment Failed"}),(0,r.jsx)("p",{children:"Unfortunately, your payment could not be processed."}),x&&(0,r.jsxs)("p",{className:o().orderInfo,children:["Order ID: ",(0,r.jsx)("strong",{children:x})]}),(0,r.jsx)("p",{children:"Please try again or contact support if the problem persists."}),(0,r.jsxs)("div",{className:o().actions,children:[(0,r.jsx)("button",{onClick:f,className:o().primaryButton,children:"View Orders"}),(0,r.jsx)("button",{onClick:N,className:o().secondaryButton,children:"Continue Shopping"})]})]}),y&&(0,r.jsxs)("div",{className:o().error,children:[(0,r.jsx)("div",{className:o().icon,children:"⚠️"}),(0,r.jsx)("h1",{children:"Error"}),(0,r.jsx)("p",{children:y}),(0,r.jsx)("div",{className:o().actions,children:(0,r.jsx)("button",{onClick:N,className:o().primaryButton,children:"Go Home"})})]})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[7541,6707,9800,2352,6530,2214,5748,2333,8187,5980,4676,7698,1659,8538,3516,901,9857,8268,4170,7635,9670,7593,6861,5885,7128,6136,9064,3743,5377,1980,7137,1880,4297,2868,4681,4833,6986,9717,6886,7692,6451,6373,8852,8096,7358],()=>s(8236)),_N_E=e.O()}]);