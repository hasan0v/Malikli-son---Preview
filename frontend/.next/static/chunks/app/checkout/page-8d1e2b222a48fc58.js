(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8279],{1230:e=>{e.exports={checkoutSteps:"CheckoutSteps_checkoutSteps__MA8FE",stepsContainer:"CheckoutSteps_stepsContainer__YqEUe",steps:"CheckoutSteps_steps__PAdkX",step:"CheckoutSteps_step__YgWCz",stepNumber:"CheckoutSteps_stepNumber__0Wqyl",completed:"CheckoutSteps_completed__C31FA",current:"CheckoutSteps_current__rDiU5",pulse:"CheckoutSteps_pulse__taqqQ",checkmark:"CheckoutSteps_checkmark__teilK",checkmarkPop:"CheckoutSteps_checkmarkPop__xW_cI",stepLabel:"CheckoutSteps_stepLabel___U138",connector:"CheckoutSteps_connector__3xZrB",connectorCompleted:"CheckoutSteps_connectorCompleted__kMerg",disabled:"CheckoutSteps_disabled__Hw_am"}},1864:(e,t,s)=>{Promise.resolve().then(s.bind(s,5663))},3792:e=>{e.exports={confirmationStep:"ConfirmationStep_confirmationStep__UN4sm",reviewText:"ConfirmationStep_reviewText__nLr0v",confirmationSections:"ConfirmationStep_confirmationSections__nXtvw",section:"ConfirmationStep_section__EFdIv",sectionContent:"ConfirmationStep_sectionContent__dLZSc",paymentMethod:"ConfirmationStep_paymentMethod__bPkQx",paymentIcon:"ConfirmationStep_paymentIcon__MuTJa",orderItems:"ConfirmationStep_orderItems__f_iXD",orderItem:"ConfirmationStep_orderItem__6ttSQ",itemInfo:"ConfirmationStep_itemInfo__he7Na",variant:"ConfirmationStep_variant__LyMI7",itemPrice:"ConfirmationStep_itemPrice__KpR5s",orderTotals:"ConfirmationStep_orderTotals__Q6hUC",totalLine:"ConfirmationStep_totalLine__XAEBs",grandTotal:"ConfirmationStep_grandTotal__Wdm90",terms:"ConfirmationStep_terms__8RjZr",termsLabel:"ConfirmationStep_termsLabel__dAkMs",termsError:"ConfirmationStep_termsError__MHzL5",fadeInError:"ConfirmationStep_fadeInError__a_wEm",placeOrderSection:"ConfirmationStep_placeOrderSection__Y8QIG",placeOrderButton:"ConfirmationStep_placeOrderButton__p3Ami",disabled:"ConfirmationStep_disabled__rCkEN",spinner:"ConfirmationStep_spinner__6MvNH",spin:"ConfirmationStep_spin__5A8Xa",securityNotice:"ConfirmationStep_securityNotice__SpvqX",redirectNotice:"ConfirmationStep_redirectNotice__CoqfD"}},3967:e=>{e.exports={orderSummary:"OrderSummary_orderSummary__Al7DB",orderItems:"OrderSummary_orderItems__vJsVE",orderItem:"OrderSummary_orderItem__FXDOc",itemImage:"OrderSummary_itemImage__CXmt9",placeholderImage:"OrderSummary_placeholderImage__e_olv",visible:"OrderSummary_visible__UzXqC",quantity:"OrderSummary_quantity__yzvTc",itemDetails:"OrderSummary_itemDetails__GJwZ_",itemName:"OrderSummary_itemName__bqPCA",itemVariant:"OrderSummary_itemVariant__JlRRz",itemOptions:"OrderSummary_itemOptions__QPoQ9",colorOption:"OrderSummary_colorOption__dng73",colorCircle:"OrderSummary_colorCircle__CabZL",itemPrice:"OrderSummary_itemPrice__Dc0jZ",discountSection:"OrderSummary_discountSection__JhQ2C",discountInput:"OrderSummary_discountInput__Dj6gk",discountCode:"OrderSummary_discountCode__hWzlh",applyButton:"OrderSummary_applyButton__98fda",orderTotals:"OrderSummary_orderTotals__iDnGc",totalLine:"OrderSummary_totalLine__p1NO5",discountAmount:"OrderSummary_discountAmount__zCMWX",grandTotal:"OrderSummary_grandTotal__HXncb",securityBadges:"OrderSummary_securityBadges__8S28i",badge:"OrderSummary_badge__n_yBw",badgeIcon:"OrderSummary_badgeIcon__nS_nY",loadingOverlay:"OrderSummary_loadingOverlay__OCdO_",spinner:"OrderSummary_spinner__oKbWI",spin:"OrderSummary_spin__sPrWa"}},5663:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>L});var o=s(5155),a=s(2115),r=s(4540),n=s(5695),i=s(4089);let c=[{id:1,name:"information",title:"checkout.steps.information",completed:!1,current:!0,accessible:!0},{id:2,name:"shipping",title:"checkout.steps.shipping",completed:!1,current:!1,accessible:!1},{id:3,name:"payment",title:"checkout.steps.payment",completed:!1,current:!1,accessible:!1},{id:4,name:"confirmation",title:"checkout.steps.confirmation",completed:!1,current:!1,accessible:!1}],d=[{id:"card",name:"Visa/Mastercard",type:"card",icon:"\uD83D\uDCB3",description:"checkout.payment.cardDescription"}],l=async(e,t)=>{let s=await fetch("".concat("http://localhost:8000/api/v1","/auth/addresses/"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(e)});if(!s.ok){let e=await s.text();throw console.error("Save API Error Response:",e),Error((()=>{try{return JSON.parse(e)}catch(t){return{message:e}}})().message||"HTTP error! status: ".concat(s.status))}return await s.json()},m=async e=>{let t=await fetch("".concat("http://localhost:8000/api/v1","/auth/addresses/"),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok){let e=await t.text();throw console.error("API Error Response:",e),Error((()=>{try{return JSON.parse(e)}catch(t){return{message:e}}})().message||"HTTP error! status: ".concat(t.status))}let s=await t.json();return Array.isArray(s)?s:s&&"object"==typeof s&&Array.isArray(s.results)?s.results:[]},u=async(e,t)=>{let s=await fetch("".concat("http://localhost:8000/api/v1","/auth/addresses/").concat(e,"/"),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}});if(!s.ok)throw Error((await s.json().catch(()=>({}))).message||"HTTP error! status: ".concat(s.status))};var p=s(9493),_=s(167),h=s(5295),g=s(8334),f=s.n(g),v=s(9295),y=s.n(v);function x(e){let{checkoutData:t,updateCheckoutData:s,errors:r,isAuthenticated:n,userAddresses:i=[],isLoadingAddresses:c=!1,autoSaveInProgress:d=!1,onLoadSavedAddress:l,onDeleteAddress:m,selectedAddressId:u=null}=e,{t:p}=(0,h.useI18n)(),[_,g]=(0,a.useState)(!0),f=(e,o)=>{s({customer_info:{...t.customer_info,[e]:o}})},v=(e,o)=>{s({shipping_address:{...t.shipping_address,[e]:o}})},x=e=>{null==l||l(e),g(!1)},j=u&&!_,k=i.find(e=>e.id===u);return(0,o.jsxs)("div",{className:y().container,children:["      ",(0,o.jsxs)("div",{className:y().section,children:[(0,o.jsx)("h2",{className:y().sectionTitle,children:p("checkout.customerInfo.title")}),n&&(0,o.jsxs)("div",{className:y().authenticatedNotice,children:["✓ ",p("checkout.customerInfo.loggedIn"),d&&(0,o.jsxs)("div",{className:y().autoSaveStatus,children:["\uD83D\uDD04 ",p("checkout.customerInfo.saving")]})]}),"        ",n&&i.length>0&&(0,o.jsxs)("div",{className:y().savedAddressesSection,children:[(0,o.jsx)("h3",{className:y().savedAddressesTitle,children:p("checkout.customerInfo.savedAddresses")}),c?(0,o.jsx)("div",{className:y().loadingAddresses,children:p("checkout.customerInfo.loadingAddresses")}):(0,o.jsx)("div",{className:y().savedAddressesList,children:i.map(e=>(0,o.jsxs)("div",{className:"".concat(y().savedAddressItem," ").concat(u===e.id?y().selectedAddress:""),children:[(0,o.jsxs)("div",{className:y().savedAddressInfo,children:[(0,o.jsxs)("div",{className:y().savedAddressName,children:[e.recipient_name,e.is_default_shipping&&(0,o.jsx)("span",{className:y().defaultBadge,children:p("checkout.customerInfo.default")})]}),(0,o.jsxs)("div",{className:y().savedAddressText,children:[e.street_address,e.address_line_2&&", ".concat(e.address_line_2),",",e.city,", ",e.postal_code]})]}),(0,o.jsxs)("div",{className:y().savedAddressActions,children:["                      ",(0,o.jsx)("button",{type:"button",className:y().useSavedAddressBtn,onClick:()=>x(e),children:p("checkout.customerInfo.use")}),(0,o.jsx)("button",{type:"button",className:y().deleteSavedAddressBtn,onClick:()=>null==m?void 0:m(e.id),children:p("checkout.customerInfo.delete")})]})]},e.id))}),(0,o.jsxs)("button",{type:"button",className:y().addNewAddressBtn,onClick:()=>{s({shipping_address:{street_address:"",apartment:"",city:"",state:"",postal_code:"",country:"BY"}}),g(!0)},children:["+ ",p("checkout.customerInfo.addNewAddress")]})]}),"        ",j&&k&&(0,o.jsxs)("div",{className:y().selectedAddressDisplay,children:[(0,o.jsx)("div",{className:y().selectedAddressHeader,children:(0,o.jsx)("h3",{className:y().selectedAddressTitle,children:p("checkout.customerInfo.selectedAddress")})}),(0,o.jsxs)("div",{className:y().selectedAddressDetails,children:[(0,o.jsx)("div",{className:y().selectedAddressRow,children:(0,o.jsx)("strong",{children:k.recipient_name})}),(0,o.jsxs)("div",{className:y().selectedAddressRow,children:[k.street_address,k.address_line_2&&", ".concat(k.address_line_2)]}),(0,o.jsxs)("div",{className:y().selectedAddressRow,children:[k.city,", ",k.state_province," ",k.postal_code]}),k.phone_number&&(0,o.jsxs)("div",{className:y().selectedAddressRow,children:[p("checkout.customerInfo.phoneLabel"),": ",k.phone_number]})]})]}),(0,o.jsxs)("div",{className:y().formRow,children:[(0,o.jsxs)("div",{className:y().formGroup,children:["            ",(0,o.jsxs)("label",{htmlFor:"firstName",className:y().label,children:[p("checkout.customerInfo.firstName")," ",(0,o.jsx)("span",{className:y().required,children:"*"})]}),(0,o.jsx)("input",{type:"text",id:"firstName",value:t.customer_info.first_name,onChange:e=>f("first_name",e.target.value),className:"".concat(y().input," ").concat(r.first_name?y().inputError:""),placeholder:p("checkout.customerInfo.firstNamePlaceholder")}),r.first_name&&(0,o.jsx)("span",{className:y().errorText,children:r.first_name})]}),(0,o.jsxs)("div",{className:y().formGroup,children:["            ",(0,o.jsxs)("label",{htmlFor:"lastName",className:y().label,children:[p("checkout.customerInfo.lastName")," ",(0,o.jsx)("span",{className:y().required,children:"*"})]}),(0,o.jsx)("input",{type:"text",id:"lastName",value:t.customer_info.last_name,onChange:e=>f("last_name",e.target.value),className:"".concat(y().input," ").concat(r.last_name?y().inputError:""),placeholder:p("checkout.customerInfo.lastNamePlaceholder")}),r.last_name&&(0,o.jsx)("span",{className:y().errorText,children:r.last_name})]})]}),(0,o.jsxs)("div",{className:y().formRow,children:[(0,o.jsxs)("div",{className:y().formGroup,children:["            ",(0,o.jsxs)("label",{htmlFor:"email",className:y().label,children:[p("checkout.customerInfo.email")," ",(0,o.jsx)("span",{className:y().required,children:"*"})]}),(0,o.jsx)("input",{type:"email",id:"email",value:t.customer_info.email,onChange:e=>f("email",e.target.value),className:"".concat(y().input," ").concat(r.email?y().inputError:""),placeholder:p("checkout.customerInfo.emailPlaceholder")}),r.email&&(0,o.jsx)("span",{className:y().errorText,children:r.email})]}),(0,o.jsxs)("div",{className:y().formGroup,children:[(0,o.jsx)("label",{htmlFor:"phone",className:y().label,children:p("checkout.customerInfo.phone")}),(0,o.jsx)("input",{type:"tel",id:"phone",value:t.customer_info.phone,onChange:e=>f("phone",e.target.value),className:y().input,placeholder:p("checkout.customerInfo.phonePlaceholder")})]})]}),"      "]}),_&&(0,o.jsxs)("div",{className:y().section,children:["          ",(0,o.jsxs)("div",{className:y().addressFormHeader,children:[(0,o.jsx)("h2",{className:y().sectionTitle,children:p("checkout.customerInfo.shippingAddress")}),!j&&n&&(0,o.jsx)("div",{className:y().addressModeNote,children:p("checkout.customerInfo.addressNote")})]}),(0,o.jsxs)("div",{className:y().formGroup,children:["          ",(0,o.jsxs)("label",{htmlFor:"streetAddress",className:y().label,children:[p("checkout.customerInfo.streetAddress")," ",(0,o.jsx)("span",{className:y().required,children:"*"})]}),(0,o.jsx)("input",{type:"text",id:"streetAddress",value:t.shipping_address.street_address,onChange:e=>v("street_address",e.target.value),className:"".concat(y().input," ").concat(r.street_address?y().inputError:""),placeholder:p("checkout.customerInfo.streetAddressPlaceholder")}),r.street_address&&(0,o.jsx)("span",{className:y().errorText,children:r.street_address})]}),(0,o.jsxs)("div",{className:y().formGroup,children:["          ",(0,o.jsx)("label",{htmlFor:"apartment",className:y().label,children:p("checkout.customerInfo.apartment")}),(0,o.jsx)("input",{type:"text",id:"apartment",value:t.shipping_address.apartment,onChange:e=>v("apartment",e.target.value),className:y().input,placeholder:p("checkout.customerInfo.apartmentPlaceholder")})]}),(0,o.jsxs)("div",{className:y().formRow,children:[(0,o.jsxs)("div",{className:y().formGroup,children:["            ",(0,o.jsxs)("label",{htmlFor:"city",className:y().label,children:[p("checkout.customerInfo.city")," ",(0,o.jsx)("span",{className:y().required,children:"*"})]}),(0,o.jsx)("input",{type:"text",id:"city",value:t.shipping_address.city,onChange:e=>v("city",e.target.value),className:"".concat(y().input," ").concat(r.city?y().inputError:""),placeholder:p("checkout.customerInfo.cityPlaceholder")}),r.city&&(0,o.jsx)("span",{className:y().errorText,children:r.city})]}),(0,o.jsxs)("div",{className:y().formGroup,children:["            ",(0,o.jsx)("label",{htmlFor:"state",className:y().label,children:p("checkout.customerInfo.state")}),(0,o.jsx)("input",{type:"text",id:"state",value:t.shipping_address.state,onChange:e=>v("state",e.target.value),className:y().input,placeholder:p("checkout.customerInfo.statePlaceholder")})]})]}),(0,o.jsxs)("div",{className:y().formRow,children:[(0,o.jsxs)("div",{className:y().formGroup,children:[(0,o.jsxs)("label",{htmlFor:"postalCode",className:y().label,children:[p("checkout.customerInfo.postalCode")," ",(0,o.jsx)("span",{className:y().required,children:"*"})]}),(0,o.jsx)("input",{type:"text",id:"postalCode",value:t.shipping_address.postal_code,onChange:e=>v("postal_code",e.target.value),className:"".concat(y().input," ").concat(r.postal_code?y().inputError:""),placeholder:p("checkout.customerInfo.postalCodePlaceholder")}),r.postal_code&&(0,o.jsx)("span",{className:y().errorText,children:r.postal_code})]}),(0,o.jsxs)("div",{className:y().formGroup,children:["            ",(0,o.jsxs)("label",{htmlFor:"country",className:y().label,children:[p("checkout.customerInfo.country")," ",(0,o.jsx)("span",{className:y().required,children:"*"})]}),(0,o.jsxs)("select",{id:"country",value:t.shipping_address.country,onChange:e=>v("country",e.target.value),className:y().select,children:["              ",(0,o.jsx)("option",{value:"BY",children:p("checkout.customerInfo.countries.belarus")}),(0,o.jsx)("option",{value:"RU",children:p("checkout.customerInfo.countries.russia")}),(0,o.jsx)("option",{value:"UA",children:p("checkout.customerInfo.countries.ukraine")}),(0,o.jsx)("option",{value:"KZ",children:p("checkout.customerInfo.countries.kazakhstan")}),(0,o.jsx)("option",{value:"PL",children:p("checkout.customerInfo.countries.poland")}),(0,o.jsx)("option",{value:"LT",children:p("checkout.customerInfo.countries.lithuania")}),(0,o.jsx)("option",{value:"LV",children:p("checkout.customerInfo.countries.latvia")}),(0,o.jsx)("option",{value:"EE",children:p("checkout.customerInfo.countries.estonia")})]})]})]}),n&&(0,o.jsx)("div",{className:y().checkbox,children:(0,o.jsxs)("label",{className:y().checkboxLabel,children:[(0,o.jsx)("input",{type:"checkbox",checked:t.save_address,onChange:e=>s({save_address:e.target.checked}),className:y().checkboxInput}),(0,o.jsx)("span",{className:y().checkboxMark}),p("checkout.customerInfo.saveAddress")]})})]})]})}var j=s(7251),k=s.n(j);function S(e){let{checkoutData:t,updateCheckoutData:s,shippingMethods:r,errors:n}=e,{t:i}=(0,h.useI18n)(),[c,d]=(0,a.useState)(null),l=e=>{s({shipping_method:e}),d(e.id),setTimeout(()=>d(null),600)},m=e=>{let t=e.estimated_delivery_min_days||0,s=e.estimated_delivery_max_days||0;return 0===t&&0===s?i("checkout.shipping.deliveryTime.today"):t===s?i("checkout.shipping.deliveryTime.days",{count:t}):i("checkout.shipping.deliveryTime.range",{min:t,max:s})},u=e=>0===e?i("checkout.shipping.free"):"".concat(e.toFixed(2)," USD");return(0,o.jsxs)("div",{className:k().container,children:[(0,o.jsx)("h2",{className:k().title,children:i("checkout.shipping.title")}),(0,o.jsx)("div",{className:k().shippingMethods,children:r.filter(e=>e.is_active).map(e=>{var s;let a=(null==(s=t.shipping_method)?void 0:s.id)===e.id;return(0,o.jsx)("div",{className:"".concat(k().shippingMethod," ").concat(a?k().selected:""," ").concat(c===e.id?k().justSelected:""),onClick:()=>l(e),children:(0,o.jsx)("div",{className:k().methodContent,children:(0,o.jsxs)("div",{className:k().methodHeader,children:[(0,o.jsxs)("div",{className:k().radioButton,children:[(0,o.jsx)("input",{type:"radio",name:"shipping_method",checked:a,onChange:()=>l(e),className:k().radioInput}),(0,o.jsx)("span",{className:k().radioMark})]}),(0,o.jsxs)("div",{className:k().methodInfo,children:[(0,o.jsx)("div",{className:k().methodName,children:e.name}),(0,o.jsx)("div",{className:k().methodDescription,children:e.description})]}),(0,o.jsxs)("div",{className:k().methodPricing,children:[(0,o.jsx)("div",{className:k().methodPrice,children:u(e.cost)}),(0,o.jsx)("div",{className:k().deliveryTime,children:m(e)})]})]})})},e.id)})}),"      ",n.shipping_method&&(0,o.jsx)("div",{className:k().errorMessage,children:n.shipping_method}),"      ",(0,o.jsxs)("div",{className:k().shippingInfo,children:[(0,o.jsx)("div",{className:k().infoIcon,children:"ℹ️"}),(0,o.jsx)("div",{className:k().infoText,children:i("checkout.shipping.info")})]})]})}var N=s(8601),I=s.n(N);function C(e){let{checkoutData:t,updateCheckoutData:s,paymentMethods:a,errors:r,orderSummary:n}=e,{t:i}=(0,h.useI18n)(),c=e=>{s({payment_method:e})};return(0,o.jsxs)("div",{className:I().container,children:[(0,o.jsx)("h2",{className:I().title,children:i("checkout.payment.title")}),(0,o.jsx)("div",{className:I().paymentMethods,children:a.map(e=>{var s,a;return(0,o.jsx)("div",{className:"".concat(I().paymentMethod," ").concat((null==(s=t.payment_method)?void 0:s.id)===e.id?I().selected:""),onClick:()=>c(e),children:(0,o.jsxs)("div",{className:I().methodContent,children:[(0,o.jsxs)("div",{className:I().radioButton,children:[(0,o.jsx)("input",{type:"radio",name:"payment_method",checked:(null==(a=t.payment_method)?void 0:a.id)===e.id,onChange:()=>c(e),className:I().radioInput}),(0,o.jsx)("span",{className:I().radioMark})]}),(0,o.jsx)("div",{className:I().methodIcon,children:e.icon}),(0,o.jsxs)("div",{className:I().methodInfo,children:[(0,o.jsx)("div",{className:I().methodName,children:e.name}),e.description&&(0,o.jsx)("div",{className:I().methodDescription,children:i(e.description)})]})]})},e.id)})}),r.payment_method&&(0,o.jsx)("div",{className:I().errorMessage,children:r.payment_method}),"      ",t.payment_method&&(0,o.jsxs)("div",{className:I().paymentInstructions,children:[(0,o.jsx)("div",{className:I().instructionsIcon,children:"\uD83D\uDD12"}),(0,o.jsx)("div",{className:I().instructionsText,children:i("checkout.payment.instructions")})]}),r.payment_method&&(0,o.jsx)("div",{className:I().errorMessage,children:r.payment_method})]})}var b=s(3792),E=s.n(b);let A=e=>{let{checkoutData:t,orderSummary:s,onPlaceOrder:r,isLoading:n=!1}=e,{t:i}=(0,h.useI18n)(),[c,d]=(0,a.useState)(!1),[l,m]=(0,a.useState)(!1),{customer_info:u,shipping_address:p,shipping_method:_,payment_method:g}=t;return(0,o.jsxs)("div",{className:E().confirmationStep,children:[(0,o.jsx)("h2",{children:i("checkout.confirmation.title")}),(0,o.jsx)("p",{className:E().reviewText,children:i("checkout.confirmation.reviewText")}),(0,o.jsxs)("div",{className:E().confirmationSections,children:["        ",(0,o.jsxs)("div",{className:E().section,children:[(0,o.jsx)("h3",{children:i("checkout.confirmation.customerInfo.title")}),(0,o.jsxs)("div",{className:E().sectionContent,children:[(0,o.jsxs)("p",{children:[(0,o.jsxs)("strong",{children:[i("checkout.confirmation.customerInfo.name"),":"]})," ",null==u?void 0:u.first_name," ",null==u?void 0:u.last_name]}),(0,o.jsxs)("p",{children:[(0,o.jsxs)("strong",{children:[i("checkout.confirmation.customerInfo.email"),":"]})," ",null==u?void 0:u.email]}),(0,o.jsxs)("p",{children:[(0,o.jsxs)("strong",{children:[i("checkout.confirmation.customerInfo.phone"),":"]})," ",null==u?void 0:u.phone]})]})]}),"        ",(0,o.jsxs)("div",{className:E().section,children:[(0,o.jsx)("h3",{children:i("checkout.confirmation.shippingInfo.title")}),(0,o.jsxs)("div",{className:E().sectionContent,children:[(0,o.jsx)("p",{children:(0,o.jsxs)("strong",{children:[i("checkout.confirmation.shippingInfo.address"),":"]})}),(0,o.jsx)("p",{children:(e=>{if(!e)return"";let t=[];return e.street_address&&t.push(e.street_address),e.apartment&&t.push(e.apartment),e.city&&t.push(e.city),e.state&&t.push(e.state),e.postal_code&&t.push(e.postal_code),e.country&&t.push(e.country),t.join(", ")})(p)}),(0,o.jsxs)("p",{children:[(0,o.jsxs)("strong",{children:[i("checkout.confirmation.shippingInfo.method"),":"]})," ",null==_?void 0:_.name]}),(0,o.jsxs)("p",{children:[(0,o.jsxs)("strong",{children:[i("checkout.confirmation.shippingInfo.deliveryTime"),":"]})," ",(null==_?void 0:_.estimated_delivery_min_days)?(e=>1===e?i("checkout.confirmation.deliveryTime.oneDay"):e<=7?i("checkout.confirmation.deliveryTime.days",{days:e}):e<=14?i("checkout.confirmation.deliveryTime.weeks",{weeks:"1-2"}):i("checkout.confirmation.deliveryTime.weeks",{weeks:Math.ceil(e/7)}))(_.estimated_delivery_min_days):"N/A"]}),_&&_.cost>0&&(0,o.jsxs)("p",{children:[(0,o.jsxs)("strong",{children:[i("checkout.confirmation.shippingInfo.cost"),":"]})," $",_.cost.toFixed(2)]})]}),"        "]}),"        ",(0,o.jsxs)("div",{className:E().section,children:[(0,o.jsx)("h3",{children:i("checkout.confirmation.paymentMethod.title")}),(0,o.jsx)("div",{className:E().sectionContent,children:(0,o.jsxs)("div",{className:E().paymentMethod,children:[(0,o.jsxs)("span",{className:E().paymentIcon,children:[(null==g?void 0:g.type)==="card"&&"\uD83D\uDCB3",(null==g?void 0:g.type)==="paypal"&&"\uD83C\uDD7F️",(null==g?void 0:g.type)==="apple_pay"&&"\uD83C\uDF4E",(null==g?void 0:g.type)==="google_pay"&&"\uD83D\uDD0D",(null==g?void 0:g.type)==="bank_transfer"&&"\uD83C\uDFE6"]}),(0,o.jsx)("span",{children:null==g?void 0:g.name})]})})]}),(0,o.jsxs)("div",{className:E().section,children:[(0,o.jsx)("h3",{children:i("checkout.confirmation.orderItems.title")}),(0,o.jsx)("div",{className:E().orderItems,children:s.items.map(e=>(0,o.jsxs)("div",{className:E().orderItem,children:[(0,o.jsxs)("div",{className:E().itemInfo,children:[(0,o.jsx)("h4",{children:e.name}),(0,o.jsxs)("p",{children:[i("checkout.confirmation.orderItems.quantity"),": ",e.quantity]}),e.variant&&(0,o.jsxs)("p",{className:E().variant,children:[i("checkout.confirmation.orderItems.variant"),": ",e.variant]})]}),(0,o.jsxs)("div",{className:E().itemPrice,children:["$",(e.price*e.quantity).toFixed(2)]})]},e.id))})]}),(0,o.jsxs)("div",{className:E().section,children:[(0,o.jsx)("h3",{children:i("checkout.confirmation.orderTotal.title")}),(0,o.jsxs)("div",{className:E().orderTotals,children:[(0,o.jsxs)("div",{className:E().totalLine,children:[(0,o.jsxs)("span",{children:[i("checkout.confirmation.orderTotal.subtotal"),":"]}),(0,o.jsxs)("span",{children:["$",s.subtotal.toFixed(2)]})]}),"            ",s.shipping_cost>0&&(0,o.jsxs)("div",{className:E().totalLine,children:[(0,o.jsxs)("span",{children:[i("checkout.confirmation.orderTotal.shipping"),":"]}),(0,o.jsxs)("span",{children:["$",s.shipping_cost.toFixed(2)]})]}),s.discount_amount>0&&(0,o.jsxs)("div",{className:E().totalLine,children:[(0,o.jsxs)("span",{children:[i("checkout.confirmation.orderTotal.discount"),":"]}),(0,o.jsxs)("span",{children:["-$",s.discount_amount.toFixed(2)]})]}),(0,o.jsxs)("div",{className:"".concat(E().totalLine," ").concat(E().grandTotal),children:[(0,o.jsxs)("span",{children:[i("checkout.confirmation.orderTotal.total"),":"]}),(0,o.jsxs)("span",{children:["$",s.total_amount.toFixed(2)]})]})]})]})]}),(0,o.jsxs)("div",{className:E().terms,children:[(0,o.jsxs)("label",{className:E().termsLabel,children:[(0,o.jsx)("input",{type:"checkbox",checked:c,onChange:e=>{d(e.target.checked),e.target.checked&&m(!1)},required:!0}),(0,o.jsxs)("span",{children:[i("checkout.confirmation.terms.agree")," ",(0,o.jsx)("a",{href:"/terms",target:"_blank",children:i("checkout.confirmation.terms.termsLink")})," ",i("checkout.confirmation.terms.and")," ",(0,o.jsx)("a",{href:"/privacy",target:"_blank",children:i("checkout.confirmation.terms.privacyLink")})]})]}),l&&(0,o.jsx)("div",{className:E().termsError,children:i("checkout.confirmation.terms.error")})]}),(0,o.jsxs)("div",{className:E().placeOrderSection,children:[(0,o.jsx)("button",{type:"button",onClick:()=>{if(console.log("=== PLACE ORDER BUTTON CLICKED ==="),console.log("Terms agreed:",c),console.log("Is loading:",n),!c){console.log("Terms not agreed, showing error"),m(!0);return}console.log("Calling onPlaceOrder..."),r()},disabled:n||!c,className:"".concat(E().placeOrderButton," ").concat(c?"":E().disabled),children:n?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:E().spinner}),i("checkout.confirmation.button.loading")]}):i("checkout.confirmation.button.placeOrder",{amount:s.total_amount.toFixed(2)})}),(0,o.jsx)("p",{className:E().redirectNotice,children:i("checkout.confirmation.redirectNotice")})]}),(0,o.jsx)("div",{className:E().securityNotice,children:(0,o.jsxs)("p",{children:["\uD83D\uDD12 ",i("checkout.confirmation.securityNotice")]})})]})};var R=s(3967),T=s.n(R);let w=e=>{let{orderSummary:t,isLoading:s=!1}=e,{t:a}=(0,h.useI18n)();return(0,o.jsxs)("div",{className:T().orderSummary,children:[(0,o.jsx)("h3",{children:a("checkout.summary.title")}),(0,o.jsx)("div",{className:T().orderItems,children:t.items.map(e=>(0,o.jsxs)("div",{className:T().orderItem,children:["            ",(0,o.jsxs)("div",{className:T().itemImage,children:[e.image?(0,o.jsx)("img",{src:e.image,alt:e.name,onError:e=>{var t;e.currentTarget.style.display="none",null==(t=e.currentTarget.nextElementSibling)||t.classList.add(T().visible)}}):null,(0,o.jsx)("div",{className:"".concat(T().placeholderImage," ").concat(e.image?"":T().visible),children:(0,o.jsx)("span",{children:"\uD83D\uDCE6"})}),(0,o.jsx)("span",{className:T().quantity,children:e.quantity})]}),(0,o.jsxs)("div",{className:T().itemDetails,children:[(0,o.jsx)("h4",{className:T().itemName,children:e.name}),e.variant&&(0,o.jsx)("p",{className:T().itemVariant,children:e.variant}),"              ",(e.color||e.size)&&(0,o.jsxs)("p",{className:T().itemOptions,children:[e.color&&(0,o.jsxs)("span",{className:T().colorOption,children:[e.colorCode&&(0,o.jsx)("span",{className:T().colorCircle,style:{backgroundColor:e.colorCode},title:e.color}),e.color]}),e.size&&(0,o.jsxs)("span",{children:[a("checkout.summary.size"),": ",e.size]})]})]}),(0,o.jsxs)("div",{className:T().itemPrice,children:["$",(e.price*e.quantity).toFixed(2)]})]},e.id))}),"      ",(0,o.jsxs)("div",{className:T().orderTotals,children:[(0,o.jsxs)("div",{className:T().totalLine,children:[(0,o.jsx)("span",{children:a("checkout.summary.subtotal")}),(0,o.jsxs)("span",{children:["$",t.subtotal.toFixed(2)]})]}),t.shipping_cost>0&&(0,o.jsxs)("div",{className:T().totalLine,children:[(0,o.jsx)("span",{children:a("checkout.summary.shipping")}),(0,o.jsxs)("span",{children:["$",t.shipping_cost.toFixed(2)]})]}),t.discount_amount>0&&(0,o.jsxs)("div",{className:T().totalLine,children:[(0,o.jsx)("span",{children:a("checkout.summary.discount")}),(0,o.jsxs)("span",{className:T().discountAmount,children:["-$",t.discount_amount.toFixed(2)]})]}),(0,o.jsxs)("div",{className:"".concat(T().totalLine," ").concat(T().grandTotal),children:[(0,o.jsx)("span",{children:a("checkout.summary.total")}),(0,o.jsxs)("span",{children:["$",t.total_amount.toFixed(2)]})]})]}),"      ",(0,o.jsxs)("div",{className:T().securityBadges,children:[(0,o.jsxs)("div",{className:T().badge,children:[(0,o.jsx)("span",{className:T().badgeIcon,children:"\uD83D\uDD12"}),(0,o.jsx)("span",{children:a("checkout.secureCheckout")})]}),(0,o.jsxs)("div",{className:T().badge,children:[(0,o.jsx)("span",{className:T().badgeIcon,children:"\uD83D\uDE9A"}),(0,o.jsx)("span",{children:a("checkout.summary.freeReturns")})]}),(0,o.jsxs)("div",{className:T().badge,children:[(0,o.jsx)("span",{className:T().badgeIcon,children:"\uD83D\uDCDE"}),(0,o.jsx)("span",{children:a("checkout.summary.support")})]})]}),"      ",s&&(0,o.jsxs)("div",{className:T().loadingOverlay,children:[(0,o.jsx)("div",{className:T().spinner}),(0,o.jsx)("p",{children:a("checkout.summary.updating")})]})]})};var O=s(1230),D=s.n(O);function P(e){let{steps:t,currentStep:s,onStepClick:a}=e,{t:r}=(0,h.useI18n)();return(0,o.jsx)("div",{className:D().stepsContainer,children:(0,o.jsx)("div",{className:D().steps,children:t.map((e,n)=>(0,o.jsxs)("div",{className:"".concat(D().step," ").concat(e.completed?D().completed:""," ").concat(e.current?D().current:""," ").concat(!1===e.accessible?D().disabled:""),onClick:()=>{(!1!==e.accessible||e.id<=s)&&a(e.id)},style:{cursor:!1===e.accessible&&e.id>s?"not-allowed":"pointer",opacity:!1===e.accessible&&e.id>s?.5:1},children:[(0,o.jsx)("div",{className:D().stepNumber,children:e.completed?(0,o.jsx)("span",{className:D().checkmark,children:"✓"}):(0,o.jsx)("span",{children:e.id})}),(0,o.jsx)("div",{className:D().stepLabel,children:r(e.title)}),n<t.length-1&&(0,o.jsx)("div",{className:"".concat(D().connector," ").concat(e.completed?D().connectorCompleted:"")})]},e.id))})})}function L(){let{t:e}=(0,h.useI18n)(),t=(0,n.useRouter)(),s=(0,r.wA)(),g=(0,n.useSearchParams)(),{items:v,cartId:y}=(0,r.d4)(e=>e.cart),{user:j,isAuthenticated:k}=(0,r.d4)(e=>e.auth),[N,I]=(0,a.useState)(!1),[b,E]=(0,a.useState)(null),[R,T]=(0,a.useState)(null),[O,D]=(0,a.useState)(!1),[L,F]=(0,a.useState)([]),[B,U]=(0,a.useState)(!1),[M,q]=(0,a.useState)(!1),[z,G]=(0,a.useState)(null);(0,a.useEffect)(()=>{D(!0)},[]),(0,a.useEffect)(()=>{if(O&&g)if("true"===g.get("buyNow")){I(!0),E({id:parseInt(g.get("productId")||"0"),name:g.get("productName")||"",slug:g.get("productSlug")||"",price:parseFloat(g.get("price")||"0"),quantity:parseInt(g.get("quantity")||"1"),variantId:g.get("variantId")?parseInt(g.get("variantId")):void 0,image:g.get("image")||"",color:g.get("color")||void 0,colorCode:g.get("colorCode")||void 0,size:g.get("size")||void 0});let e=g.get("buyNowLink");console.log("Buy Now Link from URL params:",e),T(e)}else 0===v.length&&t.push("/cart")},[O,g,v,t]);let[H,X]=(0,a.useState)(1),[K,W]=(0,a.useState)(c),[Q,Z]=(0,a.useState)(!1),[Y,J]=(0,a.useState)({}),[V,$]=(0,a.useState)({customer_info:{first_name:"",last_name:"",email:"",phone:""},shipping_address:{street_address:"",apartment:"",city:"",state:"",postal_code:"",country:"BY"},save_address:!1,shipping_method:null,payment_method:null,customer_notes:""}),[ee,et]=(0,a.useState)([{id:1,name:e("checkout.shipping.standardShipping"),description:e("checkout.shipping.standardDescription"),cost:10,estimated_delivery_min_days:5,estimated_delivery_max_days:14,is_active:!0}]);(0,a.useEffect)(()=>{k&&j&&O&&$(e=>({...e,customer_info:{...e.customer_info,first_name:j.first_name||"",last_name:j.last_name||"",email:j.email||"",phone:j.phone_number||""}}))},[k,j,O]),(0,a.useEffect)(()=>{O&&$(e=>{let t={};return(e.shipping_method||1!==ee.length||(t.shipping_method=ee[0]),e.payment_method||1!==d.length||(t.payment_method=d[0]),Object.keys(t).length>0)?{...e,...t}:e})},[O,ee]);let es=async()=>{if(k&&j){U(!0);try{let e=localStorage.getItem("access_token");if(e){let t=await m(e),s=Array.isArray(t)?t:[];F(s)}}catch(e){console.error("Failed to load user addresses:",e),F([])}finally{U(!1)}}};(0,a.useEffect)(()=>{k&&j&&O&&es()},[k,j,O]);let eo=(()=>{var e;let t=N&&b?[b]:v,s=t.reduce((e,t)=>e+t.price*t.quantity,0),o=(null==(e=V.shipping_method)?void 0:e.cost)||0;return{subtotal:s,shipping_cost:o,tax_amount:0,discount_amount:0,total_amount:s+o-0,items:t.map((e,t)=>({id:t+1,product_id:e.id,variant_id:e.variantId,name:e.name,price:e.price,quantity:e.quantity,image:e.image,color:e.color,colorCode:e.colorCode,size:e.size,variant:e.variantId?"".concat(e.color||""," ").concat(e.size||"").trim():void 0}))}})(),ea=(0,a.useCallback)(t=>{let s={};switch(t){case 1:V.customer_info.first_name||(s.first_name=e("checkout.validation.firstNameRequired")),V.customer_info.last_name||(s.last_name=e("checkout.validation.lastNameRequired")),V.customer_info.email||(s.email=e("checkout.validation.emailRequired")),V.shipping_address.street_address||(s.street_address=e("checkout.validation.addressRequired")),V.shipping_address.city||(s.city=e("checkout.validation.cityRequired")),V.shipping_address.postal_code||(s.postal_code=e("checkout.validation.postalCodeRequired"));break;case 2:V.shipping_method||(s.shipping_method=e("checkout.validation.shippingMethodRequired"));break;case 3:V.payment_method||(s.payment_method=e("checkout.validation.paymentMethodRequired"))}return 0===Object.keys(s).length},[V]),er=(0,a.useCallback)(e=>{for(let t=1;t<e;t++)if(!ea(t))return!1;return!0},[ea]),en=(0,a.useCallback)(e=>{W(t=>t.map((t,s)=>{let o=s+1,a=o<e,r=o===e,n=1===o;return o>1&&(n=er(o)),{...t,completed:a,current:r,accessible:n}}))},[er]);(0,a.useEffect)(()=>{O&&en(H)},[V.customer_info,V.shipping_address,V.shipping_method,V.payment_method,H,O,en]);let ei=()=>{H<4&&X(H+1)},ec=()=>{H>1&&X(H-1)},ed=e=>{$(t=>({...t,...e}))},el=()=>{let t=ea(H);if(!t){let t={};switch(H){case 1:V.customer_info.first_name||(t.first_name=e("checkout.validation.firstNameRequired")),V.customer_info.last_name||(t.last_name=e("checkout.validation.lastNameRequired")),V.customer_info.email||(t.email=e("checkout.validation.emailRequired")),V.shipping_address.street_address||(t.street_address=e("checkout.validation.addressRequired")),V.shipping_address.city||(t.city=e("checkout.validation.cityRequired")),V.shipping_address.postal_code||(t.postal_code=e("checkout.validation.postalCodeRequired"));break;case 2:V.shipping_method||(t.shipping_method=e("checkout.validation.shippingMethodRequired"));break;case 3:V.payment_method||(t.payment_method=e("checkout.validation.paymentMethodRequired"))}J(t)}return t},em=async()=>{if(k&&j&&!M&&V.shipping_address.street_address&&V.shipping_address.city&&V.shipping_address.postal_code&&V.customer_info.first_name&&V.customer_info.last_name){q(!0);try{let e=localStorage.getItem("access_token");if(e){let t=Array.isArray(L)?L:[];if(!t.find(e=>e.street_address===V.shipping_address.street_address&&e.city===V.shipping_address.city&&e.postal_code===V.shipping_address.postal_code)){let s={address_type:"shipping",recipient_name:"".concat(V.customer_info.first_name," ").concat(V.customer_info.last_name).trim(),street_address:V.shipping_address.street_address,address_line_2:V.shipping_address.apartment||void 0,city:V.shipping_address.city,state_province:V.shipping_address.state||"",postal_code:V.shipping_address.postal_code,country_code:V.shipping_address.country,phone_number:V.customer_info.phone||void 0,is_default_shipping:0===t.length,is_default_billing:0===t.length},o=await l(s,e);F(e=>[...Array.isArray(e)?e:[],o])}}}catch(e){console.error("Failed to auto-save address:",e)}finally{q(!1)}}},eu=async t=>{if(confirm(e("checkout.confirmations.deleteAddress")))try{let e=localStorage.getItem("access_token");e&&(await u(t,e),F(e=>e.filter(e=>e.id!==t)),z===t&&G(null))}catch(e){console.error("Failed to delete address:",e)}},ep=async()=>{Z(!0),console.log("=== ORDER SUBMISSION STARTED ==="),console.log("Current step:",H),console.log("Cart ID:",y),console.log("Selected Address ID:",z),console.log("Is authenticated:",k),console.log("User:",j),console.log("Checkout data:",V),console.log("Is buy now flow:",N);try{var t,o;let e=z,a=null;if(k&&!z){console.log("Creating address for order (save_address=",V.save_address,")");try{let t=localStorage.getItem("access_token");if(t){let s={address_type:"shipping",recipient_name:"".concat(V.customer_info.first_name," ").concat(V.customer_info.last_name).trim(),street_address:V.shipping_address.street_address,address_line_2:V.shipping_address.apartment||void 0,city:V.shipping_address.city,state_province:V.shipping_address.state||"",postal_code:V.shipping_address.postal_code,country_code:V.shipping_address.country,phone_number:V.customer_info.phone||void 0,is_default_shipping:V.save_address,is_default_billing:V.save_address};console.log("Address data to save:",s);let o=await l(s,t);e=o.id,console.log("Address saved successfully:",o)}else throw Error("Authentication token not found")}catch(e){throw console.error("Failed to save address:",e),Error("Failed to save shipping address: "+(e instanceof Error?e.message:"Unknown error"))}}else z&&(console.log("Using existing selected address:",z),e=z);if(N&&b){if(console.log("=== BUY NOW FLOW - CREATING DIRECT ORDER ==="),console.log("Buy now product:",b),!e)throw console.log("=== ERROR: NO ADDRESS ID ==="),Error("Shipping address is required. Please ensure address is saved or selected.");let s=localStorage.getItem("access_token");if(!s)throw console.log("=== ERROR: NO AUTH TOKEN ==="),Error("Authentication required");let o={product_id:b.id,quantity:b.quantity||1,shipping_address_id:e,billing_address_id:e,shipping_method_id:(null==(t=V.shipping_method)?void 0:t.id)||1,customer_notes:V.customer_notes||""};b.variantId&&(o.product_variant_id=b.variantId),b.color&&(o.color=b.color),b.colorCode&&(o.color_code=b.colorCode),b.size&&(o.size=b.size),console.log("=== SENDING DIRECT ORDER CREATION REQUEST ==="),console.log("Direct order data:",o),a=await (0,p.mK)(o,s),console.log("=== DIRECT ORDER CREATED SUCCESSFULLY ==="),console.log("Created order:",a)}else{console.log("=== REGULAR CHECKOUT FLOW - PROCEEDING WITH ORDER CREATION ===");let t=y;if(!t){console.log("=== NO CART ID - CREATING TEMPORARY CART FOR SINGLE ITEM ===");let e=N&&b?[b]:v;if(0===e.length)throw Error("No items to order. Please add items to cart first.");console.log("Items to add to cart:",e);let s=await (0,_.zA)();if(!s)throw Error("Failed to create cart for order");for(let o of(t=s.cart_id,console.log("✓ Temporary cart created:",t),e)){let e={drop_product:o.dropProductId,product_variant:o.variantId,quantity:o.quantity,color:o.color,color_code:o.colorCode,size:o.size};if(console.log("Adding item to cart:",e),!await (0,_.r5)(t,e))throw Error("Failed to add ".concat(o.name," to cart"))}console.log("✓ All items added to temporary cart")}if(!t)throw console.log("=== ERROR: NO CART ID AVAILABLE ==="),Error("Cart ID not available. Please refresh and try again.");if(console.log("✓ Cart ID available:",t),!e)throw console.log("=== ERROR: NO ADDRESS ID ==="),Error("Shipping address is required. Please ensure address is saved or selected.");console.log("✓ Address ID available:",e);let r=localStorage.getItem("access_token");if(!r)throw console.log("=== ERROR: NO AUTH TOKEN ==="),Error("Authentication required");console.log("✓ Auth token available"),console.log("=== CREATING ORDER ===");let n={cart_id:t,shipping_address_id:e,billing_address_id:e,shipping_method_id:(null==(o=V.shipping_method)?void 0:o.id)||1,customer_notes:V.customer_notes||""};console.log("=== SENDING ORDER CREATION REQUEST ==="),console.log("Order data:",n),a=await (0,p.fS)(n,r),console.log("=== ORDER CREATED SUCCESSFULLY ==="),console.log("Created order:",a),s((0,i.sX)())}console.log("=== REDIRECTING TO PAYMENT ==="),console.log("isBuyNowFlow:",N),console.log("buyNowProduct:",b),console.log("buyNowLink:",R),console.log("buyNowLink type:",typeof R),console.log("buyNowLink length:",R?R.length:"null/undefined");let r="";N&&b?R?(console.log("Using product buy now link from URL params:",R),r=R):(console.log("No buy_now_link found, using generic payment gateway"),r="https://payment.gateway.com/pay?amount=".concat(eo.total_amount.toFixed(2),"&currency=USD&orderid=").concat(a.id,"&returnUrl=").concat(encodeURIComponent(window.location.origin+"/payment-result?status=success&orderid="+a.id),"&cancelUrl=").concat(encodeURIComponent(window.location.origin+"/payment-result?status=cancelled&orderid="+a.id))):(console.log("Regular checkout flow, using generic payment gateway"),r="https://payment.gateway.com/pay?amount=".concat(eo.total_amount.toFixed(2),"&currency=USD&orderid=").concat(a.id,"&returnUrl=").concat(encodeURIComponent(window.location.origin+"/payment-result?status=success&orderid="+a.id),"&cancelUrl=").concat(encodeURIComponent(window.location.origin+"/payment-result?status=cancelled&orderid="+a.id))),console.log("Final payment URL:",r),window.location.href=r}catch(t){console.error("=== ORDER SUBMISSION FAILED ==="),console.error("Error:",t),console.error("Error message:",t instanceof Error?t.message:"Unknown error"),console.error("Error stack:",t instanceof Error?t.stack:"No stack trace"),J({submit:e("checkout.error.orderSubmissionFailed")+": "+(t instanceof Error?t.message:"Unknown error")})}finally{Z(!1)}};return O?N||0!==v.length?N&&!b?(0,o.jsxs)("div",{className:f().emptyCart,children:[(0,o.jsx)("h2",{children:e("checkout.error.title")}),(0,o.jsx)("p",{children:e("checkout.error.productLoadFailed")})]}):(0,o.jsx)("div",{className:f().checkoutPage,children:(0,o.jsxs)("div",{className:f().container,children:[(0,o.jsxs)("div",{className:f().header,children:[(0,o.jsx)("h1",{className:f().title,children:e("checkout.title")}),(0,o.jsx)(P,{steps:K,currentStep:H,onStepClick:e=>{let t=K.find(t=>t.id===e);(e<=H||t&&t.accessible)&&X(e)}})]}),(0,o.jsxs)("div",{className:f().content,children:[(0,o.jsxs)("div",{className:f().mainContent,children:["            ",1===H&&(0,o.jsx)(x,{checkoutData:V,updateCheckoutData:ed,errors:Y,isAuthenticated:k,userAddresses:L,isLoadingAddresses:B,autoSaveInProgress:M,onLoadSavedAddress:e=>{G(e.id),$(t=>({...t,shipping_address:{street_address:e.street_address,apartment:e.address_line_2||"",city:e.city,state:e.state_province,postal_code:e.postal_code,country:e.country_code}}))},onDeleteAddress:eu,selectedAddressId:z}),2===H&&(0,o.jsx)(S,{checkoutData:V,updateCheckoutData:ed,shippingMethods:ee,errors:Y}),3===H&&(0,o.jsx)(C,{checkoutData:V,updateCheckoutData:ed,paymentMethods:d,errors:Y,orderSummary:eo}),"            ",4===H&&(0,o.jsx)(A,{checkoutData:V,orderSummary:eo,onPlaceOrder:ep,isLoading:Q}),"            ",H<4&&(0,o.jsxs)("div",{className:f().navigation,children:[H>1&&(0,o.jsx)("button",{type:"button",onClick:ec,className:f().backButton,disabled:Q,children:e("checkout.navigation.back")}),(0,o.jsx)("button",{type:"button",onClick:()=>{console.log("=== HANDLE CONTINUE CLICKED ==="),console.log("Current step:",H),console.log("Validation result:",el()),el()?1===H?(console.log("Step 1: Auto-saving address and moving to next step"),em().then(()=>{ei()})):4===H?(console.log("Step 4: Starting order submission"),ep()):(console.log("Step ".concat(H,": Moving to next step")),ei()):console.log("Validation failed, errors:",Y)},className:f().continueButton,disabled:Q,children:Q?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:f().spinner}),e("checkout.navigation.processing")]}):e("checkout.navigation.continue")})]}),4===H&&(0,o.jsx)("div",{className:f().navigation,children:(0,o.jsx)("button",{type:"button",onClick:ec,className:f().backButton,disabled:Q,children:e("checkout.navigation.back")})}),Y.submit&&(0,o.jsx)("div",{className:f().errorMessage,children:Y.submit})]}),"          ",(0,o.jsx)("div",{className:f().sidebar,children:(0,o.jsx)(w,{orderSummary:eo,isLoading:Q})})]})]})}):(0,o.jsxs)("div",{className:f().emptyCart,children:[(0,o.jsx)("h2",{children:e("checkout.emptyCart.title")}),(0,o.jsx)("p",{children:e("checkout.emptyCart.message")})]}):(0,o.jsx)("div",{className:f().checkoutPage,children:(0,o.jsx)("div",{className:f().container,children:(0,o.jsx)("div",{className:f().header,children:(0,o.jsx)("h1",{className:f().title,children:e("checkout.loading")})})})})}},5695:(e,t,s)=>{"use strict";var o=s(8999);s.o(o,"useParams")&&s.d(t,{useParams:function(){return o.useParams}}),s.o(o,"usePathname")&&s.d(t,{usePathname:function(){return o.usePathname}}),s.o(o,"useRouter")&&s.d(t,{useRouter:function(){return o.useRouter}}),s.o(o,"useSearchParams")&&s.d(t,{useSearchParams:function(){return o.useSearchParams}})},7251:e=>{e.exports={container:"ShippingStep_container__QMpiE",title:"ShippingStep_title__ksTdl",shippingMethods:"ShippingStep_shippingMethods__PjLD7",shippingMethod:"ShippingStep_shippingMethod__ZTGI0",selected:"ShippingStep_selected__XZqLS",justSelected:"ShippingStep_justSelected__G6_tI",selectionPulse:"ShippingStep_selectionPulse__PSyfm",methodContent:"ShippingStep_methodContent__hJEbt",methodHeader:"ShippingStep_methodHeader__gfSZM",radioButton:"ShippingStep_radioButton__7KUXs",radioInput:"ShippingStep_radioInput___w_H5",radioMark:"ShippingStep_radioMark__Q6CEV",methodInfo:"ShippingStep_methodInfo__EFHe9",methodName:"ShippingStep_methodName__7BPwI",methodDescription:"ShippingStep_methodDescription__nYfEj",methodPricing:"ShippingStep_methodPricing__kRCjU",methodPrice:"ShippingStep_methodPrice__mmFw8",deliveryTime:"ShippingStep_deliveryTime__OFKX9",freeShipping:"ShippingStep_freeShipping__m7GzQ",errorMessage:"ShippingStep_errorMessage__Naa1j",shippingInfo:"ShippingStep_shippingInfo__HUiIW",infoIcon:"ShippingStep_infoIcon__yD5e3",infoText:"ShippingStep_infoText__dmHLJ",fadeInUp:"ShippingStep_fadeInUp__c4v5w"}},8334:e=>{e.exports={checkoutPage:"checkout_checkoutPage__Oxt8U",container:"checkout_container__GDzOa",header:"checkout_header__ZlUxF",title:"checkout_title___IbnB",content:"checkout_content__zllQ3",mainContent:"checkout_mainContent__ecFbb",sidebar:"checkout_sidebar__7IEP5",navigation:"checkout_navigation__t7G5u",backButton:"checkout_backButton__ZIt2k",continueButton:"checkout_continueButton__jkgBp",spinner:"checkout_spinner__5GGpM",spin:"checkout_spin__sL5rA",errorMessage:"checkout_errorMessage__WSOsj",emptyCart:"checkout_emptyCart__aTX89"}},8601:e=>{e.exports={container:"PaymentStep_container__1zxh8",title:"PaymentStep_title__gFgXC",paymentMethods:"PaymentStep_paymentMethods__1tkZm",paymentMethod:"PaymentStep_paymentMethod__a697r",selected:"PaymentStep_selected__OUj_V",radioButton:"PaymentStep_radioButton__EuoBj",methodContent:"PaymentStep_methodContent__BUTEF",methodIcon:"PaymentStep_methodIcon__r4F5I",methodInfo:"PaymentStep_methodInfo__IKeMb",methodName:"PaymentStep_methodName__CMpbX",methodDescription:"PaymentStep_methodDescription__cXbKx",cardForm:"PaymentStep_cardForm__YQ8mr",formGrid:"PaymentStep_formGrid__UX0_T",formGroup:"PaymentStep_formGroup__D1DFH",fullWidth:"PaymentStep_fullWidth__XOKDH",label:"PaymentStep_label__wZfTx",input:"PaymentStep_input__GXtae",error:"PaymentStep_error___BxeO",errorMessage:"PaymentStep_errorMessage__fzSBu",cardIcons:"PaymentStep_cardIcons__1sGzT",cardIcon:"PaymentStep_cardIcon__rcgEL",securityInfo:"PaymentStep_securityInfo__ubUzw",paymentInstructions:"PaymentStep_paymentInstructions__KsXNK",instructionsIcon:"PaymentStep_instructionsIcon__p_kFS",instructionsText:"PaymentStep_instructionsText__KAPr3",instructionsList:"PaymentStep_instructionsList__vFe4L",saveCard:"PaymentStep_saveCard__KpKdh",checkbox:"PaymentStep_checkbox__6EAy7",checkboxLabel:"PaymentStep_checkboxLabel__UGlsR",orderTotal:"PaymentStep_orderTotal__Yqzld",paymentStep:"PaymentStep_paymentStep__hm056"}},9295:e=>{e.exports={customerInformation:"CustomerInformation_customerInformation__QokeJ",formSection:"CustomerInformation_formSection__xvxrw",sectionTitle:"CustomerInformation_sectionTitle__E38lE",formGrid:"CustomerInformation_formGrid__vES41",formGroup:"CustomerInformation_formGroup__0oSia",fullWidth:"CustomerInformation_fullWidth__O3ChX",label:"CustomerInformation_label__95u6D",required:"CustomerInformation_required__3E3P5",input:"CustomerInformation_input__FUsoQ",error:"CustomerInformation_error__d6HXA",select:"CustomerInformation_select__jvWgj",errorMessage:"CustomerInformation_errorMessage__vT0_X",checkboxGroup:"CustomerInformation_checkboxGroup__ob8w_",checkbox:"CustomerInformation_checkbox__PBNHe",checkboxLabel:"CustomerInformation_checkboxLabel__Eqz7J",billingSection:"CustomerInformation_billingSection__U_mnB",hidden:"CustomerInformation_hidden__8ZMXW",autoSaveStatus:"CustomerInformation_autoSaveStatus__S29Cr",savedAddressesSection:"CustomerInformation_savedAddressesSection__LwVDW",savedAddressesTitle:"CustomerInformation_savedAddressesTitle__PVDuR",loadingAddresses:"CustomerInformation_loadingAddresses__CwToM",savedAddressesList:"CustomerInformation_savedAddressesList__KeDhO",savedAddressItem:"CustomerInformation_savedAddressItem__TyGPd",savedAddressInfo:"CustomerInformation_savedAddressInfo__kIZtl",savedAddressName:"CustomerInformation_savedAddressName__6lCRz",savedAddressText:"CustomerInformation_savedAddressText__DfR5j",useSavedAddressBtn:"CustomerInformation_useSavedAddressBtn__YlWIs",selectedAddress:"CustomerInformation_selectedAddress__H92fm",defaultBadge:"CustomerInformation_defaultBadge__onXPp",savedAddressActions:"CustomerInformation_savedAddressActions__r6ZKp",deleteSavedAddressBtn:"CustomerInformation_deleteSavedAddressBtn__IAtZn",addNewAddressBtn:"CustomerInformation_addNewAddressBtn__uONzO",selectedAddressDisplay:"CustomerInformation_selectedAddressDisplay__7Lm9E",selectedAddressHeader:"CustomerInformation_selectedAddressHeader__nX7yI",selectedAddressTitle:"CustomerInformation_selectedAddressTitle__wEhkD",selectedAddressDetails:"CustomerInformation_selectedAddressDetails__HxX9k",selectedAddressRow:"CustomerInformation_selectedAddressRow__9o803",addressFormHeader:"CustomerInformation_addressFormHeader___RnQ8",addressModeNote:"CustomerInformation_addressModeNote__aIzfk"}},9493:(e,t,s)=>{"use strict";s.d(t,{FK:()=>a,It:()=>n,N4:()=>c,fS:()=>r,mK:()=>u,p:()=>i,u:()=>d});let o="http://localhost:8000/api/v1";async function a(e,t){let s=new URL("".concat(o,"/orders/"));t&&(t.status&&"all"!==t.status&&s.searchParams.append("status",t.status),t.ordering&&s.searchParams.append("ordering",t.ordering),t.page&&s.searchParams.append("page",t.page.toString()),t.page_size&&s.searchParams.append("page_size",t.page_size.toString()));let a=await fetch(s.toString(),{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!a.ok){if(401===a.status)throw Error("Unauthorized - please log in again");throw Error("Failed to fetch orders: ".concat(a.statusText))}let r=await a.json();return{...r,results:r.results.map(m)}}async function r(e,t){console.log("=== CREATE ORDER API CALLED ==="),console.log("API URL:","".concat(o,"/orders/create/")),console.log("Order data:",e),console.log("Token available:",!!t);let s=await fetch("".concat(o,"/orders/create/"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log("=== CREATE ORDER RESPONSE ==="),console.log("Status:",s.status),console.log("Status text:",s.statusText),console.log("Response OK:",s.ok),!s.ok){let e=await s.json();throw console.error("=== CREATE ORDER ERROR RESPONSE ==="),console.error("Error data:",e),Error(e.message||"Failed to create order")}let a=await s.json();console.log("=== CREATE ORDER SUCCESS ==="),console.log("Backend order response:",a);let r=m(a);return console.log("Transformed order:",r),r}async function n(e,t,s){let a={"Content-Type":"application/json"};s&&(a.Authorization="Bearer ".concat(s));let r=await fetch("".concat(o,"/orders/payment-callback/"),{method:"POST",headers:a,body:JSON.stringify({uid:e,status:"paid"===t?"success":"failed"})});if(!r.ok)throw Error((await r.json()).message||"Failed to update order payment status");if((await r.json()).success&&s)return i(String(e),s);throw Error("Payment status update failed")}async function i(e,t){let s=await fetch("".concat(o,"/orders/").concat(e,"/"),{method:"GET",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!s.ok){if(401===s.status)throw Error("Unauthorized - please log in again");if(404===s.status)throw Error("Order not found");throw Error("Failed to fetch order: ".concat(s.statusText))}return m(await s.json())}async function c(e,t){let s=await fetch("".concat(o,"/orders/").concat(e,"/cancel/"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!s.ok){if(401===s.status)throw Error("Unauthorized - please log in again");if(404===s.status)throw Error("Order not found");if(400===s.status)throw Error((await s.json()).detail||"Cannot cancel this order");throw Error("Failed to cancel order: ".concat(s.statusText))}return m(await s.json())}async function d(e,t){let s=await fetch("".concat(o,"/orders/").concat(e,"/reorder/"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!s.ok){if(401===s.status)throw Error("Unauthorized - please log in again");if(404===s.status)throw Error("Order not found");if(400===s.status)throw Error((await s.json()).detail||"Cannot reorder these items");throw Error("Failed to reorder items: ".concat(s.statusText))}return s.json()}function l(e){return{id:e.id,product_id:e.product_id,variant_id:e.variant_id,product_name:e.product_name,variant_name:e.variant_name,product_image:e.product_image,product_slug:e.product_slug,price:e.price,quantity:e.quantity,color:e.color,size:e.size,subtotal:e.subtotal,sku_snapshot:e.sku_snapshot,name:e.product_name,image:e.product_image||"/placeholder-product.png",variant:e.variant_name}}function m(e){var t,s,o,a,r,n;console.log("Transforming backend order:",e);let i=e.shipping_address_details||e.shipping_address||{};return console.log("Shipping address details:",i),console.log("User fields from backend:",{user_first_name:e.user_first_name,user_last_name:e.user_last_name,user_email:e.user_email,user_phone:e.user_phone,email_for_guest:e.email_for_guest}),{id:e.order_id||e.id,order_number:e.order_number,status:({pending_payment:"pending",processing:"processing",shipped:"shipped",delivered:"delivered",cancelled:"cancelled",refunded:"cancelled",failed:"cancelled"})[e.order_status]||"pending",payment_status:({pending:"pending",paid:"paid",failed:"failed",refunded_partial:"refunded",refunded_full:"refunded"})[e.payment_status]||"pending",created_at:e.created_at,updated_at:e.updated_at,total_amount:e.total_amount,shipping_cost:e.shipping_cost,discount_amount:e.discount_amount,subtotal_amount:e.subtotal_amount,items:(null==(t=e.items)?void 0:t.map(l))||[],shipping_address:{first_name:(null==(s=i.recipient_name)?void 0:s.split(" ")[0])||i.first_name||"",last_name:(null==(o=i.recipient_name)?void 0:o.split(" ").slice(1).join(" "))||i.last_name||"",street_address:i.street_address||i.address_line_1||"",city:i.city||"",state:i.state_province||i.state||i.region||"",postal_code:i.postal_code||i.zip_code||"",country:i.country_code||i.country||"",phone:i.phone_number||i.phone||""},shipping_method:(null==(a=e.shipping_method_details)?void 0:a.name)||e.shipping_method||"Standard",shipping_method_details:e.shipping_method_details,tracking_number:e.tracking_number,estimated_delivery:e.estimated_delivery,customer_info:{first_name:e.user_first_name||(null==(r=i.recipient_name)?void 0:r.split(" ")[0])||"",last_name:e.user_last_name||(null==(n=i.recipient_name)?void 0:n.split(" ").slice(1).join(" "))||"",email:e.user_email||e.email_for_guest||"",phone:e.user_phone||i.phone_number||""}}}async function u(e,t){console.log("=== CREATE DIRECT ORDER API CALLED ==="),console.log("API URL:","".concat(o,"/orders/create-direct/")),console.log("Order data:",e),console.log("Token available:",!!t);let s={"Content-Type":"application/json"};t&&(s.Authorization="Bearer ".concat(t));let a=await fetch("".concat(o,"/orders/create-direct/"),{method:"POST",headers:s,body:JSON.stringify(e)});if(console.log("=== CREATE DIRECT ORDER RESPONSE ==="),console.log("Status:",a.status),console.log("Status text:",a.statusText),console.log("Response OK:",a.ok),!a.ok){let e=await a.json();throw console.error("=== CREATE DIRECT ORDER ERROR RESPONSE ==="),console.error("Error data:",e),Error(e.message||"Failed to create direct order")}let r=await a.json();console.log("=== CREATE DIRECT ORDER SUCCESS ==="),console.log("Backend order response:",r);let n=m(r);return console.log("Transformed direct order:",n),n}}},e=>{var t=t=>e(e.s=t);e.O(0,[3729,4540,1990,3464,5295,6470,8441,1684,7358],()=>t(1864)),_N_E=e.O()}]);