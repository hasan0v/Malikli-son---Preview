(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6040],{2810:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>m});var a=r(5155),t=r(2115),i=r(4540),n=r(5695),l=r(171),o=r(9493),d=r(4153),c=r.n(d);function m(){var e,s,r,d,m,_;let{t:u}=(0,l.useI18n)(),h=(0,n.useRouter)(),p=(0,n.useParams)(),{isAuthenticated:x,user:N}=(0,i.d4)(e=>e.auth),[j,v]=(0,t.useState)(null),[D,g]=(0,t.useState)(!0),[f,I]=(0,t.useState)(null),[y,k]=(0,t.useState)(!1),b=null==p?void 0:p.id;(0,t.useEffect)(()=>{(()=>{let e=localStorage.getItem("access_token");if(e&&!x&&!y)return setTimeout(()=>{k(!0)},100);if(!e&&!x){let e=window.location.pathname;h.push("/auth/login?redirect=".concat(encodeURIComponent(e)));return}k(!0)})()},[x,y,h]),(0,t.useEffect)(()=>{let e=async()=>{if(!b||!y){I("Invalid order ID"),g(!1);return}let e=localStorage.getItem("access_token");if(!x&&!e){I("Not authenticated"),g(!1);return}g(!0),I(null);try{let s=e||localStorage.getItem("access_token");if(!s)return void I("No access token found");let r=await (0,o.p)(b,s);console.log("Order data loaded:",r),console.log("Customer info:",r.customer_info),v(r)}catch(e){if(console.error("Failed to load order:",e),e instanceof Error&&(e.message.includes("401")||e.message.includes("Unauthorized"))){localStorage.removeItem("access_token");let e=window.location.pathname;h.push("/auth/login?redirect=".concat(encodeURIComponent(e)));return}I(e instanceof Error?e.message:"Failed to load order")}finally{g(!1)}};y&&b&&e()},[y,b]);let S=e=>"string"==typeof e?parseFloat(e):e,w=e=>S(e).toFixed(2);return y?D?(0,a.jsx)("div",{className:c().orderDetailsPage,children:(0,a.jsx)("div",{className:c().container,children:(0,a.jsxs)("div",{className:c().loadingState,children:[(0,a.jsx)("div",{className:c().spinner}),(0,a.jsx)("p",{children:u("orders.loading")})]})})}):f||!j?(0,a.jsx)("div",{className:c().orderDetailsPage,children:(0,a.jsx)("div",{className:c().container,children:(0,a.jsxs)("div",{className:c().errorState,children:[(0,a.jsx)("h2",{children:u("orders.error.title")}),(0,a.jsx)("p",{children:f||u("orders.error.orderNotFound")}),(0,a.jsx)("button",{onClick:()=>h.push("/orders"),className:c().backButton,children:u("orders.error.backToOrders")})]})})}):(0,a.jsx)("div",{className:c().orderDetailsPage,children:(0,a.jsxs)("div",{className:c().container,children:[(0,a.jsxs)("div",{className:c().header,children:[(0,a.jsxs)("button",{onClick:()=>h.push("/orders"),className:c().backButton,children:["â† ",u("orders.actions.backToOrders")]}),(0,a.jsxs)("div",{className:c().headerContent,children:[(0,a.jsx)("h1",{className:c().orderNumber,children:j.order_number}),(0,a.jsxs)("div",{className:c().orderStatus,children:[(0,a.jsx)("span",{className:c().status,style:{backgroundColor:(e=>{switch(e){case"pending":return"var(--warning-color)";case"confirmed":return"var(--color-info)";case"processing":return"var(--color-primary)";case"shipped":return"var(--color-secondary)";case"delivered":return"var(--color-success)";case"cancelled":return"var(--error-color)";default:return"var(--color-text-secondary)"}})(j.status)},children:u("orders.status.".concat(j.status))}),(0,a.jsx)("span",{className:c().paymentStatus,style:{color:(e=>{switch(e){case"paid":return"var(--color-success)";case"pending":return"var(--warning-color)";case"failed":return"var(--color-error)";case"refunded":return"var(--color-info)";default:return"var(--color-text-secondary)"}})(j.payment_status)},children:u("orders.paymentStatus.".concat(j.payment_status))})]})]})]}),(0,a.jsxs)("div",{className:c().content,children:["          ",(0,a.jsxs)("div",{className:c().section,children:[(0,a.jsx)("h2",{className:c().sectionTitle,children:u("orderDetails.summary.title")}),(0,a.jsxs)("div",{className:c().summaryGrid,children:[(0,a.jsxs)("div",{className:c().summaryItem,children:[(0,a.jsxs)("span",{className:c().label,children:[u("orders.orderDate"),":"]}),(0,a.jsx)("span",{className:c().value,children:new Date(j.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,a.jsxs)("div",{className:c().summaryItem,children:[(0,a.jsxs)("span",{className:c().label,children:[u("orders.total"),":"]}),(0,a.jsxs)("span",{className:c().value,children:["$",w(j.total_amount)]})]})]})]}),(0,a.jsxs)("div",{className:c().section,children:[(0,a.jsx)("h2",{className:c().sectionTitle,children:u("orderDetails.customer.title")}),(0,a.jsxs)("div",{className:c().customerInfo,children:[(0,a.jsxs)("div",{className:c().infoItem,children:[(0,a.jsxs)("span",{className:c().label,children:[u("orderDetails.customer.name"),":"]}),(0,a.jsxs)("span",{className:c().value,children:[(null==(e=j.customer_info)?void 0:e.first_name)||""," ",(null==(s=j.customer_info)?void 0:s.last_name)||"",!(null==(r=j.customer_info)?void 0:r.first_name)&&!(null==(d=j.customer_info)?void 0:d.last_name)&&(0,a.jsx)("span",{className:c().missingInfo,children:"Name not provided"})]})]}),(0,a.jsxs)("div",{className:c().infoItem,children:[(0,a.jsxs)("span",{className:c().label,children:[u("orderDetails.customer.email"),":"]}),(0,a.jsx)("span",{className:c().value,children:(null==(m=j.customer_info)?void 0:m.email)||(0,a.jsx)("span",{className:c().missingInfo,children:"Email not provided"})})]}),(0,a.jsxs)("div",{className:c().infoItem,children:[(0,a.jsxs)("span",{className:c().label,children:[u("orderDetails.customer.phone"),":"]}),(0,a.jsx)("span",{className:c().value,children:(null==(_=j.customer_info)?void 0:_.phone)||(0,a.jsx)("span",{className:c().missingInfo,children:"Phone not provided"})})]})]})]}),(0,a.jsxs)("div",{className:c().section,children:[(0,a.jsx)("h2",{className:c().sectionTitle,children:u("orderDetails.shipping.title")}),(0,a.jsxs)("div",{className:c().shippingInfo,children:[(0,a.jsxs)("div",{className:c().addressInfo,children:[(0,a.jsx)("h3",{children:u("orderDetails.shipping.address")}),(0,a.jsxs)("div",{className:c().address,children:[(0,a.jsx)("p",{children:j.shipping_address.street_address}),(0,a.jsxs)("p",{children:[j.shipping_address.city,", ",j.shipping_address.state]}),(0,a.jsx)("p",{children:j.shipping_address.postal_code})]})]}),j.tracking_number&&(0,a.jsxs)("div",{className:c().trackingInfo,children:[(0,a.jsx)("h3",{children:u("orders.delivery.trackingNumber")}),(0,a.jsxs)("div",{className:c().trackingDetails,children:[(0,a.jsx)("span",{className:c().trackingNumber,children:j.tracking_number}),(0,a.jsx)("button",{className:c().trackButton,onClick:()=>{alert("Track order: ".concat(j.tracking_number))},children:u("orders.delivery.track")})]})]}),j.estimated_delivery&&(0,a.jsxs)("div",{className:c().deliveryInfo,children:[(0,a.jsx)("h3",{children:u("orders.delivery.estimated")}),(0,a.jsx)("p",{children:new Date(j.estimated_delivery).toLocaleDateString()})]})]})]}),(0,a.jsxs)("div",{className:c().section,children:[(0,a.jsx)("h2",{className:c().sectionTitle,children:u("orderDetails.items.title")}),(0,a.jsx)("div",{className:c().itemsList,children:j.items.map(e=>(0,a.jsxs)("div",{className:c().orderItem,children:[(0,a.jsx)("div",{className:c().itemImage,children:(0,a.jsx)("img",{src:e.image,alt:e.name})}),(0,a.jsxs)("div",{className:c().itemDetails,children:[(0,a.jsx)("h4",{className:c().itemName,children:e.name}),(0,a.jsxs)("div",{className:c().itemVariants,children:[e.color&&(0,a.jsxs)("span",{className:c().variant,children:[u("orders.item.color"),": ",e.color]}),e.size&&(0,a.jsxs)("span",{className:c().variant,children:[u("orders.item.size"),": ",e.size]})]}),(0,a.jsxs)("div",{className:c().itemPricing,children:[(0,a.jsxs)("span",{className:c().quantity,children:[u("orders.item.quantity"),": ",e.quantity]}),"                      ",(0,a.jsxs)("span",{className:c().unitPrice,children:["$",w(e.price)," ",u("orderDetails.items.each")]}),(0,a.jsxs)("span",{className:c().totalPrice,children:["$",w(S(e.price)*e.quantity)]})]})]})]},e.id))})]}),(0,a.jsxs)("div",{className:c().section,children:[(0,a.jsx)("h2",{className:c().sectionTitle,children:u("orderDetails.total.title")}),"            ",(0,a.jsxs)("div",{className:c().orderTotal,children:[(0,a.jsxs)("div",{className:c().totalItem,children:[(0,a.jsxs)("span",{className:c().label,children:[u("orderDetails.total.subtotal"),":"]}),(0,a.jsxs)("span",{className:c().value,children:["$",w(S(j.total_amount)-S(j.shipping_cost)+S(j.discount_amount))]})]}),(0,a.jsxs)("div",{className:c().totalItem,children:[(0,a.jsxs)("span",{className:c().label,children:[u("orderDetails.total.shipping"),":"]}),(0,a.jsx)("span",{className:c().value,children:0===S(j.shipping_cost)?u("orderDetails.total.free"):"$".concat(w(j.shipping_cost))})]}),S(j.discount_amount)>0&&(0,a.jsxs)("div",{className:c().totalItem,children:[(0,a.jsxs)("span",{className:c().label,children:[u("orderDetails.total.discount"),":"]}),(0,a.jsxs)("span",{className:c().value,children:["-$",w(j.discount_amount)]})]}),(0,a.jsxs)("div",{className:c().totalItem+" "+c().grandTotal,children:[(0,a.jsxs)("span",{className:c().label,children:[u("orderDetails.total.total"),":"]}),(0,a.jsxs)("span",{className:c().value,children:["$",w(j.total_amount)]})]})]})]}),"          ",(0,a.jsxs)("div",{className:c().actions,children:["            ","pending"===j.payment_status&&"cancelled"!==j.status&&(0,a.jsx)("button",{className:c().retryPaymentButton,onClick:()=>{if(!j)return;let e=parseFloat(j.total_amount||"0"),s="https://payment.gateway.com/pay?amount=".concat(e.toFixed(2),"&currency=EUR&orderid=").concat(j.id,"&returnUrl=").concat(encodeURIComponent(window.location.origin+"/payment-result?status=success&orderid="+j.id),"&cancelUrl=").concat(encodeURIComponent(window.location.origin+"/payment-result?status=cancelled&orderid="+j.id));window.location.href=s},children:u("orders.actions.retryPayment")||"Retry Payment"}),"delivered"===j.status&&(0,a.jsx)("button",{className:c().reorderButton,onClick:()=>{alert("Items added to cart!")},children:u("orders.actions.reorder")}),("pending"===j.status||"confirmed"===j.status)&&(0,a.jsx)("button",{className:c().cancelButton,onClick:()=>{confirm(u("orders.actions.confirmCancel"))&&alert("Order cancelled")},children:u("orders.actions.cancel")}),(0,a.jsx)("button",{className:c().printButton,onClick:()=>window.print(),children:u("orderDetails.actions.print")})]})]})]})}):(0,a.jsx)("div",{className:c().orderDetailsPage,children:(0,a.jsx)("div",{className:c().container,children:(0,a.jsxs)("div",{className:c().loadingState,children:[(0,a.jsx)("div",{className:c().spinner}),(0,a.jsx)("p",{children:"Loading..."})]})})})}},4153:e=>{e.exports={orderDetailsPage:"orderDetails_orderDetailsPage__8xsKV",backgroundShift:"orderDetails_backgroundShift__Z68OD",container:"orderDetails_container__q_ZRG",loadingState:"orderDetails_loadingState__YcIes",errorState:"orderDetails_errorState__oVWwn",fadeInUp:"orderDetails_fadeInUp__k5dG3",spinner:"orderDetails_spinner__cXtDg",spin:"orderDetails_spin__A3bka",pulse:"orderDetails_pulse__s4fE3",header:"orderDetails_header__s5m5H",slideInFromTop:"orderDetails_slideInFromTop__KIsnm",shimmer:"orderDetails_shimmer__jINuf",backButton:"orderDetails_backButton__Y17To",headerContent:"orderDetails_headerContent__L9Gsr",fadeInRight:"orderDetails_fadeInRight__2ObWb",orderNumber:"orderDetails_orderNumber__tHPFC",expandWidth:"orderDetails_expandWidth__ww7nR",orderStatus:"orderDetails_orderStatus__atFwX",status:"orderDetails_status__kCY0s",paymentStatus:"orderDetails_paymentStatus__oSZqz",content:"orderDetails_content__2qOGm",section:"orderDetails_section__l3nqU",sectionTitle:"orderDetails_sectionTitle__SfsmT",slideInFromLeft:"orderDetails_slideInFromLeft___LQsD",summaryGrid:"orderDetails_summaryGrid__m2EFv",summaryItem:"orderDetails_summaryItem__WYEpt",label:"orderDetails_label__yFzGW",value:"orderDetails_value__6hGc_",customerInfo:"orderDetails_customerInfo__iuGWo",infoItem:"orderDetails_infoItem__Z8gmI",missingInfo:"orderDetails_missingInfo__nG1IG",shippingInfo:"orderDetails_shippingInfo___Dpbp",addressInfo:"orderDetails_addressInfo__wEhH7",trackingInfo:"orderDetails_trackingInfo__aHmbx",deliveryInfo:"orderDetails_deliveryInfo__T8RZk",address:"orderDetails_address___39I_",trackingDetails:"orderDetails_trackingDetails__lYWvT",trackingNumber:"orderDetails_trackingNumber__VCkuA",trackButton:"orderDetails_trackButton__E4SKl",itemsList:"orderDetails_itemsList__5snSz",orderItem:"orderDetails_orderItem__PX1in",itemImage:"orderDetails_itemImage__2lCm5",itemDetails:"orderDetails_itemDetails__J0jAM",itemName:"orderDetails_itemName__u8ACM",itemVariants:"orderDetails_itemVariants__0YZk3",variant:"orderDetails_variant__4s2ZY",itemPricing:"orderDetails_itemPricing__hZjEP",quantity:"orderDetails_quantity__R04Iz",unitPrice:"orderDetails_unitPrice__RRYNW",totalPrice:"orderDetails_totalPrice__7BjVS",orderTotal:"orderDetails_orderTotal__HaH6J",totalItem:"orderDetails_totalItem__a697F",grandTotal:"orderDetails_grandTotal__22uV_",actions:"orderDetails_actions__oRBNJ",reorderButton:"orderDetails_reorderButton__RrrG2",cancelButton:"orderDetails_cancelButton__EH3Gj",printButton:"orderDetails_printButton__7AUCe",retryPaymentButton:"orderDetails_retryPaymentButton__UXngL",fadeIn:"orderDetails_fadeIn__oUx5p",slideInUp:"orderDetails_slideInUp__cdNnk",glow:"orderDetails_glow__l5I2N"}},6994:(e,s,r)=>{Promise.resolve().then(r.bind(r,2810))}},e=>{var s=s=>e(e.s=s);e.O(0,[3246,6707,9800,2352,6530,2214,5748,2333,8187,5980,4676,7698,1659,8538,3516,901,9857,8268,4170,7635,9670,7593,6861,5885,7128,6136,9064,3743,5377,1980,7137,1880,4297,2868,4681,4833,6986,9717,6886,7692,6451,6373,8852,8096,7358],()=>s(6994)),_N_E=e.O()}]);