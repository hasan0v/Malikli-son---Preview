(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2796],{264:(s,a,e)=>{Promise.resolve().then(e.bind(e,7641))},2045:(s,a,e)=>{"use strict";e.d(a,{G:()=>o,j:()=>t});var r=e(4540);let t=()=>(0,r.wA)(),o=r.d4},5695:(s,a,e)=>{"use strict";var r=e(8999);e.o(r,"useParams")&&e.d(a,{useParams:function(){return r.useParams}}),e.o(r,"usePathname")&&e.d(a,{usePathname:function(){return r.usePathname}}),e.o(r,"useRouter")&&e.d(a,{useRouter:function(){return r.useRouter}}),e.o(r,"useSearchParams")&&e.d(a,{useSearchParams:function(){return r.useSearchParams}})},5910:s=>{s.exports={authContainer:"auth_authContainer__uW_6b",authCard:"auth_authCard__Ir0GS",authHeader:"auth_authHeader__oHCrb",authTitle:"auth_authTitle__VlD_J",authSubtitle:"auth_authSubtitle__Hjn_W",authForm:"auth_authForm__VDzMx",errorMessage:"auth_errorMessage__bXq6j",successMessage:"auth_successMessage__SdDwc",successIcon:"auth_successIcon__gIoJv",helpText:"auth_helpText__4jxL0",linkButton:"auth_linkButton__3nRC2",inputGroup:"auth_inputGroup__6KdsB",inputLabel:"auth_inputLabel__ugLRU",inputWrapper:"auth_inputWrapper__R6pbg",input:"auth_input__2iiLT",inputIcon:"auth_inputIcon__W7Oq3",passwordToggle:"auth_passwordToggle__uDS6d",checkboxGroup:"auth_checkboxGroup__ybg5C",checkboxLabel:"auth_checkboxLabel__wRPUh",checkbox:"auth_checkbox__b78an",checkboxCustom:"auth_checkboxCustom__zuQto",forgotLink:"auth_forgotLink__4mgFs",submitButton:"auth_submitButton__wgua0",loading:"auth_loading__7pVgz",spinner:"auth_spinner__9RFYX",spin:"auth_spin__6DziB",authFooter:"auth_authFooter__0bLSJ",footerText:"auth_footerText__BmQwI",footerLink:"auth_footerLink__QdQjs",socialDivider:"auth_socialDivider__Fa8_5",dividerText:"auth_dividerText__CL9D0",socialButtons:"auth_socialButtons__PAqk6",socialButton:"auth_socialButton__ZEAbp",redirectInfo:"auth_redirectInfo__F_HcC",redirectActions:"auth_redirectActions__ojM4k",proceedButton:"auth_proceedButton__oUwqa",cancelButton:"auth_cancelButton__fO4QL",formRow:"auth_formRow__SIR7i"}},7641:(s,a,e)=>{"use strict";e.r(a),e.d(a,{default:()=>h});var r=e(5155),t=e(2115),o=e(5695),n=e(6874),u=e.n(n),c=e(2045),l=e(5295),d=e(5910),i=e.n(d);function h(){let{t:s}=(0,l.useI18n)(),[a,e]=(0,t.useState)({oldPassword:"",newPassword:"",confirmPassword:""}),[n,d]=(0,t.useState)(!1),[h,_]=(0,t.useState)(!1),[p,m]=(0,t.useState)(!1),[w,x]=(0,t.useState)({}),[f,P]=(0,t.useState)(!1),[j,b]=(0,t.useState)(!1),N=(0,o.useRouter)(),{user:g,token:v}=(0,c.G)(s=>s.auth);if(!g||!v)return N.push("/auth/login"),null;let k=()=>{let s={};return a.oldPassword||(s.oldPassword="Текущий пароль обязателен"),a.newPassword?a.newPassword.length<8&&(s.newPassword="Пароль должен содержать минимум 8 символов"):s.newPassword="Новый пароль обязателен",a.confirmPassword?a.newPassword!==a.confirmPassword&&(s.confirmPassword="Пароли не совпадают"):s.confirmPassword="Подтвердите новый пароль",x(s),0===Object.keys(s).length},C=async s=>{if(s.preventDefault(),k()){b(!0),x({});try{let s=await fetch("http://localhost:8000/api/v1/auth/change-password/",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v)},body:JSON.stringify({old_password:a.oldPassword,new_password:a.newPassword,new_password2:a.confirmPassword})});if(s.ok)P(!0),e({oldPassword:"",newPassword:"",confirmPassword:""});else{let a=await s.json();x(a)}}catch(s){x({general:"Ошибка сети. Попробуйте позже."})}finally{b(!1)}}},T=s=>{let{name:r,value:t}=s.target;e({...a,[r]:t}),w[r]&&x({...w,[r]:""})};return f?(0,r.jsx)("div",{className:i().authContainer,children:(0,r.jsxs)("div",{className:i().authCard,children:[(0,r.jsxs)("div",{className:i().authHeader,children:[(0,r.jsx)("h1",{className:i().authTitle,children:"Пароль изменен"}),(0,r.jsx)("p",{className:i().authSubtitle,children:"Ваш пароль был успешно изменен"})]}),(0,r.jsxs)("div",{className:i().successMessage,children:[(0,r.jsx)("div",{className:i().successIcon,children:"✓"}),(0,r.jsx)("p",{children:"Пароль обновлен. Пожалуйста, используйте новый пароль при следующем входе."})]}),(0,r.jsxs)("div",{className:i().authFooter,children:[(0,r.jsx)(u(),{href:"/profile",className:i().linkButton,children:"Вернуться в профиль"}),(0,r.jsx)(u(),{href:"/",className:i().authLink,children:"На главную"})]})]})}):(0,r.jsx)("div",{className:i().authContainer,children:(0,r.jsxs)("div",{className:i().authCard,children:[(0,r.jsxs)("div",{className:i().authHeader,children:[(0,r.jsx)("h1",{className:i().authTitle,children:"Изменить пароль"}),(0,r.jsx)("p",{className:i().authSubtitle,children:"Введите текущий пароль и новый пароль"})]}),(0,r.jsxs)("form",{onSubmit:C,className:i().authForm,children:[w.general&&(0,r.jsx)("div",{className:i().errorMessage,children:w.general}),(0,r.jsxs)("div",{className:i().formGroup,children:[(0,r.jsx)("label",{htmlFor:"oldPassword",className:i().formLabel,children:"Текущий пароль"}),(0,r.jsxs)("div",{className:i().passwordWrapper,children:[(0,r.jsx)("input",{type:n?"text":"password",id:"oldPassword",name:"oldPassword",value:a.oldPassword,onChange:T,className:"".concat(i().formInput," ").concat(w.oldPassword?i().inputError:""),placeholder:"Введите текущий пароль",required:!0}),(0,r.jsx)("button",{type:"button",className:i().passwordToggle,onClick:()=>d(!n),children:n?"\uD83D\uDE48":"\uD83D\uDC41️"})]}),w.oldPassword&&(0,r.jsx)("span",{className:i().errorText,children:w.oldPassword}),w.old_password&&(0,r.jsx)("span",{className:i().errorText,children:w.old_password})]}),(0,r.jsxs)("div",{className:i().formGroup,children:[(0,r.jsx)("label",{htmlFor:"newPassword",className:i().formLabel,children:"Новый пароль"}),(0,r.jsxs)("div",{className:i().passwordWrapper,children:[(0,r.jsx)("input",{type:h?"text":"password",id:"newPassword",name:"newPassword",value:a.newPassword,onChange:T,className:"".concat(i().formInput," ").concat(w.newPassword?i().inputError:""),placeholder:"Введите новый пароль",required:!0}),(0,r.jsx)("button",{type:"button",className:i().passwordToggle,onClick:()=>_(!h),children:h?"\uD83D\uDE48":"\uD83D\uDC41️"})]}),w.newPassword&&(0,r.jsx)("span",{className:i().errorText,children:w.newPassword}),w.new_password&&(0,r.jsx)("span",{className:i().errorText,children:w.new_password})]}),(0,r.jsxs)("div",{className:i().formGroup,children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:i().formLabel,children:"Подтвердите новый пароль"}),(0,r.jsxs)("div",{className:i().passwordWrapper,children:[(0,r.jsx)("input",{type:p?"text":"password",id:"confirmPassword",name:"confirmPassword",value:a.confirmPassword,onChange:T,className:"".concat(i().formInput," ").concat(w.confirmPassword?i().inputError:""),placeholder:"Подтвердите новый пароль",required:!0}),(0,r.jsx)("button",{type:"button",className:i().passwordToggle,onClick:()=>m(!p),children:p?"\uD83D\uDE48":"\uD83D\uDC41️"})]}),w.confirmPassword&&(0,r.jsx)("span",{className:i().errorText,children:w.confirmPassword})]}),(0,r.jsx)("button",{type:"submit",disabled:j,className:"".concat(i().authButton," ").concat(i().primaryButton),children:j?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:i().spinner}),"Сохранение..."]}):"Изменить пароль"})]}),(0,r.jsx)("div",{className:i().authFooter,children:(0,r.jsx)(u(),{href:"/profile",className:i().authLink,children:"Отмена"})})]})})}}},s=>{var a=a=>s(s.s=a);s.O(0,[2181,4540,6874,5295,8441,1684,7358],()=>a(264)),_N_E=s.O()}]);