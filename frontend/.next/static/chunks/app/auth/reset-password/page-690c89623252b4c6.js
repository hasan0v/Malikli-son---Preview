(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4089],{5311:(s,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>m});var r=a(5155),t=a(2115),o=a(5695),d=a(6874),n=a.n(d),l=a(2045),c=a(171),i=a(6866),h=a(5910),u=a.n(h);function m(){let{t:s}=(0,c.useI18n)(),[e,a]=(0,t.useState)({password:"",confirmPassword:""}),[d,h]=(0,t.useState)(!1),[m,w]=(0,t.useState)(!1),[p,j]=(0,t.useState)({}),[x,N]=(0,t.useState)(!1),[P,f]=(0,t.useState)(null),v=(0,o.useRouter)(),g=(0,o.useSearchParams)();(0,l.j)();let{isLoading:b}=(0,l.G)(s=>s.auth);(0,t.useEffect)(()=>{let s=null==g?void 0:g.get("token");s?f(s):v.push("/auth/forgot-password")},[g,v]);let k=()=>{let a={};return e.password?e.password.length<8&&(a.password=s("auth.resetPassword.validation.passwordLength")):a.password=s("auth.resetPassword.validation.passwordRequired"),e.confirmPassword?e.password!==e.confirmPassword&&(a.confirmPassword=s("auth.resetPassword.validation.passwordMismatch")):a.confirmPassword=s("auth.resetPassword.validation.confirmPasswordRequired"),j(a),0===Object.keys(a).length},C=async a=>{if(a.preventDefault(),k()&&P)try{let s=await fetch("".concat(i.JR,"/auth/password-reset/confirm/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:P,password:e.password,password2:e.confirmPassword})});if(s.ok)N(!0);else{let e=await s.json();j(e)}}catch(e){j({general:s("common.error")})}},S=s=>{let{name:r,value:t}=s.target;a({...e,[r]:t}),p[r]&&j({...p,[r]:""})};return P?x?(0,r.jsx)("div",{className:u().authContainer,children:(0,r.jsxs)("div",{className:u().authCard,children:[(0,r.jsxs)("div",{className:u().authHeader,children:[(0,r.jsx)("h1",{className:u().authTitle,children:s("auth.resetPassword.successTitle")}),(0,r.jsx)("p",{className:u().authSubtitle,children:s("auth.resetPassword.successMessage")})]}),(0,r.jsxs)("div",{className:u().successMessage,children:[(0,r.jsx)("div",{className:u().successIcon,children:"✓"}),(0,r.jsx)("p",{children:s("auth.resetPassword.successMessage")})]}),(0,r.jsx)("div",{className:u().authFooter,children:(0,r.jsx)(n(),{href:"/auth/login",className:u().linkButton,children:s("auth.resetPassword.backToLogin")})})]})}):(0,r.jsx)("div",{className:u().authContainer,children:(0,r.jsxs)("div",{className:u().authCard,children:[(0,r.jsxs)("div",{className:u().authHeader,children:[(0,r.jsx)("h1",{className:u().authTitle,children:s("auth.resetPassword.title")}),(0,r.jsx)("p",{className:u().authSubtitle,children:s("auth.resetPassword.subtitle")})]}),(0,r.jsxs)("form",{onSubmit:C,className:u().authForm,children:[p.general&&(0,r.jsx)("div",{className:u().errorMessage,children:p.general}),(0,r.jsxs)("div",{className:u().formGroup,children:[(0,r.jsx)("label",{htmlFor:"password",className:u().formLabel,children:s("auth.resetPassword.password")}),(0,r.jsxs)("div",{className:u().passwordWrapper,children:[(0,r.jsx)("input",{type:d?"text":"password",id:"password",name:"password",value:e.password,onChange:S,className:"".concat(u().formInput," ").concat(p.password?u().inputError:""),placeholder:s("auth.resetPassword.passwordPlaceholder"),required:!0}),(0,r.jsx)("button",{type:"button",className:u().passwordToggle,onClick:()=>h(!d),children:d?"\uD83D\uDE48":"\uD83D\uDC41️"})]}),p.password&&(0,r.jsx)("span",{className:u().errorText,children:p.password})]}),(0,r.jsxs)("div",{className:u().formGroup,children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:u().formLabel,children:s("auth.resetPassword.confirmPassword")}),(0,r.jsxs)("div",{className:u().passwordWrapper,children:[(0,r.jsx)("input",{type:m?"text":"password",id:"confirmPassword",name:"confirmPassword",value:e.confirmPassword,onChange:S,className:"".concat(u().formInput," ").concat(p.confirmPassword?u().inputError:""),placeholder:s("auth.resetPassword.confirmPasswordPlaceholder"),required:!0}),(0,r.jsx)("button",{type:"button",className:u().passwordToggle,onClick:()=>w(!m),children:m?"\uD83D\uDE48":"\uD83D\uDC41️"})]}),p.confirmPassword&&(0,r.jsx)("span",{className:u().errorText,children:p.confirmPassword})]}),"          ",(0,r.jsx)("button",{type:"submit",disabled:b,className:"".concat(u().authButton," ").concat(u().primaryButton),children:b?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:u().spinner}),s("auth.resetPassword.resetButtonLoading")]}):s("auth.resetPassword.resetButton")})]}),(0,r.jsx)("div",{className:u().authFooter,children:(0,r.jsxs)("p",{children:[s("auth.forgotPassword.rememberedPassword")," ",(0,r.jsx)(n(),{href:"/auth/login",className:u().authLink,children:s("auth.resetPassword.backToLogin")})]})})]})}):(0,r.jsx)("div",{className:u().authContainer,children:(0,r.jsxs)("div",{className:u().authCard,children:[(0,r.jsxs)("div",{className:u().authHeader,children:[(0,r.jsx)("h1",{className:u().authTitle,children:s("auth.resetPassword.invalidLinkTitle")}),(0,r.jsx)("p",{className:u().authSubtitle,children:s("auth.resetPassword.invalidLinkMessage")})]}),(0,r.jsx)("div",{className:u().authFooter,children:(0,r.jsx)(n(),{href:"/auth/forgot-password",className:u().linkButton,children:s("auth.resetPassword.requestNewLink")})})]})})}},7171:(s,e,a)=>{Promise.resolve().then(a.bind(a,5311))}},s=>{var e=e=>s(s.s=e);s.O(0,[9614,5829,6707,9800,2352,6530,2214,5748,2333,8187,5980,4676,7698,1659,8538,3516,901,9857,8268,4170,7635,9670,7593,6861,5885,7128,6136,9064,3743,5377,1980,7137,1880,4297,2868,4681,4833,6986,9717,6886,7692,6451,6373,8852,8096,7358],()=>e(7171)),_N_E=s.O()}]);