(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4089],{5311:(s,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>u});var r=a(5155),t=a(2115),o=a(5695),d=a(6874),l=a.n(d),n=a(2045),i=a(171),c=a(5910),h=a.n(c);function u(){let{t:s}=(0,i.useI18n)(),[e,a]=(0,t.useState)({password:"",confirmPassword:""}),[d,c]=(0,t.useState)(!1),[u,m]=(0,t.useState)(!1),[w,p]=(0,t.useState)({}),[j,x]=(0,t.useState)(!1),[N,P]=(0,t.useState)(null),f=(0,o.useRouter)(),v=(0,o.useSearchParams)();(0,n.j)();let{isLoading:g}=(0,n.G)(s=>s.auth);(0,t.useEffect)(()=>{let s=null==v?void 0:v.get("token");s?P(s):f.push("/auth/forgot-password")},[v,f]);let b=()=>{let a={};return e.password?e.password.length<8&&(a.password=s("auth.resetPassword.validation.passwordLength")):a.password=s("auth.resetPassword.validation.passwordRequired"),e.confirmPassword?e.password!==e.confirmPassword&&(a.confirmPassword=s("auth.resetPassword.validation.passwordMismatch")):a.confirmPassword=s("auth.resetPassword.validation.confirmPasswordRequired"),p(a),0===Object.keys(a).length},k=async a=>{if(a.preventDefault(),b()&&N)try{let s=await fetch("http://localhost:8000/api/v1/auth/password-reset/confirm/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:N,password:e.password,password2:e.confirmPassword})});if(s.ok)x(!0);else{let e=await s.json();p(e)}}catch(e){p({general:s("common.error")})}},C=s=>{let{name:r,value:t}=s.target;a({...e,[r]:t}),w[r]&&p({...w,[r]:""})};return N?j?(0,r.jsx)("div",{className:h().authContainer,children:(0,r.jsxs)("div",{className:h().authCard,children:[(0,r.jsxs)("div",{className:h().authHeader,children:[(0,r.jsx)("h1",{className:h().authTitle,children:s("auth.resetPassword.successTitle")}),(0,r.jsx)("p",{className:h().authSubtitle,children:s("auth.resetPassword.successMessage")})]}),(0,r.jsxs)("div",{className:h().successMessage,children:[(0,r.jsx)("div",{className:h().successIcon,children:"✓"}),(0,r.jsx)("p",{children:s("auth.resetPassword.successMessage")})]}),(0,r.jsx)("div",{className:h().authFooter,children:(0,r.jsx)(l(),{href:"/auth/login",className:h().linkButton,children:s("auth.resetPassword.backToLogin")})})]})}):(0,r.jsx)("div",{className:h().authContainer,children:(0,r.jsxs)("div",{className:h().authCard,children:[(0,r.jsxs)("div",{className:h().authHeader,children:[(0,r.jsx)("h1",{className:h().authTitle,children:s("auth.resetPassword.title")}),(0,r.jsx)("p",{className:h().authSubtitle,children:s("auth.resetPassword.subtitle")})]}),(0,r.jsxs)("form",{onSubmit:k,className:h().authForm,children:[w.general&&(0,r.jsx)("div",{className:h().errorMessage,children:w.general}),(0,r.jsxs)("div",{className:h().formGroup,children:[(0,r.jsx)("label",{htmlFor:"password",className:h().formLabel,children:s("auth.resetPassword.password")}),(0,r.jsxs)("div",{className:h().passwordWrapper,children:[(0,r.jsx)("input",{type:d?"text":"password",id:"password",name:"password",value:e.password,onChange:C,className:"".concat(h().formInput," ").concat(w.password?h().inputError:""),placeholder:s("auth.resetPassword.passwordPlaceholder"),required:!0}),(0,r.jsx)("button",{type:"button",className:h().passwordToggle,onClick:()=>c(!d),children:d?"\uD83D\uDE48":"\uD83D\uDC41️"})]}),w.password&&(0,r.jsx)("span",{className:h().errorText,children:w.password})]}),(0,r.jsxs)("div",{className:h().formGroup,children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:h().formLabel,children:s("auth.resetPassword.confirmPassword")}),(0,r.jsxs)("div",{className:h().passwordWrapper,children:[(0,r.jsx)("input",{type:u?"text":"password",id:"confirmPassword",name:"confirmPassword",value:e.confirmPassword,onChange:C,className:"".concat(h().formInput," ").concat(w.confirmPassword?h().inputError:""),placeholder:s("auth.resetPassword.confirmPasswordPlaceholder"),required:!0}),(0,r.jsx)("button",{type:"button",className:h().passwordToggle,onClick:()=>m(!u),children:u?"\uD83D\uDE48":"\uD83D\uDC41️"})]}),w.confirmPassword&&(0,r.jsx)("span",{className:h().errorText,children:w.confirmPassword})]}),"          ",(0,r.jsx)("button",{type:"submit",disabled:g,className:"".concat(h().authButton," ").concat(h().primaryButton),children:g?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:h().spinner}),s("auth.resetPassword.resetButtonLoading")]}):s("auth.resetPassword.resetButton")})]}),(0,r.jsx)("div",{className:h().authFooter,children:(0,r.jsxs)("p",{children:[s("auth.forgotPassword.rememberedPassword")," ",(0,r.jsx)(l(),{href:"/auth/login",className:h().authLink,children:s("auth.resetPassword.backToLogin")})]})})]})}):(0,r.jsx)("div",{className:h().authContainer,children:(0,r.jsxs)("div",{className:h().authCard,children:[(0,r.jsxs)("div",{className:h().authHeader,children:[(0,r.jsx)("h1",{className:h().authTitle,children:s("auth.resetPassword.invalidLinkTitle")}),(0,r.jsx)("p",{className:h().authSubtitle,children:s("auth.resetPassword.invalidLinkMessage")})]}),(0,r.jsx)("div",{className:h().authFooter,children:(0,r.jsx)(l(),{href:"/auth/forgot-password",className:h().linkButton,children:s("auth.resetPassword.requestNewLink")})})]})})}},7171:(s,e,a)=>{Promise.resolve().then(a.bind(a,5311))}},s=>{var e=e=>s(s.s=e);s.O(0,[9614,5829,6707,9800,2352,6530,2214,5748,2333,8187,5980,4676,7698,1659,8538,3516,901,9857,8268,4170,7635,9670,7593,6861,5885,7128,6136,9064,3743,5377,1980,7137,1880,4297,2868,4681,4833,6986,9002,9466,7692,6451,6373,8852,8096,7358],()=>e(7171)),_N_E=s.O()}]);