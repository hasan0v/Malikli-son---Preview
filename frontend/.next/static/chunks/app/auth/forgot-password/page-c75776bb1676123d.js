(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9413],{1410:e=>{e.exports={loadingContainer:"LoadingCircle_loadingContainer__4xet2",spinner:"LoadingCircle_spinner__dFWsr","sk-bouncedelay":"LoadingCircle_sk-bouncedelay__pRt6I",small:"LoadingCircle_small__1YWT6",medium:"LoadingCircle_medium__2mbND",large:"LoadingCircle_large__LczEg",primary:"LoadingCircle_primary__11h_B",white:"LoadingCircle_white__DwiPc",gray:"LoadingCircle_gray__uCF8K",bounce1:"LoadingCircle_bounce1__A8X52",bounce2:"LoadingCircle_bounce2__exQJN",bounce3:"LoadingCircle_bounce3__mC4DJ",loadingText:"LoadingCircle_loadingText__EsdSU",circleSpinner:"LoadingCircle_circleSpinner__ziTn7",spin:"LoadingCircle_spin___kJ5O",fullPageOverlay:"LoadingCircle_fullPageOverlay__7R5zF",sectionLoading:"LoadingCircle_sectionLoading__fnPMj",cardSkeleton:"LoadingCircle_cardSkeleton__V99_0",loading:"LoadingCircle_loading__68KHW",productGridLoading:"LoadingCircle_productGridLoading__sV__P",productCardSkeleton:"LoadingCircle_productCardSkeleton__urXAf"}},2045:(e,a,t)=>{"use strict";t.d(a,{G:()=>s,j:()=>o});var r=t(4540);let o=()=>(0,r.wA)(),s=r.d4},2265:(e,a,t)=>{"use strict";t.d(a,{Ay:()=>g,DY:()=>s,ET:()=>d,Lx:()=>o,l2:()=>i,ri:()=>u,uM:()=>h,w2:()=>l});var r=t(1990);let o=(0,r.zD)("auth/login",async(e,a)=>{let{rejectWithValue:t}=a;try{let a=await fetch("http://localhost:8000/api/v1/auth/login/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){let e=await a.json();return t(e)}let r=await a.json();return localStorage.setItem("access_token",r.access),localStorage.setItem("refresh_token",r.refresh),r}catch(e){return t({message:"Ошибка сети"})}}),s=(0,r.zD)("auth/register",async(e,a)=>{let{rejectWithValue:t}=a;try{let a=await fetch("http://localhost:8000/api/v1/auth/register/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){let e=await a.json();return t(e)}return await a.json()}catch(e){return t({message:"Ошибка сети"})}}),i=(0,r.zD)("auth/fetchProfile",async(e,a)=>{let{rejectWithValue:t,getState:r}=a;try{let e=r().auth.token||localStorage.getItem("access_token");if(!e)return t({message:"Нет токена авторизации"});let a=await fetch("http://localhost:8000/api/v1/auth/profile/",{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!a.ok){if(401===a.status)throw Error("Token expired");let e=await a.json();return t(e)}return await a.json()}catch(e){return t({message:"Ошибка получения профиля"})}}),n=(0,r.zD)("auth/refreshToken",async(e,a)=>{let{rejectWithValue:t}=a;try{let e=localStorage.getItem("refresh_token");if(!e)return t({message:"Нет refresh токена"});let a=await fetch("http://localhost:8000/api/v1/auth/login/refresh/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:e})});if(!a.ok){let e=await a.json();return t(e)}let r=await a.json();return localStorage.setItem("access_token",r.access),r}catch(e){return t({message:"Ошибка обновления токена"})}}),l=(0,r.zD)("auth/requestPasswordReset",async(e,a)=>{let{rejectWithValue:t}=a;try{let a=await fetch("http://localhost:8000/api/v1/auth/password-reset/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(!a.ok){let e=await a.json();return t(e)}return await a.json()}catch(e){return t({message:"Ошибка сети"})}}),c=(0,r.Z0)({name:"auth",initialState:{user:null,token:null,refreshToken:null,isLoading:!1,error:null,isAuthenticated:!1,isInitialized:!1},reducers:{logout:e=>{e.user=null,e.token=null,e.refreshToken=null,e.isAuthenticated=!1,e.error=null,localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")},clearError:e=>{e.error=null},loadTokensFromStorage:e=>{let a=localStorage.getItem("access_token"),t=localStorage.getItem("refresh_token");a&&t&&(e.token=a,e.refreshToken=t,e.isAuthenticated=!0),e.isInitialized=!0},setTokens:(e,a)=>{e.token=a.payload.access,e.refreshToken=a.payload.refresh,e.isAuthenticated=!0}},extraReducers:e=>{e.addCase(o.pending,e=>{e.isLoading=!0,e.error=null}).addCase(o.fulfilled,(e,a)=>{e.isLoading=!1,e.token=a.payload.access,e.refreshToken=a.payload.refresh,e.isAuthenticated=!0,e.error=null}).addCase(o.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload,e.isAuthenticated=!1}).addCase(s.pending,e=>{e.isLoading=!0,e.error=null}).addCase(s.fulfilled,(e,a)=>{e.isLoading=!1,e.user=a.payload,e.error=null}).addCase(s.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload}).addCase(i.pending,e=>{e.isLoading=!0}).addCase(i.fulfilled,(e,a)=>{e.isLoading=!1,e.user=a.payload,e.error=null}).addCase(i.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload,e.isAuthenticated=!1,e.token=null,e.refreshToken=null,localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")}).addCase(n.fulfilled,(e,a)=>{e.token=a.payload.access}).addCase(n.rejected,e=>{e.isAuthenticated=!1,e.token=null,e.refreshToken=null,localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")}).addCase(l.pending,e=>{e.isLoading=!0,e.error=null}).addCase(l.fulfilled,e=>{e.isLoading=!1,e.error=null}).addCase(l.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload})}}),{logout:u,clearError:d,loadTokensFromStorage:h,setTokens:_}=c.actions,g=c.reducer},3249:(e,a,t)=>{Promise.resolve().then(t.bind(t,6195))},4060:(e,a,t)=>{"use strict";t.d(a,{A:()=>i});var r=t(5155);t(2115);var o=t(1410),s=t.n(o);let i=e=>{let{size:a="medium",color:t="primary",text:o,className:i=""}=e;return(0,r.jsxs)("div",{className:"".concat(s().loadingContainer," ").concat(i),children:[(0,r.jsxs)("div",{className:"".concat(s().spinner," ").concat(s()[a]," ").concat(s()[t]),children:[(0,r.jsx)("div",{className:s().bounce1}),(0,r.jsx)("div",{className:s().bounce2}),(0,r.jsx)("div",{className:s().bounce3})]}),o&&(0,r.jsx)("p",{className:s().loadingText,children:o})]})}},5910:e=>{e.exports={authContainer:"auth_authContainer__uW_6b",authCard:"auth_authCard__Ir0GS",authHeader:"auth_authHeader__oHCrb",authTitle:"auth_authTitle__VlD_J",authSubtitle:"auth_authSubtitle__Hjn_W",authForm:"auth_authForm__VDzMx",errorMessage:"auth_errorMessage__bXq6j",successMessage:"auth_successMessage__SdDwc",successIcon:"auth_successIcon__gIoJv",helpText:"auth_helpText__4jxL0",linkButton:"auth_linkButton__3nRC2",inputGroup:"auth_inputGroup__6KdsB",inputLabel:"auth_inputLabel__ugLRU",inputWrapper:"auth_inputWrapper__R6pbg",input:"auth_input__2iiLT",inputIcon:"auth_inputIcon__W7Oq3",passwordToggle:"auth_passwordToggle__uDS6d",checkboxGroup:"auth_checkboxGroup__ybg5C",checkboxLabel:"auth_checkboxLabel__wRPUh",checkbox:"auth_checkbox__b78an",checkboxCustom:"auth_checkboxCustom__zuQto",forgotLink:"auth_forgotLink__4mgFs",submitButton:"auth_submitButton__wgua0",loading:"auth_loading__7pVgz",spinner:"auth_spinner__9RFYX",spin:"auth_spin__6DziB",authFooter:"auth_authFooter__0bLSJ",footerText:"auth_footerText__BmQwI",footerLink:"auth_footerLink__QdQjs",socialDivider:"auth_socialDivider__Fa8_5",dividerText:"auth_dividerText__CL9D0",socialButtons:"auth_socialButtons__PAqk6",socialButton:"auth_socialButton__ZEAbp",redirectInfo:"auth_redirectInfo__F_HcC",redirectActions:"auth_redirectActions__ojM4k",proceedButton:"auth_proceedButton__oUwqa",cancelButton:"auth_cancelButton__fO4QL",formRow:"auth_formRow__SIR7i"}},6195:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>_});var r=t(5155),o=t(2115),s=t(6874),i=t.n(s),n=t(2045),l=t(2265),c=t(4060),u=t(5295),d=t(5910),h=t.n(d);function _(){let{t:e}=(0,u.useI18n)(),[a,t]=(0,o.useState)(""),[s,d]=(0,o.useState)(!1),_=(0,n.j)(),{isLoading:g}=(0,n.G)(e=>e.auth),p=async e=>{if(e.preventDefault(),a.trim())try{await _((0,l.w2)(a)).unwrap(),d(!0)}catch(e){console.error("Password reset failed:",e)}};return s?(0,r.jsx)("div",{className:h().authContainer,children:(0,r.jsxs)("div",{className:h().authCard,children:[(0,r.jsxs)("div",{className:h().authHeader,children:[(0,r.jsx)("h1",{className:h().authTitle,children:e("auth.forgotPassword.emailSentTitle")}),(0,r.jsx)("p",{className:h().authSubtitle,children:e("auth.forgotPassword.emailSentSubtitle")})]}),(0,r.jsxs)("div",{className:h().successMessage,children:[(0,r.jsx)("div",{className:h().successIcon,children:"✓"}),(0,r.jsx)("p",{children:e("auth.forgotPassword.successMessage",{email:a})}),(0,r.jsx)("p",{className:h().helpText,children:e("auth.forgotPassword.helpText")})]}),(0,r.jsx)("div",{className:h().authFooter,children:(0,r.jsx)(i(),{href:"/auth/login",className:h().linkButton,children:e("auth.forgotPassword.backToLogin")})})]})}):(0,r.jsx)("div",{className:h().authContainer,children:(0,r.jsxs)("div",{className:h().authCard,children:[(0,r.jsxs)("div",{className:h().authHeader,children:[(0,r.jsx)("h1",{className:h().authTitle,children:e("auth.forgotPassword.title")}),(0,r.jsx)("p",{className:h().authSubtitle,children:e("auth.forgotPassword.subtitle")})]}),(0,r.jsxs)("form",{onSubmit:p,className:h().authForm,children:["          ",(0,r.jsxs)("div",{className:h().inputGroup,children:[(0,r.jsx)("label",{htmlFor:"email",className:h().inputLabel,children:e("auth.forgotPassword.email")}),(0,r.jsxs)("div",{className:h().inputWrapper,children:[(0,r.jsx)("input",{type:"email",id:"email",value:a,onChange:e=>t(e.target.value),className:h().input,placeholder:e("auth.forgotPassword.emailPlaceholder"),required:!0}),(0,r.jsx)("div",{className:h().inputIcon,children:(0,r.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,r.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})})})]})]}),"          ",(0,r.jsx)("button",{type:"submit",disabled:g||!a.trim(),className:"".concat(h().submitButton," ").concat(g?h().loading:""),children:g?(0,r.jsx)(c.A,{size:"small",color:"white",text:e("auth.forgotPassword.sendButtonLoading")}):e("auth.forgotPassword.sendButton")})]}),"        ",(0,r.jsxs)("div",{className:h().authFooter,children:[(0,r.jsxs)("p",{className:h().footerText,children:[e("auth.forgotPassword.rememberedPassword")," ",(0,r.jsx)(i(),{href:"/auth/login",className:h().footerLink,children:e("auth.forgotPassword.loginLink")})]}),(0,r.jsxs)("p",{className:h().footerText,children:[e("auth.forgotPassword.noAccount")," ",(0,r.jsx)(i(),{href:"/auth/register",className:h().footerLink,children:e("auth.forgotPassword.registerLink")})]})]})]})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[2181,4540,6874,1990,5295,8441,1684,7358],()=>a(3249)),_N_E=e.O()}]);