(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[983],{1410:e=>{e.exports={loadingContainer:"LoadingCircle_loadingContainer__4xet2",spinner:"LoadingCircle_spinner__dFWsr","sk-bouncedelay":"LoadingCircle_sk-bouncedelay__pRt6I",small:"LoadingCircle_small__1YWT6",medium:"LoadingCircle_medium__2mbND",large:"LoadingCircle_large__LczEg",primary:"LoadingCircle_primary__11h_B",white:"LoadingCircle_white__DwiPc",gray:"LoadingCircle_gray__uCF8K",bounce1:"LoadingCircle_bounce1__A8X52",bounce2:"LoadingCircle_bounce2__exQJN",bounce3:"LoadingCircle_bounce3__mC4DJ",loadingText:"LoadingCircle_loadingText__EsdSU",circleSpinner:"LoadingCircle_circleSpinner__ziTn7",spin:"LoadingCircle_spin___kJ5O",fullPageOverlay:"LoadingCircle_fullPageOverlay__7R5zF",sectionLoading:"LoadingCircle_sectionLoading__fnPMj",cardSkeleton:"LoadingCircle_cardSkeleton__V99_0",loading:"LoadingCircle_loading__68KHW",productGridLoading:"LoadingCircle_productGridLoading__sV__P",productCardSkeleton:"LoadingCircle_productCardSkeleton__urXAf"}},1421:(e,a,t)=>{Promise.resolve().then(t.bind(t,6117))},2265:(e,a,t)=>{"use strict";t.d(a,{Ay:()=>_,DY:()=>i,ET:()=>d,Lx:()=>r,l2:()=>n,ri:()=>u,uM:()=>h,w2:()=>o});var s=t(1990);let r=(0,s.zD)("auth/login",async(e,a)=>{let{rejectWithValue:t}=a;try{let a=await fetch("http://localhost:8000/api/v1/auth/login/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){let e=await a.json();return t(e)}let s=await a.json();return localStorage.setItem("access_token",s.access),localStorage.setItem("refresh_token",s.refresh),s}catch(e){return t({message:"Ошибка сети"})}}),i=(0,s.zD)("auth/register",async(e,a)=>{let{rejectWithValue:t}=a;try{let a=await fetch("http://localhost:8000/api/v1/auth/register/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){let e=await a.json();return t(e)}return await a.json()}catch(e){return t({message:"Ошибка сети"})}}),n=(0,s.zD)("auth/fetchProfile",async(e,a)=>{let{rejectWithValue:t,getState:s}=a;try{let e=s().auth.token||localStorage.getItem("access_token");if(!e)return t({message:"Нет токена авторизации"});let a=await fetch("http://localhost:8000/api/v1/auth/profile/",{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!a.ok){if(401===a.status)throw Error("Token expired");let e=await a.json();return t(e)}return await a.json()}catch(e){return t({message:"Ошибка получения профиля"})}}),l=(0,s.zD)("auth/refreshToken",async(e,a)=>{let{rejectWithValue:t}=a;try{let e=localStorage.getItem("refresh_token");if(!e)return t({message:"Нет refresh токена"});let a=await fetch("http://localhost:8000/api/v1/auth/login/refresh/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:e})});if(!a.ok){let e=await a.json();return t(e)}let s=await a.json();return localStorage.setItem("access_token",s.access),s}catch(e){return t({message:"Ошибка обновления токена"})}}),o=(0,s.zD)("auth/requestPasswordReset",async(e,a)=>{let{rejectWithValue:t}=a;try{let a=await fetch("http://localhost:8000/api/v1/auth/password-reset/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(!a.ok){let e=await a.json();return t(e)}return await a.json()}catch(e){return t({message:"Ошибка сети"})}}),c=(0,s.Z0)({name:"auth",initialState:{user:null,token:null,refreshToken:null,isLoading:!1,error:null,isAuthenticated:!1,isInitialized:!1},reducers:{logout:e=>{e.user=null,e.token=null,e.refreshToken=null,e.isAuthenticated=!1,e.error=null,localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")},clearError:e=>{e.error=null},loadTokensFromStorage:e=>{let a=localStorage.getItem("access_token"),t=localStorage.getItem("refresh_token");a&&t&&(e.token=a,e.refreshToken=t,e.isAuthenticated=!0),e.isInitialized=!0},setTokens:(e,a)=>{e.token=a.payload.access,e.refreshToken=a.payload.refresh,e.isAuthenticated=!0}},extraReducers:e=>{e.addCase(r.pending,e=>{e.isLoading=!0,e.error=null}).addCase(r.fulfilled,(e,a)=>{e.isLoading=!1,e.token=a.payload.access,e.refreshToken=a.payload.refresh,e.isAuthenticated=!0,e.error=null}).addCase(r.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload,e.isAuthenticated=!1}).addCase(i.pending,e=>{e.isLoading=!0,e.error=null}).addCase(i.fulfilled,(e,a)=>{e.isLoading=!1,e.user=a.payload,e.error=null}).addCase(i.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload}).addCase(n.pending,e=>{e.isLoading=!0}).addCase(n.fulfilled,(e,a)=>{e.isLoading=!1,e.user=a.payload,e.error=null}).addCase(n.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload,e.isAuthenticated=!1,e.token=null,e.refreshToken=null,localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")}).addCase(l.fulfilled,(e,a)=>{e.token=a.payload.access}).addCase(l.rejected,e=>{e.isAuthenticated=!1,e.token=null,e.refreshToken=null,localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")}).addCase(o.pending,e=>{e.isLoading=!0,e.error=null}).addCase(o.fulfilled,e=>{e.isLoading=!1,e.error=null}).addCase(o.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload})}}),{logout:u,clearError:d,loadTokensFromStorage:h,setTokens:p}=c.actions,_=c.reducer},4060:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});var s=t(5155);t(2115);var r=t(1410),i=t.n(r);let n=e=>{let{size:a="medium",color:t="primary",text:r,className:n=""}=e;return(0,s.jsxs)("div",{className:"".concat(i().loadingContainer," ").concat(n),children:[(0,s.jsxs)("div",{className:"".concat(i().spinner," ").concat(i()[a]," ").concat(i()[t]),children:[(0,s.jsx)("div",{className:i().bounce1}),(0,s.jsx)("div",{className:i().bounce2}),(0,s.jsx)("div",{className:i().bounce3})]}),r&&(0,s.jsx)("p",{className:i().loadingText,children:r})]})}},5695:(e,a,t)=>{"use strict";var s=t(8999);t.o(s,"useParams")&&t.d(a,{useParams:function(){return s.useParams}}),t.o(s,"usePathname")&&t.d(a,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(a,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(a,{useSearchParams:function(){return s.useSearchParams}})},5910:e=>{e.exports={authContainer:"auth_authContainer__uW_6b",authCard:"auth_authCard__Ir0GS",authHeader:"auth_authHeader__oHCrb",authTitle:"auth_authTitle__VlD_J",authSubtitle:"auth_authSubtitle__Hjn_W",authForm:"auth_authForm__VDzMx",errorMessage:"auth_errorMessage__bXq6j",successMessage:"auth_successMessage__SdDwc",successIcon:"auth_successIcon__gIoJv",helpText:"auth_helpText__4jxL0",linkButton:"auth_linkButton__3nRC2",inputGroup:"auth_inputGroup__6KdsB",inputLabel:"auth_inputLabel__ugLRU",inputWrapper:"auth_inputWrapper__R6pbg",input:"auth_input__2iiLT",inputIcon:"auth_inputIcon__W7Oq3",passwordToggle:"auth_passwordToggle__uDS6d",checkboxGroup:"auth_checkboxGroup__ybg5C",checkboxLabel:"auth_checkboxLabel__wRPUh",checkbox:"auth_checkbox__b78an",checkboxCustom:"auth_checkboxCustom__zuQto",forgotLink:"auth_forgotLink__4mgFs",submitButton:"auth_submitButton__wgua0",loading:"auth_loading__7pVgz",spinner:"auth_spinner__9RFYX",spin:"auth_spin__6DziB",authFooter:"auth_authFooter__0bLSJ",footerText:"auth_footerText__BmQwI",footerLink:"auth_footerLink__QdQjs",socialDivider:"auth_socialDivider__Fa8_5",dividerText:"auth_dividerText__CL9D0",socialButtons:"auth_socialButtons__PAqk6",socialButton:"auth_socialButton__ZEAbp",redirectInfo:"auth_redirectInfo__F_HcC",redirectActions:"auth_redirectActions__ojM4k",proceedButton:"auth_proceedButton__oUwqa",cancelButton:"auth_cancelButton__fO4QL",formRow:"auth_formRow__SIR7i"}},6117:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>_});var s=t(5155),r=t(2115),i=t(5695),n=t(4540),l=t(6874),o=t.n(l),c=t(2265),u=t(4060),d=t(5295),h=t(5910),p=t.n(h);function _(){let{t:e}=(0,d.useI18n)(),[a,t]=(0,r.useState)({username:"",email:"",password:"",password2:"",first_name:"",last_name:"",phone_number:""}),[l,h]=(0,r.useState)(!1),[_,m]=(0,r.useState)(!1),[g,x]=(0,r.useState)(!1),[f,j]=(0,r.useState)(""),[C,v]=(0,r.useState)(!1),[b,k]=(0,r.useState)(0),[L,w]=(0,r.useState)(null),N=(0,n.wA)(),y=(0,i.useRouter)(),{isLoading:S,error:T,isAuthenticated:I}=(0,n.d4)(e=>e.auth);(0,r.useEffect)(()=>{I&&!C&&y.push("/")},[I,y,C]),(0,r.useEffect)(()=>{let e;return b>0?e=setInterval(()=>{k(e=>e-1)},1e3):0===b&&C&&f&&y.push("/auth/login"),()=>{e&&clearInterval(e)}},[b,C,f,y]),(0,r.useEffect)(()=>()=>{L&&clearTimeout(L)},[L]),(0,r.useEffect)(()=>{N((0,c.ET)())},[N]);let z=e=>{let{name:a,value:s}=e.target;t(e=>({...e,[a]:s}))},P=async t=>{if(t.preventDefault(),!g)return void alert(e("auth.register.validation.acceptTerms"));if(a.password!==a.password2)return void alert(e("auth.register.validation.passwordMismatch"));try{v(!0);let t=await N((0,c.DY)(a));c.DY.fulfilled.match(t)?(j(e("auth.register.successMessage")),k(10)):v(!1)}catch(e){console.error("Registration failed:",e),v(!1)}},B=e=>{"password"===e?h(!l):m(!_)};return(0,s.jsxs)("div",{className:p().authContainer,children:["      ",(0,s.jsxs)("div",{className:p().authCard,children:[(0,s.jsxs)("div",{className:p().authHeader,children:[(0,s.jsx)("h1",{className:p().authTitle,children:e("auth.register.title")}),(0,s.jsx)("p",{className:p().authSubtitle,children:e("auth.register.subtitle")})]}),"        ",(0,s.jsxs)("form",{onSubmit:P,className:p().authForm,children:[T&&(0,s.jsx)("div",{className:p().errorMessage,children:"string"==typeof T?T:e("auth.register.errorDefault")}),"          ",f&&(0,s.jsxs)("div",{className:p().successMessage,children:[f,b>0&&(0,s.jsxs)("div",{className:p().redirectInfo,children:[(0,s.jsx)("p",{children:e("auth.register.redirectInfo",{seconds:b})}),(0,s.jsxs)("div",{className:p().redirectActions,children:[(0,s.jsx)("button",{type:"button",onClick:()=>{y.push("/auth/login")},className:p().proceedButton,children:e("auth.register.redirectNow")}),(0,s.jsx)("button",{type:"button",onClick:()=>{k(0),L&&(clearTimeout(L),w(null))},className:p().cancelButton,children:e("auth.register.stayHere")})]})]})]}),"          ",(0,s.jsxs)("div",{className:p().inputGroup,children:[(0,s.jsxs)("label",{htmlFor:"first_name",className:p().inputLabel,children:[e("auth.register.firstName")," *"]}),(0,s.jsxs)("div",{className:p().inputWrapper,children:[(0,s.jsx)("input",{type:"text",id:"first_name",name:"first_name",value:a.first_name,onChange:z,className:p().input,placeholder:e("auth.register.firstNamePlaceholder"),required:!0}),(0,s.jsx)("div",{className:p().inputIcon,children:(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,s.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4z"})})})]})]}),(0,s.jsxs)("div",{className:p().inputGroup,children:[(0,s.jsxs)("label",{htmlFor:"last_name",className:p().inputLabel,children:[e("auth.register.lastName")," *"]}),(0,s.jsxs)("div",{className:p().inputWrapper,children:[(0,s.jsx)("input",{type:"text",id:"last_name",name:"last_name",value:a.last_name,onChange:z,className:p().input,placeholder:e("auth.register.lastNamePlaceholder"),required:!0}),(0,s.jsx)("div",{className:p().inputIcon,children:(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,s.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4z"})})})]})]}),"          ",(0,s.jsxs)("div",{className:p().inputGroup,children:[(0,s.jsxs)("label",{htmlFor:"username",className:p().inputLabel,children:[e("auth.register.username")," *"]}),(0,s.jsxs)("div",{className:p().inputWrapper,children:[(0,s.jsx)("input",{type:"text",id:"username",name:"username",value:a.username,onChange:z,className:p().input,placeholder:e("auth.register.usernamePlaceholder"),required:!0}),(0,s.jsx)("div",{className:p().inputIcon,children:(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,s.jsx)("path",{d:"M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1L13.5 2.5L16.17 5.17L10.24 11.1C9.46 11.54 9 12.38 9 13.31V15L7 13V17H11C11.24 17 11.47 16.93 11.66 16.8L18.1 10.35L19.5 11.75L21 10.25V9Z"})})})]})]}),(0,s.jsxs)("div",{className:p().inputGroup,children:[(0,s.jsxs)("label",{htmlFor:"email",className:p().inputLabel,children:[e("auth.register.email")," *"]}),(0,s.jsxs)("div",{className:p().inputWrapper,children:[(0,s.jsx)("input",{type:"email",id:"email",name:"email",value:a.email,onChange:z,className:p().input,placeholder:e("auth.register.emailPlaceholder"),required:!0}),(0,s.jsx)("div",{className:p().inputIcon,children:(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,s.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.89 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})})})]})]}),(0,s.jsxs)("div",{className:p().inputGroup,children:[(0,s.jsx)("label",{htmlFor:"phone_number",className:p().inputLabel,children:e("auth.register.phone")}),(0,s.jsxs)("div",{className:p().inputWrapper,children:[(0,s.jsx)("input",{type:"tel",id:"phone_number",name:"phone_number",value:a.phone_number,onChange:z,className:p().input,placeholder:e("auth.register.phonePlaceholder")}),(0,s.jsx)("div",{className:p().inputIcon,children:(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,s.jsx)("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"})})})]})]}),"          ",(0,s.jsxs)("div",{className:p().inputGroup,children:[(0,s.jsxs)("label",{htmlFor:"password",className:p().inputLabel,children:[e("auth.register.password")," *"]}),(0,s.jsxs)("div",{className:p().inputWrapper,children:[(0,s.jsx)("input",{type:l?"text":"password",id:"password",name:"password",value:a.password,onChange:z,className:p().input,placeholder:e("auth.register.passwordPlaceholder"),required:!0}),(0,s.jsx)("button",{type:"button",onClick:()=>B("password"),className:p().passwordToggle,children:l?(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,s.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"})}):(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,s.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})})})]})]}),"            ",(0,s.jsxs)("div",{className:p().inputGroup,children:[(0,s.jsxs)("label",{htmlFor:"password2",className:p().inputLabel,children:[e("auth.register.confirmPassword")," *"]}),(0,s.jsxs)("div",{className:p().inputWrapper,children:[(0,s.jsx)("input",{type:_?"text":"password",id:"password2",name:"password2",value:a.password2,onChange:z,className:p().input,placeholder:e("auth.register.confirmPasswordPlaceholder"),required:!0}),(0,s.jsx)("button",{type:"button",onClick:()=>B("password2"),className:p().passwordToggle,children:_?(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,s.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"})}):(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,s.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})})})]})]}),"          ",(0,s.jsx)("div",{className:p().checkboxGroup,children:(0,s.jsxs)("label",{className:p().checkboxLabel,children:[(0,s.jsx)("input",{type:"checkbox",checked:g,onChange:e=>x(e.target.checked),className:p().checkbox,required:!0}),(0,s.jsx)("span",{className:p().checkboxCustom}),e("auth.register.acceptTerms")," ",(0,s.jsx)(o(),{href:"/terms",className:p().forgotLink,children:e("auth.register.termsLink")})," ",e("auth.register.andText")," ",(0,s.jsx)(o(),{href:"/privacy",className:p().forgotLink,children:e("auth.register.privacyLink")})]})}),"          ",(0,s.jsx)("button",{type:"submit",disabled:S||!g,className:"".concat(p().submitButton," ").concat(S?p().loading:""),children:S?(0,s.jsx)(u.A,{size:"small",color:"white",text:e("auth.register.registerButtonLoading")}):e("auth.register.registerButton")})]}),(0,s.jsxs)("div",{className:p().authFooter,children:[(0,s.jsxs)("p",{className:p().footerText,children:[e("auth.register.hasAccount")," ",(0,s.jsx)(o(),{href:"/auth/login",className:p().footerLink,children:e("auth.register.loginLink")})]}),"        "]})]})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[2181,4540,6874,1990,5295,8441,1684,7358],()=>a(1421)),_N_E=e.O()}]);