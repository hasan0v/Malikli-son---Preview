(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3124],{2477:(e,a,t)=>{Promise.resolve().then(t.bind(t,8950))},3496:e=>{e.exports={adminOrderDetailsPage:"adminOrderDetails_adminOrderDetailsPage__O__zK",container:"adminOrderDetails_container__Nzvrl",header:"adminOrderDetails_header__cHNlF",backButton:"adminOrderDetails_backButton__ziYSW",loadingContainer:"adminOrderDetails_loadingContainer__f48zS",errorContainer:"adminOrderDetails_errorContainer__xvoqn",spinner:"adminOrderDetails_spinner__neYqF",spin:"adminOrderDetails_spin__GDfto",orderInfo:"adminOrderDetails_orderInfo__pm3Cm",infoCard:"adminOrderDetails_infoCard__AFG6P",statusCard:"adminOrderDetails_statusCard__M1Ng5",amountCard:"adminOrderDetails_amountCard__NymCn",infoGrid:"adminOrderDetails_infoGrid__lzb19",amountGrid:"adminOrderDetails_amountGrid__9N6tA",infoItem:"adminOrderDetails_infoItem__QpsR9",amountItem:"adminOrderDetails_amountItem__rjJR3",totalAmount:"adminOrderDetails_totalAmount__uJ13e",statusSection:"adminOrderDetails_statusSection__mz_gS",currentStatus:"adminOrderDetails_currentStatus__7xEh8",statusBadge:"adminOrderDetails_statusBadge__z2_2w",pending_payment:"adminOrderDetails_pending_payment__6yQo6",pending:"adminOrderDetails_pending__aI1FL",payment_pending:"adminOrderDetails_payment_pending__3H1Qs",paid:"adminOrderDetails_paid__TuUv_",payment_paid:"adminOrderDetails_payment_paid__4oWxV",failed:"adminOrderDetails_failed__AtDJ6",payment_failed:"adminOrderDetails_payment_failed__nNmr4",refunded:"adminOrderDetails_refunded__1HpRW",payment_refunded:"adminOrderDetails_payment_refunded__IMpv8",processing:"adminOrderDetails_processing__pqBk3",shipped:"adminOrderDetails_shipped__Qjeaz",delivered:"adminOrderDetails_delivered__d7wV7",cancelled:"adminOrderDetails_cancelled__6bPyY",statusButtons:"adminOrderDetails_statusButtons__TVc5w",statusButton:"adminOrderDetails_statusButton__d6tIB",pendingButton:"adminOrderDetails_pendingButton___RxT0",processingButton:"adminOrderDetails_processingButton__NE6QN",shippedButton:"adminOrderDetails_shippedButton__6YHp0",deliveredButton:"adminOrderDetails_deliveredButton__huAb_",cancelledButton:"adminOrderDetails_cancelledButton__HHroi",paidButton:"adminOrderDetails_paidButton__zoAmG",failedButton:"adminOrderDetails_failedButton__5n223",refundedButton:"adminOrderDetails_refundedButton__wa3Dw",notesCard:"adminOrderDetails_notesCard__8_pa5",trackingCard:"adminOrderDetails_trackingCard__LH1RM",orderGrid:"adminOrderDetails_orderGrid__kUb_m",orderCard:"adminOrderDetails_orderCard__GXio9",orderCardTitle:"adminOrderDetails_orderCardTitle__dIGoE",infoRow:"adminOrderDetails_infoRow__4wN1L",infoLabel:"adminOrderDetails_infoLabel__rhaAp",infoValue:"adminOrderDetails_infoValue__SRDJg",statusManagement:"adminOrderDetails_statusManagement__KL8n9",statusGroup:"adminOrderDetails_statusGroup__iuN2d",statusSelect:"adminOrderDetails_statusSelect__UNIu5",updateButton:"adminOrderDetails_updateButton__7VUR1",itemsSection:"adminOrderDetails_itemsSection__4QQt0",itemsTitle:"adminOrderDetails_itemsTitle__BQwMf",itemsList:"adminOrderDetails_itemsList__yL034",itemCard:"adminOrderDetails_itemCard__Y4NhN",itemImage:"adminOrderDetails_itemImage__27iDu",itemDetails:"adminOrderDetails_itemDetails__g_0Fp",itemName:"adminOrderDetails_itemName___jJNw",itemMeta:"adminOrderDetails_itemMeta__D4jZN",itemPrice:"adminOrderDetails_itemPrice__e3f7G",addressSection:"adminOrderDetails_addressSection__C4D7T",addressGrid:"adminOrderDetails_addressGrid__Qnc_7",addressCard:"adminOrderDetails_addressCard__OiDmP",addressTitle:"adminOrderDetails_addressTitle__8_qF3",addressDetails:"adminOrderDetails_addressDetails__pxcBF",successMessage:"adminOrderDetails_successMessage__eP81m",errorMessage:"adminOrderDetails_errorMessage__lPsRF"}},8950:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>_});var s=t(5155),n=t(2115),d=t(4540),r=t(5695),i=t(171),l=t(3496),o=t.n(l);let c="http://localhost:8000/api/v1";function _(){let{t:e}=(0,i.useI18n)(),a=(0,r.useRouter)(),t=(0,r.useParams)(),{isAuthenticated:l,user:_,isInitialized:m}=(0,d.d4)(e=>e.auth),[u,p]=(0,n.useState)(null),[h,D]=(0,n.useState)(!0),[O,f]=(0,n.useState)(null),[j,x]=(0,n.useState)(!1),g=null==t?void 0:t.id;(0,n.useEffect)(()=>{if(m&&(!l||!(null==_?void 0:_.is_staff)))return void a.push("/")},[m,l,_,a]),(0,n.useEffect)(()=>{let e=async()=>{if(l&&(null==_?void 0:_.is_staff)&&g){D(!0),f(null);try{let e=localStorage.getItem("access_token");if(!e)return void f("No access token found");let a=await fetch("".concat(c,"/admin/orders/").concat(g,"/"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!a.ok)throw Error("Failed to load order details");let t=await a.json();p(t)}catch(e){console.error("Error loading order details:",e),f("Failed to load order details")}finally{D(!1)}}};l&&(null==_?void 0:_.is_staff)&&g&&e()},[l,_,g]);let N=async e=>{if(u&&!j){x(!0);try{let a=localStorage.getItem("access_token");if(!a)return void f("No access token found");let t=await fetch("".concat(c,"/admin/orders/").concat(u.order_id,"/update_status/"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({order_status:e})});if(!t.ok)throw Error("Failed to update order status");let s=await t.json();p(s)}catch(e){console.error("Error updating order status:",e),f("Failed to update order status")}finally{x(!1)}}},B=async e=>{if(u&&!j){x(!0);try{let a=localStorage.getItem("access_token");if(!a)return void f("No access token found");let t=await fetch("".concat(c,"/admin/orders/").concat(u.order_id,"/update_payment_status/"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({payment_status:e})});if(!t.ok)throw Error("Failed to update payment status");let s=await t.json();p(s)}catch(e){console.error("Error updating payment status:",e),f("Failed to update payment status")}finally{x(!1)}}};return!m||h?(0,s.jsxs)("div",{className:o().loadingContainer,children:[(0,s.jsx)("div",{className:o().spinner}),(0,s.jsx)("p",{children:"Loading order details..."})]}):l&&(null==_?void 0:_.is_staff)?O?(0,s.jsxs)("div",{className:o().errorContainer,children:[(0,s.jsx)("h2",{children:"Error"}),(0,s.jsx)("p",{children:O}),(0,s.jsx)("button",{className:o().backButton,onClick:()=>a.push("/admin/orders"),children:"Back to Orders"})]}):u?(0,s.jsx)("div",{className:o().adminOrderDetailsPage,children:(0,s.jsxs)("div",{className:o().container,children:[(0,s.jsxs)("div",{className:o().header,children:[(0,s.jsx)("button",{className:o().backButton,onClick:()=>a.push("/admin/orders"),children:"â† Back to Orders"}),(0,s.jsxs)("h1",{children:["Order Details - #",u.order_number]})]}),(0,s.jsxs)("div",{className:o().orderInfo,children:[(0,s.jsxs)("div",{className:o().infoCard,children:[(0,s.jsx)("h3",{children:"Order Information"}),(0,s.jsxs)("div",{className:o().infoGrid,children:[(0,s.jsxs)("div",{className:o().infoItem,children:[(0,s.jsx)("label",{children:"Order ID:"}),(0,s.jsx)("span",{children:u.order_id})]}),(0,s.jsxs)("div",{className:o().infoItem,children:[(0,s.jsx)("label",{children:"Order Number:"}),(0,s.jsx)("span",{children:u.order_number})]}),(0,s.jsxs)("div",{className:o().infoItem,children:[(0,s.jsx)("label",{children:"Customer:"}),(0,s.jsx)("span",{children:u.user_email})]}),(0,s.jsxs)("div",{className:o().infoItem,children:[(0,s.jsx)("label",{children:"Created:"}),(0,s.jsx)("span",{children:new Date(u.created_at).toLocaleString()})]}),(0,s.jsxs)("div",{className:o().infoItem,children:[(0,s.jsx)("label",{children:"Updated:"}),(0,s.jsx)("span",{children:new Date(u.updated_at).toLocaleString()})]})]})]}),(0,s.jsxs)("div",{className:o().statusCard,children:[(0,s.jsx)("h3",{children:"Status Management"}),(0,s.jsxs)("div",{className:o().statusSection,children:[(0,s.jsxs)("div",{className:o().currentStatus,children:[(0,s.jsx)("label",{children:"Order Status:"}),(0,s.jsx)("span",{className:"".concat(o().statusBadge," ").concat(o()[u.order_status||"pending_payment"]),children:(u.order_status||"pending_payment").toUpperCase().replace("_"," ")})]}),(0,s.jsxs)("div",{className:o().statusButtons,children:[(0,s.jsx)("button",{onClick:()=>N("pending_payment"),disabled:j||"pending_payment"===u.order_status,className:"".concat(o().statusButton," ").concat(o().pendingButton),children:"Pending Payment"}),(0,s.jsx)("button",{onClick:()=>N("processing"),disabled:j||"processing"===u.order_status,className:"".concat(o().statusButton," ").concat(o().processingButton),children:"Processing"}),(0,s.jsx)("button",{onClick:()=>N("shipped"),disabled:j||"shipped"===u.order_status,className:"".concat(o().statusButton," ").concat(o().shippedButton),children:"Shipped"}),(0,s.jsx)("button",{onClick:()=>N("delivered"),disabled:j||"delivered"===u.order_status,className:"".concat(o().statusButton," ").concat(o().deliveredButton),children:"Delivered"}),(0,s.jsx)("button",{onClick:()=>N("cancelled"),disabled:j||"cancelled"===u.order_status,className:"".concat(o().statusButton," ").concat(o().cancelledButton),children:"Cancelled"})]})]}),(0,s.jsxs)("div",{className:o().statusSection,children:[(0,s.jsxs)("div",{className:o().currentStatus,children:[(0,s.jsx)("label",{children:"Payment Status:"}),(0,s.jsx)("span",{className:"".concat(o().statusBadge," ").concat(o()["payment_".concat(u.payment_status||"pending")]),children:(u.payment_status||"pending").toUpperCase()})]}),(0,s.jsxs)("div",{className:o().statusButtons,children:[(0,s.jsx)("button",{onClick:()=>B("pending"),disabled:j||"pending"===u.payment_status,className:"".concat(o().statusButton," ").concat(o().pendingButton),children:"Pending"}),(0,s.jsx)("button",{onClick:()=>B("paid"),disabled:j||"paid"===u.payment_status,className:"".concat(o().statusButton," ").concat(o().paidButton),children:"Paid"}),(0,s.jsx)("button",{onClick:()=>B("failed"),disabled:j||"failed"===u.payment_status,className:"".concat(o().statusButton," ").concat(o().failedButton),children:"Failed"}),(0,s.jsx)("button",{onClick:()=>B("refunded"),disabled:j||"refunded"===u.payment_status,className:"".concat(o().statusButton," ").concat(o().refundedButton),children:"Refunded"})]})]})]}),(0,s.jsxs)("div",{className:o().amountCard,children:[(0,s.jsx)("h3",{children:"Order Amounts"}),(0,s.jsxs)("div",{className:o().amountGrid,children:[(0,s.jsxs)("div",{className:o().amountItem,children:[(0,s.jsx)("label",{children:"Subtotal:"}),(0,s.jsxs)("span",{children:["$",u.subtotal_amount]})]}),(0,s.jsxs)("div",{className:o().amountItem,children:[(0,s.jsx)("label",{children:"Shipping:"}),(0,s.jsxs)("span",{children:["$",u.shipping_cost||"0.00"]})]}),(0,s.jsxs)("div",{className:o().amountItem,children:[(0,s.jsx)("label",{children:"Total:"}),(0,s.jsxs)("span",{className:o().totalAmount,children:["$",u.total_amount]})]})]})]})]}),u.customer_notes&&(0,s.jsxs)("div",{className:o().notesCard,children:[(0,s.jsx)("h3",{children:"Customer Notes"}),(0,s.jsx)("p",{children:u.customer_notes})]}),u.tracking_number&&(0,s.jsxs)("div",{className:o().trackingCard,children:[(0,s.jsx)("h3",{children:"Tracking Information"}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Tracking Number:"})," ",u.tracking_number]})]})]})}):(0,s.jsxs)("div",{className:o().errorContainer,children:[(0,s.jsx)("h2",{children:"Order Not Found"}),(0,s.jsx)("p",{children:"The requested order could not be found."}),(0,s.jsx)("button",{className:o().backButton,onClick:()=>a.push("/admin/orders"),children:"Back to Orders"})]}):null}}},e=>{var a=a=>e(e.s=a);e.O(0,[6063,6707,9800,2352,6530,2214,5748,2333,8187,5980,4676,7698,1659,8538,3516,901,9857,8268,4170,7635,9670,7593,6861,5885,7128,6136,9064,3743,5377,1980,7137,1880,4297,2868,4681,4833,6986,9002,9466,7692,6451,6373,8852,8096,7358],()=>a(2477)),_N_E=e.O()}]);