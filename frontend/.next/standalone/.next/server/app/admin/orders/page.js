(()=>{var e={};e.id=4798,e.ids=[4798],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},12654:(e,r,t)=>{Promise.resolve().then(t.bind(t,74652))},14324:e=>{e.exports={adminOrdersPage:"adminOrders_adminOrdersPage__Fbfm9",container:"adminOrders_container__3gUtJ",header:"adminOrders_header__CpPp2",loadingContainer:"adminOrders_loadingContainer__rjMOX",spinner:"adminOrders_spinner__J4frj",spin:"adminOrders_spin__6KrDi",errorContainer:"adminOrders_errorContainer__mEc3f",filters:"adminOrders_filters__3gkNo",statusFilter:"adminOrders_statusFilter__f8DQj",ordersGrid:"adminOrders_ordersGrid__fY76t",orderCard:"adminOrders_orderCard__TWsTR",orderHeader:"adminOrders_orderHeader__2DRuZ",orderId:"adminOrders_orderId__ok9vm",status:"adminOrders_status__ZmTVE",pending_payment:"adminOrders_pending_payment__cpOsi",processing:"adminOrders_processing__Uz2RV",shipped:"adminOrders_shipped__04LjW",delivered:"adminOrders_delivered__Zxhn_",cancelled:"adminOrders_cancelled__MoI3O",refunded:"adminOrders_refunded___TKsA",failed:"adminOrders_failed__S7WiA",orderDetails:"adminOrders_orderDetails__LsdQQ",paymentStatus:"adminOrders_paymentStatus__KLQ9J",payment_pending:"adminOrders_payment_pending__AXU2h",payment_paid:"adminOrders_payment_paid__t1kR2",payment_failed:"adminOrders_payment_failed__Q_Mjm",payment_refunded:"adminOrders_payment_refunded__zduGE",paymentActions:"adminOrders_paymentActions__ocJaQ",paymentButtons:"adminOrders_paymentButtons__oZ6cz",paymentButton:"adminOrders_paymentButton__OLb1D",pendingButton:"adminOrders_pendingButton__HWYIx",paidButton:"adminOrders_paidButton__k2k_e",failedButton:"adminOrders_failedButton__JjQUj",refundedButton:"adminOrders_refundedButton__nyJEp",orderActions:"adminOrders_orderActions__6SWfX",viewButton:"adminOrders_viewButton__39G6e",emptyState:"adminOrders_emptyState___3K7i"}},15852:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>p,routeModule:()=>c,tree:()=>l});var n=t(65239),s=t(48088),d=t(88170),a=t.n(d),i=t(30893),o={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(r,o);let l={children:["",{children:["admin",{children:["orders",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,58322)),"c:\\Users\\alien\\Downloads\\Malikli-son - Preview\\frontend\\src\\app\\admin\\orders\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,99111)),"c:\\Users\\alien\\Downloads\\Malikli-son - Preview\\frontend\\src\\app\\admin\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,38132)),"c:\\Users\\alien\\Downloads\\Malikli-son - Preview\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,p=["c:\\Users\\alien\\Downloads\\Malikli-son - Preview\\frontend\\src\\app\\admin\\orders\\page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},c=new n.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/admin/orders/page",pathname:"/admin/orders",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},58322:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n});let n=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"c:\\\\Users\\\\alien\\\\Downloads\\\\Malikli-son - Preview\\\\frontend\\\\src\\\\app\\\\admin\\\\orders\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"c:\\Users\\alien\\Downloads\\Malikli-son - Preview\\frontend\\src\\app\\admin\\orders\\page.tsx","default")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},74652:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>p});var n=t(60687),s=t(43210),d=t(54864),a=t(16189),i=t(45067),o=t(14324),l=t.n(o);function p(){let{t:e}=(0,i.useI18n)(),r=(0,a.useRouter)(),{isAuthenticated:t,user:o,isInitialized:p}=(0,d.d4)(e=>e.auth),[u,c]=(0,s.useState)([]),[_,m]=(0,s.useState)(!0),[h,x]=(0,s.useState)(null),[f,v]=(0,s.useState)("all"),[y,g]=(0,s.useState)("all"),[j,O]=(0,s.useState)(null),P=async(e,r)=>{if(t&&o?.is_staff){O(e);try{let t=localStorage.getItem("access_token");if(!t)return void x("No access token found");let n=await fetch(`http://localhost:8000/api/v1/admin/orders/${e}/update_payment_status/`,{method:"PATCH",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({payment_status:r})});if(!n.ok)throw Error("Failed to update payment status");let s=await n.json();c(r=>r.map(r=>r.order_id===e?{...r,payment_status:s.payment_status}:r))}catch(e){console.error("Error updating payment status:",e),x("Failed to update payment status")}finally{O(null)}}},b=u.filter(e=>{let r="all"===f||e.order_status===f,t="all"===y||e.payment_status===y;return r&&t});return!p||_?(0,n.jsxs)("div",{className:l().loadingContainer,children:[(0,n.jsx)("div",{className:l().spinner}),(0,n.jsx)("p",{children:"Loading orders..."})]}):t&&o?.is_staff?h?(0,n.jsxs)("div",{className:l().errorContainer,children:[(0,n.jsx)("h2",{children:"Error"}),(0,n.jsx)("p",{children:h})]}):(0,n.jsx)("div",{className:l().adminOrdersPage,children:(0,n.jsxs)("div",{className:l().container,children:[(0,n.jsxs)("div",{className:l().header,children:[(0,n.jsx)("h1",{children:"Admin - Order Management"}),(0,n.jsx)("p",{children:"Manage all orders in the system"})]}),"        ",(0,n.jsxs)("div",{className:l().filters,children:["          ",(0,n.jsxs)("select",{value:f,onChange:e=>v(e.target.value),className:l().statusFilter,children:[(0,n.jsx)("option",{value:"all",children:"All Order Status"},"all-order-status"),(0,n.jsx)("option",{value:"pending_payment",children:"Pending Payment"},"pending_payment"),(0,n.jsx)("option",{value:"processing",children:"Processing"},"processing"),(0,n.jsx)("option",{value:"shipped",children:"Shipped"},"shipped"),(0,n.jsx)("option",{value:"delivered",children:"Delivered"},"delivered"),(0,n.jsx)("option",{value:"cancelled",children:"Cancelled"},"cancelled"),(0,n.jsx)("option",{value:"refunded",children:"Refunded"},"refunded"),(0,n.jsx)("option",{value:"failed",children:"Failed"},"failed")]}),(0,n.jsxs)("select",{value:y,onChange:e=>g(e.target.value),className:l().statusFilter,children:[(0,n.jsx)("option",{value:"all",children:"All Payment Status"},"all-payment-status"),(0,n.jsx)("option",{value:"pending",children:"Pending"},"pending-payment"),(0,n.jsx)("option",{value:"paid",children:"Paid"},"paid-payment"),(0,n.jsx)("option",{value:"failed",children:"Failed"},"failed-payment"),(0,n.jsx)("option",{value:"refunded",children:"Refunded"},"refunded-payment")]})]}),"        ",(0,n.jsx)("div",{className:l().ordersGrid,children:0===b.length?(0,n.jsxs)("div",{className:l().emptyState,children:[(0,n.jsx)("h3",{children:"No orders found"}),(0,n.jsx)("p",{children:"No orders match the current filters."})]}):b.map((e,t)=>(0,n.jsxs)("div",{className:l().orderCard,children:[(0,n.jsxs)("div",{className:l().orderHeader,children:[(0,n.jsxs)("span",{className:l().orderId,children:["Order #",e.order_id]}),(0,n.jsx)("span",{className:`${l().status} ${l()[e.order_status||"pending_payment"]}`,children:(e.order_status||"pending_payment").toUpperCase().replace("_"," ")})]}),"                ",(0,n.jsxs)("div",{className:l().orderDetails,children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Customer:"})," ",e.user_email]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Total:"})," $",e.total_amount]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Payment Status:"}),(0,n.jsx)("span",{className:`${l().paymentStatus} ${l()[`payment_${e.payment_status||"pending"}`]}`,children:(e.payment_status||"pending").toUpperCase()})]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Created:"})," ",new Date(e.created_at).toLocaleDateString()]})]}),(0,n.jsxs)("div",{className:l().paymentActions,children:[(0,n.jsx)("h4",{children:"Update Payment Status:"}),"                  ",(0,n.jsxs)("div",{className:l().paymentButtons,children:[(0,n.jsx)("button",{className:`${l().paymentButton} ${l().pendingButton}`,onClick:()=>P(e.order_id,"pending"),disabled:j===e.order_id||"pending"===e.payment_status,children:j===e.order_id?"Updating...":"Mark Pending"},`order-${e.order_id||t}-pending`),(0,n.jsx)("button",{className:`${l().paymentButton} ${l().paidButton}`,onClick:()=>P(e.order_id,"paid"),disabled:j===e.order_id||"paid"===e.payment_status,children:j===e.order_id?"Updating...":"Mark Paid"},`order-${e.order_id||t}-paid`),(0,n.jsx)("button",{className:`${l().paymentButton} ${l().failedButton}`,onClick:()=>P(e.order_id,"failed"),disabled:j===e.order_id||"failed"===e.payment_status,children:j===e.order_id?"Updating...":"Mark Failed"},`order-${e.order_id||t}-failed`),(0,n.jsx)("button",{className:`${l().paymentButton} ${l().refundedButton}`,onClick:()=>P(e.order_id,"refunded"),disabled:j===e.order_id||"refunded"===e.payment_status,children:j===e.order_id?"Updating...":"Mark Refunded"},`order-${e.order_id||t}-refunded`)]})]}),"                ",(0,n.jsxs)("div",{className:l().orderActions,children:[(0,n.jsx)("button",{className:l().viewButton,onClick:()=>r.push(`/admin/orders/${e.order_id}`),children:"View Details"}),"                "]})]},`order-${e.order_id||t}`))})]})}):null}},78150:(e,r,t)=>{Promise.resolve().then(t.bind(t,58322))},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},94735:e=>{"use strict";e.exports=require("events")}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[6707,7419,2941,2214,5748,2333,8187,5082,876,7698,1659,1866,7140,7593,1645,8188,6787,9398,2052,3854,2740,6566,9708,9059,8619,7916,7536,7901,1322,658,1410,518,5830,9078,3891,3281,1980,7265,2155,871,2759,2868,4681,9800,719,2664,2846,1847,6593,9243,9717,6886,1114,8146,4018,9272,6373,8852],()=>t(15852));module.exports=n})();