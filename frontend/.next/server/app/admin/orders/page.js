(()=>{var e={};e.id=798,e.ids=[798],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},14324:e=>{e.exports={adminContainer:"adminOrders_adminContainer__jpjvl",header:"adminOrders_header__CpPp2",headerControls:"adminOrders_headerControls__3382g",filters:"adminOrders_filters__3gkNo",filterSelect:"adminOrders_filterSelect__pRPC7",searchInput:"adminOrders_searchInput__rg9Br",errorMessage:"adminOrders_errorMessage__serfc",retryButton:"adminOrders_retryButton__t4LA5"}},17381:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>o});var r=s(65239),a=s(48088),i=s(88170),n=s.n(i),d=s(30893),l={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);s.d(t,l);let o={children:["",{children:["admin",{children:["orders",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,58322)),"C:\\Users\\alien\\Downloads\\Malikli-son - Preview\\frontend\\src\\app\\admin\\orders\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,99111)),"C:\\Users\\alien\\Downloads\\Malikli-son - Preview\\frontend\\src\\app\\admin\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,94431)),"C:\\Users\\alien\\Downloads\\Malikli-son - Preview\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\alien\\Downloads\\Malikli-son - Preview\\frontend\\src\\app\\admin\\orders\\page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/orders/page",pathname:"/admin/orders",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29643:e=>{e.exports={orderDetailContainer:"AdminOrderDetail_orderDetailContainer__yUrtX",header:"AdminOrderDetail_header__f5Wst",backButton:"AdminOrderDetail_backButton__YEOR5",detailGrid:"AdminOrderDetail_detailGrid__PMXtc",section:"AdminOrderDetail_section__NL2wT",summaryGrid:"AdminOrderDetail_summaryGrid__v300t",summaryItem:"AdminOrderDetail_summaryItem__P7Kmk",statusBadge:"AdminOrderDetail_statusBadge__sXN_W",customerInfo:"AdminOrderDetail_customerInfo___PL0R",customerItem:"AdminOrderDetail_customerItem__cksXJ",itemsTable:"AdminOrderDetail_itemsTable__jcybf",tableHeader:"AdminOrderDetail_tableHeader__L1F7i",tableRow:"AdminOrderDetail_tableRow__BszyI",productCell:"AdminOrderDetail_productCell__J_lp9",productImage:"AdminOrderDetail_productImage__1VJ3F",itemImage:"AdminOrderDetail_itemImage__Gl8eh",productInfo:"AdminOrderDetail_productInfo___9YnL",productName:"AdminOrderDetail_productName__eYd63",productVariant:"AdminOrderDetail_productVariant__hSpAf",quantityCell:"AdminOrderDetail_quantityCell__YHs1p",priceCell:"AdminOrderDetail_priceCell__2wPK7",subtotalCell:"AdminOrderDetail_subtotalCell__K6A22",totalBreakdown:"AdminOrderDetail_totalBreakdown__BcQ0d",totalRow:"AdminOrderDetail_totalRow__t4DQf",finalTotal:"AdminOrderDetail_finalTotal___cbZd",adminActions:"AdminOrderDetail_adminActions__aZNNa",actionButton:"AdminOrderDetail_actionButton__ABWtj",successButton:"AdminOrderDetail_successButton__vrhRC",failButton:"AdminOrderDetail_failButton__ZkMz5",statusUpdateSection:"AdminOrderDetail_statusUpdateSection__D1oEs",statusButtons:"AdminOrderDetail_statusButtons__NCem2",statusButton:"AdminOrderDetail_statusButton__JmpCg",currentStatus:"AdminOrderDetail_currentStatus__YTwhH"}},33873:e=>{"use strict";e.exports=require("path")},37914:e=>{e.exports={orderListContainer:"AdminOrderList_orderListContainer__Gsaf6",listTitle:"AdminOrderList_listTitle__4GpiA",loadingContainer:"AdminOrderList_loadingContainer__2tKbk",spinner:"AdminOrderList_spinner__EXn_G",spin:"AdminOrderList_spin__S2BBv",emptyState:"AdminOrderList_emptyState__4jy6J",emptyIcon:"AdminOrderList_emptyIcon__PUBbY",orderList:"AdminOrderList_orderList__RSWVr",orderCard:"AdminOrderList_orderCard__xH3k1",orderHeader:"AdminOrderList_orderHeader__YfSZ2",orderInfo:"AdminOrderList_orderInfo__Kswpl",orderNumber:"AdminOrderList_orderNumber__t54sV",orderDate:"AdminOrderList_orderDate__8y1Z_",customerInfo:"AdminOrderList_customerInfo__1UD1Q",customerEmail:"AdminOrderList_customerEmail__OB7b5",orderStatus:"AdminOrderList_orderStatus__dvhSa",statusGroup:"AdminOrderList_statusGroup__7jPDj",statusBadge:"AdminOrderList_statusBadge__zWzi_",orderTotal:"AdminOrderList_orderTotal__ELIkH",orderItems:"AdminOrderList_orderItems__htGZV",itemsList:"AdminOrderList_itemsList__t9JdI",orderItem:"AdminOrderList_orderItem__jw19v",itemImage:"AdminOrderList_itemImage__GGQIV",productImage:"AdminOrderList_productImage__izBiQ",itemInfo:"AdminOrderList_itemInfo__Kz06c",itemName:"AdminOrderList_itemName__XIcBo",itemVariant:"AdminOrderList_itemVariant__J_rJp",itemQuantity:"AdminOrderList_itemQuantity__PWUS9",moreItems:"AdminOrderList_moreItems__Uwfcu",orderActions:"AdminOrderList_orderActions__iCWwj",viewButton:"AdminOrderList_viewButton__VCyzZ",actionButton:"AdminOrderList_actionButton__aWUpN",successButton:"AdminOrderList_successButton__0BKBr",failButton:"AdminOrderList_failButton__45t_D"}},44705:(e,t,s)=>{Promise.resolve().then(s.bind(s,72251))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56639:e=>{e.exports={statsContainer:"AdminOrderStats_statsContainer__ZjU_s",statsTitle:"AdminOrderStats_statsTitle__czonU",statsGrid:"AdminOrderStats_statsGrid__f3VDw",statCard:"AdminOrderStats_statCard__A73NL",statIcon:"AdminOrderStats_statIcon__49Wif",statContent:"AdminOrderStats_statContent__bZP8n",statValue:"AdminOrderStats_statValue__uDH4u",statTitle:"AdminOrderStats_statTitle__PYOMY"}},58322:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\alien\\\\Downloads\\\\Malikli-son - Preview\\\\frontend\\\\src\\\\app\\\\admin\\\\orders\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\alien\\Downloads\\Malikli-son - Preview\\frontend\\src\\app\\admin\\orders\\page.tsx","default")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70440:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(31658);let a=async e=>[{type:"image/x-icon",sizes:"256x256",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},72251:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var r=s(60687),a=s(43210),i=s(16189),n=s(15471),d=s(30474),l=s(37914),o=s.n(l);function c({orders:e,loading:t,onOrderSelect:s,onStatusUpdate:a}){let i=e=>{switch(e){case"pending_payment":case"pending":return"#f39c12";case"processing":return"#3498db";case"shipped":return"#9b59b6";case"delivered":case"paid":return"#27ae60";case"cancelled":case"failed":return"#e74c3c";default:return"#95a5a6"}},n=(e,t)=>{let s=i(e);return(0,r.jsx)("span",{className:o().statusBadge,style:{backgroundColor:s},children:e.replace("_"," ").toUpperCase()})},l=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),c=e=>e.user?`${e.user.first_name||""} ${e.user.last_name||""}`.trim()||e.user.username||e.user.email:e.email_for_guest||"Guest",m=e=>e.user?.email||e.email_for_guest||"";return t?(0,r.jsxs)("div",{className:o().loadingContainer,children:[(0,r.jsx)("div",{className:o().spinner}),(0,r.jsx)("p",{children:"Loading orders..."})]}):0===e.length?(0,r.jsxs)("div",{className:o().emptyState,children:[(0,r.jsx)("div",{className:o().emptyIcon,children:"\uD83D\uDCE6"}),(0,r.jsx)("h3",{children:"No orders found"}),(0,r.jsx)("p",{children:"No orders match your current filters."})]}):(0,r.jsxs)("div",{className:o().orderListContainer,children:[(0,r.jsxs)("h2",{className:o().listTitle,children:["Orders (",e.length,")"]}),(0,r.jsx)("div",{className:o().orderList,children:e.map(e=>(0,r.jsxs)("div",{className:o().orderCard,children:[(0,r.jsxs)("div",{className:o().orderHeader,children:[(0,r.jsxs)("div",{className:o().orderInfo,children:[(0,r.jsxs)("h3",{className:o().orderNumber,children:["Order #",e.order_number]}),(0,r.jsx)("p",{className:o().orderDate,children:l(e.created_at)}),(0,r.jsxs)("p",{className:o().customerInfo,children:[c(e),m(e)&&(0,r.jsxs)("span",{className:o().customerEmail,children:["(",m(e),")"]})]})]}),(0,r.jsxs)("div",{className:o().orderStatus,children:[(0,r.jsxs)("div",{className:o().statusGroup,children:[(0,r.jsx)("label",{children:"Order Status:"}),n(e.order_status,"order")]}),(0,r.jsxs)("div",{className:o().statusGroup,children:[(0,r.jsx)("label",{children:"Payment:"}),n(e.payment_status,"payment")]}),(0,r.jsx)("div",{className:o().orderTotal,children:(0,r.jsxs)("strong",{children:["$",parseFloat(e.total_amount).toFixed(2)]})})]})]}),(0,r.jsxs)("div",{className:o().orderItems,children:[(0,r.jsxs)("h4",{children:["Items (",e.items.length,"):"]}),(0,r.jsxs)("div",{className:o().itemsList,children:[e.items.slice(0,3).map(e=>(0,r.jsxs)("div",{className:o().orderItem,children:[e.product_image_url&&(0,r.jsx)("div",{className:o().itemImage,children:(0,r.jsx)(d.default,{src:e.product_image_url,alt:e.product_name_snapshot,width:40,height:40,className:o().productImage})}),(0,r.jsxs)("div",{className:o().itemInfo,children:[(0,r.jsx)("span",{className:o().itemName,children:e.product_name_snapshot}),(e.variant_name_snapshot||e.color||e.size)&&(0,r.jsx)("span",{className:o().itemVariant,children:[e.variant_name_snapshot,e.color,e.size].filter(Boolean).join(", ")}),(0,r.jsxs)("span",{className:o().itemQuantity,children:["Qty: ",e.quantity," \xd7 $",e.price_per_unit]})]})]},e.id)),e.items.length>3&&(0,r.jsxs)("div",{className:o().moreItems,children:["+",e.items.length-3," more items"]})]})]}),(0,r.jsxs)("div",{className:o().orderActions,children:[(0,r.jsx)("button",{onClick:()=>s(e),className:o().viewButton,children:"View Details"}),"pending"===e.payment_status&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>a(e.order_id,"mark_payment_successful"),className:`${o().actionButton} ${o().successButton}`,children:"Mark as Successful"}),(0,r.jsx)("button",{onClick:()=>a(e.order_id,"mark_payment_failed"),className:`${o().actionButton} ${o().failButton}`,children:"Mark as Failed"})]})]})]},e.order_id))})]})}var m=s(56639),u=s.n(m);function _({stats:e}){let t=[{title:"Total Orders",value:e.total_orders,icon:"\uD83D\uDCE6",color:"#4ECDC4",bgColor:"#f0fdfc"},{title:"Pending Payment",value:e.pending_orders,icon:"⏳",color:"#f39c12",bgColor:"#fef9e7"},{title:"Processing",value:e.processing_orders,icon:"\uD83D\uDD04",color:"#3498db",bgColor:"#ebf8ff"},{title:"Completed",value:e.completed_orders,icon:"✅",color:"#27ae60",bgColor:"#f0fff4"},{title:"Total Revenue",value:`$${parseFloat(e.total_revenue).toLocaleString()}`,icon:"\uD83D\uDCB0",color:"#8e44ad",bgColor:"#f8f4ff"},{title:"Recent Orders (30d)",value:e.recent_orders,icon:"\uD83D\uDCC8",color:"#e67e22",bgColor:"#fef7f0"}];return(0,r.jsxs)("div",{className:u().statsContainer,children:[(0,r.jsx)("h2",{className:u().statsTitle,children:"Dashboard Overview"}),(0,r.jsx)("div",{className:u().statsGrid,children:t.map((e,t)=>(0,r.jsxs)("div",{className:u().statCard,style:{backgroundColor:e.bgColor},children:[(0,r.jsx)("div",{className:u().statIcon,children:e.icon}),(0,r.jsxs)("div",{className:u().statContent,children:[(0,r.jsx)("div",{className:u().statValue,style:{color:e.color},children:e.value}),(0,r.jsx)("div",{className:u().statTitle,children:e.title})]})]},t))})]})}var p=s(29643),h=s.n(p);function x({order:e,onBack:t,onStatusUpdate:s}){let[i,n]=(0,a.useState)(!1),l=e=>{switch(e){case"pending_payment":case"pending":return"#f39c12";case"processing":return"#3498db";case"shipped":return"#9b59b6";case"delivered":case"paid":return"#27ae60";case"cancelled":case"failed":return"#e74c3c";default:return"#95a5a6"}},o=e=>{let t=l(e);return(0,r.jsx)("span",{className:h().statusBadge,style:{backgroundColor:t},children:e.replace("_"," ").toUpperCase()})},c=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),m=async(t,r)=>{n(!0);try{await s(e.order_id,t,r)}finally{n(!1)}},u=e.user?{name:`${e.user.first_name||""} ${e.user.last_name||""}`.trim()||e.user.username,email:e.user.email,phone:e.user.phone_number}:{name:"Guest Customer",email:e.email_for_guest,phone:null};return(0,r.jsxs)("div",{className:h().orderDetailContainer,children:[(0,r.jsxs)("div",{className:h().header,children:[(0,r.jsx)("button",{onClick:t,className:h().backButton,children:"← Back to Orders"}),(0,r.jsxs)("h1",{children:["Order Details - #",e.order_number]})]}),(0,r.jsxs)("div",{className:h().detailGrid,children:[(0,r.jsxs)("div",{className:h().section,children:[(0,r.jsx)("h2",{children:"Order Summary"}),(0,r.jsxs)("div",{className:h().summaryGrid,children:[(0,r.jsxs)("div",{className:h().summaryItem,children:[(0,r.jsx)("label",{children:"Order ID:"}),(0,r.jsx)("span",{children:e.order_id})]}),(0,r.jsxs)("div",{className:h().summaryItem,children:[(0,r.jsx)("label",{children:"Order Number:"}),(0,r.jsxs)("span",{children:["#",e.order_number]})]}),(0,r.jsxs)("div",{className:h().summaryItem,children:[(0,r.jsx)("label",{children:"Created:"}),(0,r.jsx)("span",{children:c(e.created_at)})]}),(0,r.jsxs)("div",{className:h().summaryItem,children:[(0,r.jsx)("label",{children:"Last Updated:"}),(0,r.jsx)("span",{children:c(e.updated_at)})]}),(0,r.jsxs)("div",{className:h().summaryItem,children:[(0,r.jsx)("label",{children:"Order Status:"}),o(e.order_status)]}),(0,r.jsxs)("div",{className:h().summaryItem,children:[(0,r.jsx)("label",{children:"Payment Status:"}),o(e.payment_status)]}),e.tracking_number&&(0,r.jsxs)("div",{className:h().summaryItem,children:[(0,r.jsx)("label",{children:"Tracking Number:"}),(0,r.jsx)("span",{children:e.tracking_number})]})]})]}),(0,r.jsxs)("div",{className:h().section,children:[(0,r.jsx)("h2",{children:"Customer Information"}),(0,r.jsxs)("div",{className:h().customerInfo,children:[(0,r.jsxs)("div",{className:h().customerItem,children:[(0,r.jsx)("label",{children:"Name:"}),(0,r.jsx)("span",{children:u.name})]}),(0,r.jsxs)("div",{className:h().customerItem,children:[(0,r.jsx)("label",{children:"Email:"}),(0,r.jsx)("span",{children:u.email})]}),u.phone&&(0,r.jsxs)("div",{className:h().customerItem,children:[(0,r.jsx)("label",{children:"Phone:"}),(0,r.jsx)("span",{children:u.phone})]}),e.customer_notes&&(0,r.jsxs)("div",{className:h().customerItem,children:[(0,r.jsx)("label",{children:"Customer Notes:"}),(0,r.jsx)("span",{children:e.customer_notes})]})]})]}),(0,r.jsxs)("div",{className:h().section,children:[(0,r.jsxs)("h2",{children:["Order Items (",e.items.length,")"]}),(0,r.jsxs)("div",{className:h().itemsTable,children:[(0,r.jsxs)("div",{className:h().tableHeader,children:[(0,r.jsx)("div",{children:"Product"}),(0,r.jsx)("div",{children:"Quantity"}),(0,r.jsx)("div",{children:"Unit Price"}),(0,r.jsx)("div",{children:"Subtotal"})]}),e.items.map(e=>(0,r.jsxs)("div",{className:h().tableRow,children:[(0,r.jsxs)("div",{className:h().productCell,children:[e.product_image_url&&(0,r.jsx)("div",{className:h().productImage,children:(0,r.jsx)(d.default,{src:e.product_image_url,alt:e.product_name_snapshot,width:60,height:60,className:h().itemImage})}),(0,r.jsxs)("div",{className:h().productInfo,children:[(0,r.jsx)("div",{className:h().productName,children:e.product_name_snapshot}),(e.variant_name_snapshot||e.color||e.size)&&(0,r.jsx)("div",{className:h().productVariant,children:[e.variant_name_snapshot,e.color,e.size].filter(Boolean).join(", ")})]})]}),(0,r.jsx)("div",{className:h().quantityCell,children:e.quantity}),(0,r.jsxs)("div",{className:h().priceCell,children:["$",parseFloat(e.price_per_unit).toFixed(2)]}),(0,r.jsxs)("div",{className:h().subtotalCell,children:["$",parseFloat(e.subtotal).toFixed(2)]})]},e.id))]})]}),(0,r.jsxs)("div",{className:h().section,children:[(0,r.jsx)("h2",{children:"Order Total"}),(0,r.jsxs)("div",{className:h().totalBreakdown,children:[(0,r.jsxs)("div",{className:h().totalRow,children:[(0,r.jsx)("span",{children:"Subtotal:"}),(0,r.jsxs)("span",{children:["$",parseFloat(e.subtotal_amount).toFixed(2)]})]}),parseFloat(e.discount_amount)>0&&(0,r.jsxs)("div",{className:h().totalRow,children:[(0,r.jsx)("span",{children:"Discount:"}),(0,r.jsxs)("span",{children:["-$",parseFloat(e.discount_amount).toFixed(2)]})]}),parseFloat(e.shipping_cost)>0&&(0,r.jsxs)("div",{className:h().totalRow,children:[(0,r.jsx)("span",{children:"Shipping:"}),(0,r.jsxs)("span",{children:["$",parseFloat(e.shipping_cost).toFixed(2)]})]}),parseFloat(e.tax_amount)>0&&(0,r.jsxs)("div",{className:h().totalRow,children:[(0,r.jsx)("span",{children:"Tax:"}),(0,r.jsxs)("span",{children:["$",parseFloat(e.tax_amount).toFixed(2)]})]}),(0,r.jsxs)("div",{className:`${h().totalRow} ${h().finalTotal}`,children:[(0,r.jsx)("span",{children:"Total:"}),(0,r.jsxs)("span",{children:["$",parseFloat(e.total_amount).toFixed(2)]})]})]})]}),(0,r.jsxs)("div",{className:h().section,children:[(0,r.jsx)("h2",{children:"Admin Actions"}),(0,r.jsxs)("div",{className:h().adminActions,children:["pending"===e.payment_status&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>m("mark_payment_successful"),className:`${h().actionButton} ${h().successButton}`,disabled:i,children:i?"Processing...":"Mark Payment as Successful"}),(0,r.jsx)("button",{onClick:()=>m("mark_payment_failed"),className:`${h().actionButton} ${h().failButton}`,disabled:i,children:i?"Processing...":"Mark Payment as Failed"})]}),(0,r.jsxs)("div",{className:h().statusUpdateSection,children:[(0,r.jsx)("h3",{children:"Update Order Status"}),(0,r.jsx)("div",{className:h().statusButtons,children:["processing","shipped","delivered","cancelled"].map(t=>(0,r.jsx)("button",{onClick:()=>m("update_status",t),className:`${h().statusButton} ${e.order_status===t?h().currentStatus:""}`,disabled:i||e.order_status===t,children:t.replace("_"," ").toUpperCase()},t))})]})]})]})]})]})}var j=s(14324),v=s.n(j);function f(){(0,i.useRouter)();let{user:e,isAuthenticated:t}=(0,n.G)(e=>e.auth),[s,d]=(0,a.useState)([]),[l,o]=(0,a.useState)(null),[m,u]=(0,a.useState)(null),[p,h]=(0,a.useState)(!0),[j,f]=(0,a.useState)(null),[g,N]=(0,a.useState)("all"),[A,O]=(0,a.useState)("all"),[b,y]=(0,a.useState)(""),C=async()=>{try{h(!0);let t=localStorage.getItem("access_token");if(console.log("Admin orders fetch - Token:",t?"Present":"Missing"),console.log("Admin orders fetch - User:",e),console.log("Admin orders fetch - Is Staff:",e?.is_staff),!t)throw Error("No access token found");let s=new URLSearchParams;"all"!==g&&s.append("status",g),"all"!==A&&s.append("payment_status",A),b&&s.append("search",b);let r="http://localhost:8000/api/v1";console.log("Admin orders fetch - URL:",`${r}/admin/orders/?${s.toString()}`);let a=await fetch(`${r}/admin/orders/?${s.toString()}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(console.log("Admin orders fetch - Response status:",a.status),!a.ok){let e=await a.text();throw console.log("Admin orders fetch - Error response:",e),Error(`Failed to fetch orders: ${a.status} ${a.statusText}`)}let i=await a.json();console.log("Admin orders fetch - Success data:",i),d(i.results||i)}catch(e){console.error("Admin orders fetch - Error:",e),f(e instanceof Error?e.message:"An error occurred")}finally{h(!1)}},I=async()=>{try{let e=localStorage.getItem("access_token"),t=await fetch("http://localhost:8000/api/v1/admin/orders/stats/",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(t.ok){let e=await t.json();o(e)}}catch(e){console.error("Failed to fetch stats:",e)}},S=async(e,t,s)=>{try{let r=localStorage.getItem("access_token"),a={action:t};s&&(a.status=s);let i=await fetch(`http://localhost:8000/api/v1/admin/orders/${e}/update-status/`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify(a)});if(!i.ok){let e=await i.json();throw Error(e.error||"Failed to update order status")}let n=await i.json();d(t=>t.map(t=>t.order_id===e?{...t,...n.order}:t)),m?.order_id===e&&u({...m,...n.order}),I(),alert(n.message)}catch(e){alert(e instanceof Error?e.message:"Failed to update order")}};return t&&e?.is_staff?(0,r.jsxs)("div",{className:v().adminContainer,children:[(0,r.jsxs)("div",{className:v().header,children:[(0,r.jsx)("h1",{children:"Order Management Dashboard"}),!m&&(0,r.jsx)("div",{className:v().headerControls,children:(0,r.jsxs)("div",{className:v().filters,children:[(0,r.jsxs)("select",{value:g,onChange:e=>N(e.target.value),className:v().filterSelect,children:[(0,r.jsx)("option",{value:"all",children:"All Statuses"}),(0,r.jsx)("option",{value:"pending_payment",children:"Pending Payment"}),(0,r.jsx)("option",{value:"processing",children:"Processing"}),(0,r.jsx)("option",{value:"shipped",children:"Shipped"}),(0,r.jsx)("option",{value:"delivered",children:"Delivered"}),(0,r.jsx)("option",{value:"cancelled",children:"Cancelled"}),(0,r.jsx)("option",{value:"failed",children:"Failed"})]}),(0,r.jsxs)("select",{value:A,onChange:e=>O(e.target.value),className:v().filterSelect,children:[(0,r.jsx)("option",{value:"all",children:"All Payment Status"}),(0,r.jsx)("option",{value:"pending",children:"Pending"}),(0,r.jsx)("option",{value:"paid",children:"Paid"}),(0,r.jsx)("option",{value:"failed",children:"Failed"}),(0,r.jsx)("option",{value:"refunded_partial",children:"Refunded (Partial)"}),(0,r.jsx)("option",{value:"refunded_full",children:"Refunded (Full)"})]}),(0,r.jsx)("input",{type:"text",placeholder:"Search by order number or email...",value:b,onChange:e=>y(e.target.value),className:v().searchInput})]})})]}),j&&(0,r.jsxs)("div",{className:v().errorMessage,children:[(0,r.jsxs)("p",{children:["Error: ",j]}),(0,r.jsx)("button",{onClick:C,className:v().retryButton,children:"Retry"})]}),m?(0,r.jsx)(x,{order:m,onBack:()=>{u(null)},onStatusUpdate:S}):(0,r.jsxs)(r.Fragment,{children:[l&&(0,r.jsx)(_,{stats:l}),(0,r.jsx)(c,{orders:s,loading:p,onOrderSelect:e=>{u(e)},onStatusUpdate:S})]})]}):null}},74075:e=>{"use strict";e.exports=require("zlib")},78335:()=>{},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},94735:e=>{"use strict";e.exports=require("events")},96487:()=>{},97350:(e,t,s)=>{Promise.resolve().then(s.bind(s,58322))},99111:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,metadata:()=>a});var r=s(37413);let a={title:"Admin Panel - Malikli",description:"Admin panel for managing orders and system settings"};function i({children:e}){return(0,r.jsx)("div",{style:{minHeight:"100vh",backgroundColor:"#f8f9fa"},children:e})}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[447,966,658,325],()=>s(17381));module.exports=r})();