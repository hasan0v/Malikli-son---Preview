(()=>{var e={};e.id=279,e.ids=[279],e.modules={58:e=>{e.exports={customerInformation:"CustomerInformation_customerInformation__QokeJ",formSection:"CustomerInformation_formSection__xvxrw",sectionTitle:"CustomerInformation_sectionTitle__E38lE",formGrid:"CustomerInformation_formGrid__vES41",formGroup:"CustomerInformation_formGroup__0oSia",fullWidth:"CustomerInformation_fullWidth__O3ChX",label:"CustomerInformation_label__95u6D",required:"CustomerInformation_required__3E3P5",input:"CustomerInformation_input__FUsoQ",error:"CustomerInformation_error__d6HXA",select:"CustomerInformation_select__jvWgj",errorMessage:"CustomerInformation_errorMessage__vT0_X",checkboxGroup:"CustomerInformation_checkboxGroup__ob8w_",checkbox:"CustomerInformation_checkbox__PBNHe",checkboxLabel:"CustomerInformation_checkboxLabel__Eqz7J",billingSection:"CustomerInformation_billingSection__U_mnB",hidden:"CustomerInformation_hidden__8ZMXW",autoSaveStatus:"CustomerInformation_autoSaveStatus__S29Cr",savedAddressesSection:"CustomerInformation_savedAddressesSection__LwVDW",savedAddressesTitle:"CustomerInformation_savedAddressesTitle__PVDuR",loadingAddresses:"CustomerInformation_loadingAddresses__CwToM",savedAddressesList:"CustomerInformation_savedAddressesList__KeDhO",savedAddressItem:"CustomerInformation_savedAddressItem__TyGPd",savedAddressInfo:"CustomerInformation_savedAddressInfo__kIZtl",savedAddressName:"CustomerInformation_savedAddressName__6lCRz",savedAddressText:"CustomerInformation_savedAddressText__DfR5j",useSavedAddressBtn:"CustomerInformation_useSavedAddressBtn__YlWIs",selectedAddress:"CustomerInformation_selectedAddress__H92fm",defaultBadge:"CustomerInformation_defaultBadge__onXPp",savedAddressActions:"CustomerInformation_savedAddressActions__r6ZKp",deleteSavedAddressBtn:"CustomerInformation_deleteSavedAddressBtn__IAtZn",addNewAddressBtn:"CustomerInformation_addNewAddressBtn__uONzO",selectedAddressDisplay:"CustomerInformation_selectedAddressDisplay__7Lm9E",selectedAddressHeader:"CustomerInformation_selectedAddressHeader__nX7yI",selectedAddressTitle:"CustomerInformation_selectedAddressTitle__wEhkD",selectedAddressDetails:"CustomerInformation_selectedAddressDetails__HxX9k",selectedAddressRow:"CustomerInformation_selectedAddressRow__9o803",addressFormHeader:"CustomerInformation_addressFormHeader___RnQ8",addressModeNote:"CustomerInformation_addressModeNote__aIzfk"}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},8576:(e,t,o)=>{Promise.resolve().then(o.bind(o,54787))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30926:e=>{e.exports={container:"ShippingStep_container__QMpiE",title:"ShippingStep_title__ksTdl",shippingMethods:"ShippingStep_shippingMethods__PjLD7",shippingMethod:"ShippingStep_shippingMethod__ZTGI0",selected:"ShippingStep_selected__XZqLS",justSelected:"ShippingStep_justSelected__G6_tI",selectionPulse:"ShippingStep_selectionPulse__PSyfm",methodContent:"ShippingStep_methodContent__hJEbt",methodHeader:"ShippingStep_methodHeader__gfSZM",radioButton:"ShippingStep_radioButton__7KUXs",radioInput:"ShippingStep_radioInput___w_H5",radioMark:"ShippingStep_radioMark__Q6CEV",methodInfo:"ShippingStep_methodInfo__EFHe9",methodName:"ShippingStep_methodName__7BPwI",methodDescription:"ShippingStep_methodDescription__nYfEj",methodPricing:"ShippingStep_methodPricing__kRCjU",methodPrice:"ShippingStep_methodPrice__mmFw8",deliveryTime:"ShippingStep_deliveryTime__OFKX9",freeShipping:"ShippingStep_freeShipping__m7GzQ",errorMessage:"ShippingStep_errorMessage__Naa1j",shippingInfo:"ShippingStep_shippingInfo__HUiIW",infoIcon:"ShippingStep_infoIcon__yD5e3",infoText:"ShippingStep_infoText__dmHLJ",fadeInUp:"ShippingStep_fadeInUp__c4v5w"}},33873:e=>{"use strict";e.exports=require("path")},42349:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>D});var s=o(60687),n=o(43210),r=o(54864),i=o(16189),c=o(26335);let a=[{id:1,name:"information",title:"checkout.steps.information",completed:!1,current:!0,accessible:!0},{id:2,name:"shipping",title:"checkout.steps.shipping",completed:!1,current:!1,accessible:!1},{id:3,name:"payment",title:"checkout.steps.payment",completed:!1,current:!1,accessible:!1},{id:4,name:"confirmation",title:"checkout.steps.confirmation",completed:!1,current:!1,accessible:!1}],d=[{id:"card",name:"Visa/Mastercard",type:"card",icon:"\uD83D\uDCB3",description:"checkout.payment.cardDescription"}],l=async(e,t)=>{let o=await fetch("http://localhost:8000/api/v1/auth/addresses/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(e)});if(!o.ok){let e=await o.text();throw console.error("Save API Error Response:",e),Error((()=>{try{return JSON.parse(e)}catch{return{message:e}}})().message||`HTTP error! status: ${o.status}`)}return await o.json()},u=async(e,t)=>{let o=await fetch(`http://localhost:8000/api/v1/auth/addresses/${e}/`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}});if(!o.ok)throw Error((await o.json().catch(()=>({}))).message||`HTTP error! status: ${o.status}`)};var m=o(72725),h=o(15191),p=o(2381),_=o(42379),f=o.n(_),x=o(58),v=o.n(x);function g({checkoutData:e,updateCheckoutData:t,errors:o,isAuthenticated:r,userAddresses:i=[],isLoadingAddresses:c=!1,autoSaveInProgress:a=!1,onLoadSavedAddress:d,onDeleteAddress:l,selectedAddressId:u=null}){let{t:m}=(0,p.useI18n)(),[h,_]=(0,n.useState)(!0),f=(o,s)=>{t({customer_info:{...e.customer_info,[o]:s}})},x=(o,s)=>{t({shipping_address:{...e.shipping_address,[o]:s}})},g=e=>{d?.(e),_(!1)},k=u&&!h,j=i.find(e=>e.id===u);return(0,s.jsxs)("div",{className:v().container,children:["      ",(0,s.jsxs)("div",{className:v().section,children:[(0,s.jsx)("h2",{className:v().sectionTitle,children:m("checkout.customerInfo.title")}),r&&(0,s.jsxs)("div",{className:v().authenticatedNotice,children:["✓ ",m("checkout.customerInfo.loggedIn"),a&&(0,s.jsxs)("div",{className:v().autoSaveStatus,children:["\uD83D\uDD04 ",m("checkout.customerInfo.saving")]})]}),"        ",r&&i.length>0&&(0,s.jsxs)("div",{className:v().savedAddressesSection,children:[(0,s.jsx)("h3",{className:v().savedAddressesTitle,children:m("checkout.customerInfo.savedAddresses")}),c?(0,s.jsx)("div",{className:v().loadingAddresses,children:m("checkout.customerInfo.loadingAddresses")}):(0,s.jsx)("div",{className:v().savedAddressesList,children:i.map(e=>(0,s.jsxs)("div",{className:`${v().savedAddressItem} ${u===e.id?v().selectedAddress:""}`,children:[(0,s.jsxs)("div",{className:v().savedAddressInfo,children:[(0,s.jsxs)("div",{className:v().savedAddressName,children:[e.recipient_name,e.is_default_shipping&&(0,s.jsx)("span",{className:v().defaultBadge,children:m("checkout.customerInfo.default")})]}),(0,s.jsxs)("div",{className:v().savedAddressText,children:[e.street_address,e.address_line_2&&`, ${e.address_line_2}`,",",e.city,", ",e.postal_code]})]}),(0,s.jsxs)("div",{className:v().savedAddressActions,children:["                      ",(0,s.jsx)("button",{type:"button",className:v().useSavedAddressBtn,onClick:()=>g(e),children:m("checkout.customerInfo.use")}),(0,s.jsx)("button",{type:"button",className:v().deleteSavedAddressBtn,onClick:()=>l?.(e.id),children:m("checkout.customerInfo.delete")})]})]},e.id))}),(0,s.jsxs)("button",{type:"button",className:v().addNewAddressBtn,onClick:()=>{t({shipping_address:{street_address:"",apartment:"",city:"",state:"",postal_code:"",country:"BY"}}),_(!0)},children:["+ ",m("checkout.customerInfo.addNewAddress")]})]}),"        ",k&&j&&(0,s.jsxs)("div",{className:v().selectedAddressDisplay,children:[(0,s.jsx)("div",{className:v().selectedAddressHeader,children:(0,s.jsx)("h3",{className:v().selectedAddressTitle,children:m("checkout.customerInfo.selectedAddress")})}),(0,s.jsxs)("div",{className:v().selectedAddressDetails,children:[(0,s.jsx)("div",{className:v().selectedAddressRow,children:(0,s.jsx)("strong",{children:j.recipient_name})}),(0,s.jsxs)("div",{className:v().selectedAddressRow,children:[j.street_address,j.address_line_2&&`, ${j.address_line_2}`]}),(0,s.jsxs)("div",{className:v().selectedAddressRow,children:[j.city,", ",j.state_province," ",j.postal_code]}),j.phone_number&&(0,s.jsxs)("div",{className:v().selectedAddressRow,children:[m("checkout.customerInfo.phoneLabel"),": ",j.phone_number]})]})]}),(0,s.jsxs)("div",{className:v().formRow,children:[(0,s.jsxs)("div",{className:v().formGroup,children:["            ",(0,s.jsxs)("label",{htmlFor:"firstName",className:v().label,children:[m("checkout.customerInfo.firstName")," ",(0,s.jsx)("span",{className:v().required,children:"*"})]}),(0,s.jsx)("input",{type:"text",id:"firstName",value:e.customer_info.first_name,onChange:e=>f("first_name",e.target.value),className:`${v().input} ${o.first_name?v().inputError:""}`,placeholder:m("checkout.customerInfo.firstNamePlaceholder")}),o.first_name&&(0,s.jsx)("span",{className:v().errorText,children:o.first_name})]}),(0,s.jsxs)("div",{className:v().formGroup,children:["            ",(0,s.jsxs)("label",{htmlFor:"lastName",className:v().label,children:[m("checkout.customerInfo.lastName")," ",(0,s.jsx)("span",{className:v().required,children:"*"})]}),(0,s.jsx)("input",{type:"text",id:"lastName",value:e.customer_info.last_name,onChange:e=>f("last_name",e.target.value),className:`${v().input} ${o.last_name?v().inputError:""}`,placeholder:m("checkout.customerInfo.lastNamePlaceholder")}),o.last_name&&(0,s.jsx)("span",{className:v().errorText,children:o.last_name})]})]}),(0,s.jsxs)("div",{className:v().formRow,children:[(0,s.jsxs)("div",{className:v().formGroup,children:["            ",(0,s.jsxs)("label",{htmlFor:"email",className:v().label,children:[m("checkout.customerInfo.email")," ",(0,s.jsx)("span",{className:v().required,children:"*"})]}),(0,s.jsx)("input",{type:"email",id:"email",value:e.customer_info.email,onChange:e=>f("email",e.target.value),className:`${v().input} ${o.email?v().inputError:""}`,placeholder:m("checkout.customerInfo.emailPlaceholder")}),o.email&&(0,s.jsx)("span",{className:v().errorText,children:o.email})]}),(0,s.jsxs)("div",{className:v().formGroup,children:[(0,s.jsx)("label",{htmlFor:"phone",className:v().label,children:m("checkout.customerInfo.phone")}),(0,s.jsx)("input",{type:"tel",id:"phone",value:e.customer_info.phone,onChange:e=>f("phone",e.target.value),className:v().input,placeholder:m("checkout.customerInfo.phonePlaceholder")})]})]}),"      "]}),h&&(0,s.jsxs)("div",{className:v().section,children:["          ",(0,s.jsxs)("div",{className:v().addressFormHeader,children:[(0,s.jsx)("h2",{className:v().sectionTitle,children:m("checkout.customerInfo.shippingAddress")}),!k&&r&&(0,s.jsx)("div",{className:v().addressModeNote,children:m("checkout.customerInfo.addressNote")})]}),(0,s.jsxs)("div",{className:v().formGroup,children:["          ",(0,s.jsxs)("label",{htmlFor:"streetAddress",className:v().label,children:[m("checkout.customerInfo.streetAddress")," ",(0,s.jsx)("span",{className:v().required,children:"*"})]}),(0,s.jsx)("input",{type:"text",id:"streetAddress",value:e.shipping_address.street_address,onChange:e=>x("street_address",e.target.value),className:`${v().input} ${o.street_address?v().inputError:""}`,placeholder:m("checkout.customerInfo.streetAddressPlaceholder")}),o.street_address&&(0,s.jsx)("span",{className:v().errorText,children:o.street_address})]}),(0,s.jsxs)("div",{className:v().formGroup,children:["          ",(0,s.jsx)("label",{htmlFor:"apartment",className:v().label,children:m("checkout.customerInfo.apartment")}),(0,s.jsx)("input",{type:"text",id:"apartment",value:e.shipping_address.apartment,onChange:e=>x("apartment",e.target.value),className:v().input,placeholder:m("checkout.customerInfo.apartmentPlaceholder")})]}),(0,s.jsxs)("div",{className:v().formRow,children:[(0,s.jsxs)("div",{className:v().formGroup,children:["            ",(0,s.jsxs)("label",{htmlFor:"city",className:v().label,children:[m("checkout.customerInfo.city")," ",(0,s.jsx)("span",{className:v().required,children:"*"})]}),(0,s.jsx)("input",{type:"text",id:"city",value:e.shipping_address.city,onChange:e=>x("city",e.target.value),className:`${v().input} ${o.city?v().inputError:""}`,placeholder:m("checkout.customerInfo.cityPlaceholder")}),o.city&&(0,s.jsx)("span",{className:v().errorText,children:o.city})]}),(0,s.jsxs)("div",{className:v().formGroup,children:["            ",(0,s.jsx)("label",{htmlFor:"state",className:v().label,children:m("checkout.customerInfo.state")}),(0,s.jsx)("input",{type:"text",id:"state",value:e.shipping_address.state,onChange:e=>x("state",e.target.value),className:v().input,placeholder:m("checkout.customerInfo.statePlaceholder")})]})]}),(0,s.jsxs)("div",{className:v().formRow,children:[(0,s.jsxs)("div",{className:v().formGroup,children:[(0,s.jsxs)("label",{htmlFor:"postalCode",className:v().label,children:[m("checkout.customerInfo.postalCode")," ",(0,s.jsx)("span",{className:v().required,children:"*"})]}),(0,s.jsx)("input",{type:"text",id:"postalCode",value:e.shipping_address.postal_code,onChange:e=>x("postal_code",e.target.value),className:`${v().input} ${o.postal_code?v().inputError:""}`,placeholder:m("checkout.customerInfo.postalCodePlaceholder")}),o.postal_code&&(0,s.jsx)("span",{className:v().errorText,children:o.postal_code})]}),(0,s.jsxs)("div",{className:v().formGroup,children:["            ",(0,s.jsxs)("label",{htmlFor:"country",className:v().label,children:[m("checkout.customerInfo.country")," ",(0,s.jsx)("span",{className:v().required,children:"*"})]}),(0,s.jsxs)("select",{id:"country",value:e.shipping_address.country,onChange:e=>x("country",e.target.value),className:v().select,children:[(0,s.jsx)("option",{value:"AU",children:m("checkout.customerInfo.countries.australia")}),(0,s.jsx)("option",{value:"AT",children:m("checkout.customerInfo.countries.austria")}),(0,s.jsx)("option",{value:"AZ",children:m("checkout.customerInfo.countries.azerbaijan")}),(0,s.jsx)("option",{value:"AL",children:m("checkout.customerInfo.countries.albania")}),(0,s.jsx)("option",{value:"DZ",children:m("checkout.customerInfo.countries.algeria")}),(0,s.jsx)("option",{value:"AI",children:m("checkout.customerInfo.countries.anguilla")}),(0,s.jsx)("option",{value:"AO",children:m("checkout.customerInfo.countries.angola")}),(0,s.jsx)("option",{value:"AG",children:m("checkout.customerInfo.countries.antiguaAndBarbuda")}),(0,s.jsx)("option",{value:"AR",children:m("checkout.customerInfo.countries.argentina")}),(0,s.jsx)("option",{value:"AW",children:m("checkout.customerInfo.countries.aruba")}),(0,s.jsx)("option",{value:"AF",children:m("checkout.customerInfo.countries.afghanistan")}),(0,s.jsx)("option",{value:"BS",children:m("checkout.customerInfo.countries.bahamas")}),(0,s.jsx)("option",{value:"BD",children:m("checkout.customerInfo.countries.bangladesh")}),(0,s.jsx)("option",{value:"BB",children:m("checkout.customerInfo.countries.barbados")}),(0,s.jsx)("option",{value:"BH",children:m("checkout.customerInfo.countries.bahrain")}),(0,s.jsx)("option",{value:"BZ",children:m("checkout.customerInfo.countries.belize")}),(0,s.jsx)("option",{value:"BE",children:m("checkout.customerInfo.countries.belgium")}),(0,s.jsx)("option",{value:"BJ",children:m("checkout.customerInfo.countries.benin")}),(0,s.jsx)("option",{value:"BM",children:m("checkout.customerInfo.countries.bermuda")}),(0,s.jsx)("option",{value:"BQ",children:m("checkout.customerInfo.countries.bonaireSintEustatiusSaba")}),(0,s.jsx)("option",{value:"BG",children:m("checkout.customerInfo.countries.bulgaria")}),(0,s.jsx)("option",{value:"BO",children:m("checkout.customerInfo.countries.bolivia")}),(0,s.jsx)("option",{value:"BA",children:m("checkout.customerInfo.countries.bosniaHerzegovina")}),(0,s.jsx)("option",{value:"BW",children:m("checkout.customerInfo.countries.botswana")}),(0,s.jsx)("option",{value:"BR",children:m("checkout.customerInfo.countries.brazil")}),(0,s.jsx)("option",{value:"BN",children:m("checkout.customerInfo.countries.bruneiDarussalam")}),(0,s.jsx)("option",{value:"BF",children:m("checkout.customerInfo.countries.burkinaFaso")}),(0,s.jsx)("option",{value:"BI",children:m("checkout.customerInfo.countries.burundi")}),(0,s.jsx)("option",{value:"BT",children:m("checkout.customerInfo.countries.bhutan")}),(0,s.jsx)("option",{value:"VU",children:m("checkout.customerInfo.countries.vanuatu")}),(0,s.jsx)("option",{value:"VA",children:m("checkout.customerInfo.countries.vatican")}),(0,s.jsx)("option",{value:"GB",children:m("checkout.customerInfo.countries.unitedKingdom")}),(0,s.jsx)("option",{value:"VG",children:m("checkout.customerInfo.countries.virginIslands")}),(0,s.jsx)("option",{value:"GG",children:m("checkout.customerInfo.countries.guernsey")}),(0,s.jsx)("option",{value:"JE",children:m("checkout.customerInfo.countries.jersey")}),(0,s.jsx)("option",{value:"GI",children:m("checkout.customerInfo.countries.gibraltar")}),(0,s.jsx)("option",{value:"HU",children:m("checkout.customerInfo.countries.hungary")}),(0,s.jsx)("option",{value:"VE",children:m("checkout.customerInfo.countries.venezuela")}),(0,s.jsx)("option",{value:"VN",children:m("checkout.customerInfo.countries.vietnam")}),(0,s.jsx)("option",{value:"GA",children:m("checkout.customerInfo.countries.gabon")}),(0,s.jsx)("option",{value:"HT",children:m("checkout.customerInfo.countries.haiti")}),(0,s.jsx)("option",{value:"GY",children:m("checkout.customerInfo.countries.guyana")}),(0,s.jsx)("option",{value:"GM",children:m("checkout.customerInfo.countries.gambia")}),(0,s.jsx)("option",{value:"GH",children:m("checkout.customerInfo.countries.ghana")}),(0,s.jsx)("option",{value:"GT",children:m("checkout.customerInfo.countries.guatemala")}),(0,s.jsx)("option",{value:"GN",children:m("checkout.customerInfo.countries.guinea")}),(0,s.jsx)("option",{value:"DE",children:m("checkout.customerInfo.countries.germany")}),(0,s.jsx)("option",{value:"GD",children:m("checkout.customerInfo.countries.grenada")}),(0,s.jsx)("option",{value:"GR",children:m("checkout.customerInfo.countries.greece")}),(0,s.jsx)("option",{value:"GE",children:m("checkout.customerInfo.countries.georgia")}),(0,s.jsx)("option",{value:"DK",children:m("checkout.customerInfo.countries.denmark")}),(0,s.jsx)("option",{value:"GL",children:m("checkout.customerInfo.countries.greenland")}),(0,s.jsx)("option",{value:"FO",children:m("checkout.customerInfo.countries.faroeIslands")}),(0,s.jsx)("option",{value:"CD",children:m("checkout.customerInfo.countries.democraticRepublicCongo")}),(0,s.jsx)("option",{value:"DJ",children:m("checkout.customerInfo.countries.djibouti")}),(0,s.jsx)("option",{value:"DM",children:m("checkout.customerInfo.countries.dominica")}),(0,s.jsx)("option",{value:"DO",children:m("checkout.customerInfo.countries.dominicanRepublic")}),(0,s.jsx)("option",{value:"EG",children:m("checkout.customerInfo.countries.egypt")}),(0,s.jsx)("option",{value:"ZM",children:m("checkout.customerInfo.countries.zambia")}),(0,s.jsx)("option",{value:"ZW",children:m("checkout.customerInfo.countries.zimbabwe")}),(0,s.jsx)("option",{value:"IN",children:m("checkout.customerInfo.countries.india")}),(0,s.jsx)("option",{value:"ID",children:m("checkout.customerInfo.countries.indonesia")}),(0,s.jsx)("option",{value:"JO",children:m("checkout.customerInfo.countries.jordan")}),(0,s.jsx)("option",{value:"IQ",children:m("checkout.customerInfo.countries.iraq")}),(0,s.jsx)("option",{value:"IR",children:m("checkout.customerInfo.countries.iran")}),(0,s.jsx)("option",{value:"IE",children:m("checkout.customerInfo.countries.ireland")}),(0,s.jsx)("option",{value:"IS",children:m("checkout.customerInfo.countries.iceland")}),(0,s.jsx)("option",{value:"ES",children:m("checkout.customerInfo.countries.spain")}),(0,s.jsx)("option",{value:"IC",children:m("checkout.customerInfo.countries.canaryIslands")}),(0,s.jsx)("option",{value:"IT",children:m("checkout.customerInfo.countries.italy")}),(0,s.jsx)("option",{value:"YE",children:m("checkout.customerInfo.countries.yemen")}),(0,s.jsx)("option",{value:"CV",children:m("checkout.customerInfo.countries.capeVerde")}),(0,s.jsx)("option",{value:"KZ",children:m("checkout.customerInfo.countries.kazakhstan")}),(0,s.jsx)("option",{value:"KY",children:m("checkout.customerInfo.countries.caymanIslands")}),(0,s.jsx)("option",{value:"KH",children:m("checkout.customerInfo.countries.cambodia")}),(0,s.jsx)("option",{value:"CM",children:m("checkout.customerInfo.countries.cameroon")}),(0,s.jsx)("option",{value:"CA",children:m("checkout.customerInfo.countries.canada")}),(0,s.jsx)("option",{value:"QA",children:m("checkout.customerInfo.countries.qatar")}),(0,s.jsx)("option",{value:"KE",children:m("checkout.customerInfo.countries.kenya")}),(0,s.jsx)("option",{value:"CY",children:m("checkout.customerInfo.countries.cyprus")}),(0,s.jsx)("option",{value:"KG",children:m("checkout.customerInfo.countries.kyrgyzstan")}),(0,s.jsx)("option",{value:"KI",children:m("checkout.customerInfo.countries.kiribati")}),(0,s.jsx)("option",{value:"CN",children:m("checkout.customerInfo.countries.china")}),(0,s.jsx)("option",{value:"HK",children:m("checkout.customerInfo.countries.hongKong")}),(0,s.jsx)("option",{value:"TW",children:m("checkout.customerInfo.countries.taiwan")}),(0,s.jsx)("option",{value:"CO",children:m("checkout.customerInfo.countries.colombia")}),(0,s.jsx)("option",{value:"KM",children:m("checkout.customerInfo.countries.comorosIslands")}),(0,s.jsx)("option",{value:"CG",children:m("checkout.customerInfo.countries.republicCongo")}),(0,s.jsx)("option",{value:"KP",children:m("checkout.customerInfo.countries.northKorea")}),(0,s.jsx)("option",{value:"XK",children:m("checkout.customerInfo.countries.kosovo")}),(0,s.jsx)("option",{value:"CR",children:m("checkout.customerInfo.countries.costaRica")}),(0,s.jsx)("option",{value:"CI",children:m("checkout.customerInfo.countries.coteIvoire")}),(0,s.jsx)("option",{value:"CU",children:m("checkout.customerInfo.countries.cuba")}),(0,s.jsx)("option",{value:"KW",children:m("checkout.customerInfo.countries.kuwait")}),(0,s.jsx)("option",{value:"CW",children:m("checkout.customerInfo.countries.curacao")}),(0,s.jsx)("option",{value:"LA",children:m("checkout.customerInfo.countries.laos")}),(0,s.jsx)("option",{value:"LV",children:m("checkout.customerInfo.countries.latvia")}),(0,s.jsx)("option",{value:"LS",children:m("checkout.customerInfo.countries.lesotho")}),(0,s.jsx)("option",{value:"LR",children:m("checkout.customerInfo.countries.liberia")}),(0,s.jsx)("option",{value:"LB",children:m("checkout.customerInfo.countries.lebanon")}),(0,s.jsx)("option",{value:"LY",children:m("checkout.customerInfo.countries.libya")}),(0,s.jsx)("option",{value:"LT",children:m("checkout.customerInfo.countries.lithuania")}),(0,s.jsx)("option",{value:"LI",children:m("checkout.customerInfo.countries.liechtenstein")}),(0,s.jsx)("option",{value:"LU",children:m("checkout.customerInfo.countries.luxembourg")}),(0,s.jsx)("option",{value:"MU",children:m("checkout.customerInfo.countries.mauritius")}),(0,s.jsx)("option",{value:"MR",children:m("checkout.customerInfo.countries.mauritania")}),(0,s.jsx)("option",{value:"MG",children:m("checkout.customerInfo.countries.madagascar")}),(0,s.jsx)("option",{value:"MO",children:m("checkout.customerInfo.countries.macao")}),(0,s.jsx)("option",{value:"MK",children:m("checkout.customerInfo.countries.northMacedonia")}),(0,s.jsx)("option",{value:"MW",children:m("checkout.customerInfo.countries.malawi")}),(0,s.jsx)("option",{value:"MY",children:m("checkout.customerInfo.countries.malaysia")}),(0,s.jsx)("option",{value:"ML",children:m("checkout.customerInfo.countries.mali")}),(0,s.jsx)("option",{value:"MV",children:m("checkout.customerInfo.countries.maldives")}),(0,s.jsx)("option",{value:"MT",children:m("checkout.customerInfo.countries.malta")}),(0,s.jsx)("option",{value:"MA",children:m("checkout.customerInfo.countries.morocco")}),(0,s.jsx)("option",{value:"MX",children:m("checkout.customerInfo.countries.mexico")}),(0,s.jsx)("option",{value:"MZ",children:m("checkout.customerInfo.countries.mozambique")}),(0,s.jsx)("option",{value:"MD",children:m("checkout.customerInfo.countries.moldova")}),(0,s.jsx)("option",{value:"MC",children:m("checkout.customerInfo.countries.monaco")}),(0,s.jsx)("option",{value:"MN",children:m("checkout.customerInfo.countries.mongolia")}),(0,s.jsx)("option",{value:"MM",children:m("checkout.customerInfo.countries.myanmar")}),(0,s.jsx)("option",{value:"NA",children:m("checkout.customerInfo.countries.namibia")}),(0,s.jsx)("option",{value:"NL",children:m("checkout.customerInfo.countries.netherlands")}),(0,s.jsx)("option",{value:"NP",children:m("checkout.customerInfo.countries.nepal")}),(0,s.jsx)("option",{value:"NE",children:m("checkout.customerInfo.countries.niger")}),(0,s.jsx)("option",{value:"NG",children:m("checkout.customerInfo.countries.nigeria")}),(0,s.jsx)("option",{value:"NI",children:m("checkout.customerInfo.countries.nicaragua")}),(0,s.jsx)("option",{value:"NZ",children:m("checkout.customerInfo.countries.newZealand")}),(0,s.jsx)("option",{value:"NC",children:m("checkout.customerInfo.countries.newCaledonia")}),(0,s.jsx)("option",{value:"NO",children:m("checkout.customerInfo.countries.norway")}),(0,s.jsx)("option",{value:"AE",children:m("checkout.customerInfo.countries.unitedArabEmirates")}),(0,s.jsx)("option",{value:"OM",children:m("checkout.customerInfo.countries.oman")}),(0,s.jsx)("option",{value:"PK",children:m("checkout.customerInfo.countries.pakistan")}),(0,s.jsx)("option",{value:"PA",children:m("checkout.customerInfo.countries.panama")}),(0,s.jsx)("option",{value:"PG",children:m("checkout.customerInfo.countries.papuaNewGuinea")}),(0,s.jsx)("option",{value:"PY",children:m("checkout.customerInfo.countries.paraguay")}),(0,s.jsx)("option",{value:"PE",children:m("checkout.customerInfo.countries.peru")}),(0,s.jsx)("option",{value:"PL",children:m("checkout.customerInfo.countries.poland")}),(0,s.jsx)("option",{value:"PT",children:m("checkout.customerInfo.countries.portugal")}),(0,s.jsx)("option",{value:"RU",children:m("checkout.customerInfo.countries.russianFederation")}),(0,s.jsx)("option",{value:"RW",children:m("checkout.customerInfo.countries.rwanda")}),(0,s.jsx)("option",{value:"RO",children:m("checkout.customerInfo.countries.romania")}),(0,s.jsx)("option",{value:"SV",children:m("checkout.customerInfo.countries.salvador")}),(0,s.jsx)("option",{value:"WS",children:m("checkout.customerInfo.countries.samoa")}),(0,s.jsx)("option",{value:"SM",children:m("checkout.customerInfo.countries.sanMarino")}),(0,s.jsx)("option",{value:"ST",children:m("checkout.customerInfo.countries.saoTomeAndPrincipe")}),(0,s.jsx)("option",{value:"SA",children:m("checkout.customerInfo.countries.saudiArabia")}),(0,s.jsx)("option",{value:"SZ",children:m("checkout.customerInfo.countries.eswatini")}),(0,s.jsx)("option",{value:"SC",children:m("checkout.customerInfo.countries.seychelles")}),(0,s.jsx)("option",{value:"SN",children:m("checkout.customerInfo.countries.senegal")}),(0,s.jsx)("option",{value:"VC",children:m("checkout.customerInfo.countries.stVincentAndGrenadines")}),(0,s.jsx)("option",{value:"KN",children:m("checkout.customerInfo.countries.saintKittsAndNevis")}),(0,s.jsx)("option",{value:"LC",children:m("checkout.customerInfo.countries.stLucia")}),(0,s.jsx)("option",{value:"MF",children:m("checkout.customerInfo.countries.saintMartin")}),(0,s.jsx)("option",{value:"RS",children:m("checkout.customerInfo.countries.serbia")}),(0,s.jsx)("option",{value:"SG",children:m("checkout.customerInfo.countries.singapore")}),(0,s.jsx)("option",{value:"SY",children:m("checkout.customerInfo.countries.syrianArabRepublic")}),(0,s.jsx)("option",{value:"SK",children:m("checkout.customerInfo.countries.slovakia")}),(0,s.jsx)("option",{value:"SI",children:m("checkout.customerInfo.countries.slovenia")}),(0,s.jsx)("option",{value:"SB",children:m("checkout.customerInfo.countries.solomonIsland")}),(0,s.jsx)("option",{value:"SD",children:m("checkout.customerInfo.countries.sudan")}),(0,s.jsx)("option",{value:"SR",children:m("checkout.customerInfo.countries.surinam")}),(0,s.jsx)("option",{value:"US",children:m("checkout.customerInfo.countries.usa")}),(0,s.jsx)("option",{value:"VI",children:m("checkout.customerInfo.countries.usVirginIslands")}),(0,s.jsx)("option",{value:"SL",children:m("checkout.customerInfo.countries.sierraLeone")}),(0,s.jsx)("option",{value:"TJ",children:m("checkout.customerInfo.countries.tajikistan")}),(0,s.jsx)("option",{value:"TH",children:m("checkout.customerInfo.countries.thailand")}),(0,s.jsx)("option",{value:"TZ",children:m("checkout.customerInfo.countries.tanzania")}),(0,s.jsx)("option",{value:"TC",children:m("checkout.customerInfo.countries.turksAndCaicosIslands")}),(0,s.jsx)("option",{value:"TG",children:m("checkout.customerInfo.countries.togoleseRepublic")}),(0,s.jsx)("option",{value:"TO",children:m("checkout.customerInfo.countries.tonga")}),(0,s.jsx)("option",{value:"TT",children:m("checkout.customerInfo.countries.trinidadAndTobago")}),(0,s.jsx)("option",{value:"TN",children:m("checkout.customerInfo.countries.tunisia")}),(0,s.jsx)("option",{value:"TM",children:m("checkout.customerInfo.countries.turkmenistan")}),(0,s.jsx)("option",{value:"TR",children:m("checkout.customerInfo.countries.turkey")}),(0,s.jsx)("option",{value:"UG",children:m("checkout.customerInfo.countries.uganda")}),(0,s.jsx)("option",{value:"UZ",children:m("checkout.customerInfo.countries.uzbekistan")}),(0,s.jsx)("option",{value:"UA",children:m("checkout.customerInfo.countries.ukraine")}),(0,s.jsx)("option",{value:"UY",children:m("checkout.customerInfo.countries.uruguay")}),(0,s.jsx)("option",{value:"FJ",children:m("checkout.customerInfo.countries.fiji")}),(0,s.jsx)("option",{value:"PH",children:m("checkout.customerInfo.countries.philippines")}),(0,s.jsx)("option",{value:"FI",children:m("checkout.customerInfo.countries.finland")}),(0,s.jsx)("option",{value:"FR",children:m("checkout.customerInfo.countries.france")}),(0,s.jsx)("option",{value:"PF",children:m("checkout.customerInfo.countries.frenchPolynesia")}),(0,s.jsx)("option",{value:"HR",children:m("checkout.customerInfo.countries.croatia")}),(0,s.jsx)("option",{value:"CF",children:m("checkout.customerInfo.countries.centralAfricanRepublic")}),(0,s.jsx)("option",{value:"TD",children:m("checkout.customerInfo.countries.chad")}),(0,s.jsx)("option",{value:"ME",children:m("checkout.customerInfo.countries.montenegro")}),(0,s.jsx)("option",{value:"CZ",children:m("checkout.customerInfo.countries.czechRepublic")}),(0,s.jsx)("option",{value:"CL",children:m("checkout.customerInfo.countries.chile")}),(0,s.jsx)("option",{value:"CH",children:m("checkout.customerInfo.countries.switzerland")}),(0,s.jsx)("option",{value:"SE",children:m("checkout.customerInfo.countries.sweden")}),(0,s.jsx)("option",{value:"LK",children:m("checkout.customerInfo.countries.sriLanka")}),(0,s.jsx)("option",{value:"EC",children:m("checkout.customerInfo.countries.ecuador")}),(0,s.jsx)("option",{value:"GQ",children:m("checkout.customerInfo.countries.equatorialGuinea")}),(0,s.jsx)("option",{value:"ER",children:m("checkout.customerInfo.countries.eritrea")}),(0,s.jsx)("option",{value:"EE",children:m("checkout.customerInfo.countries.estonia")}),(0,s.jsx)("option",{value:"ET",children:m("checkout.customerInfo.countries.ethiopia")}),(0,s.jsx)("option",{value:"ZA",children:m("checkout.customerInfo.countries.southAfrica")}),(0,s.jsx)("option",{value:"JM",children:m("checkout.customerInfo.countries.jamaica")}),(0,s.jsx)("option",{value:"JP",children:m("checkout.customerInfo.countries.japan")})]})]})]}),r&&(0,s.jsx)("div",{className:v().checkbox,children:(0,s.jsxs)("label",{className:v().checkboxLabel,children:[(0,s.jsx)("input",{type:"checkbox",checked:e.save_address,onChange:e=>t({save_address:e.target.checked}),className:v().checkboxInput}),(0,s.jsx)("span",{className:v().checkboxMark}),m("checkout.customerInfo.saveAddress")]})})]})]})}var k=o(30926),j=o.n(k);function I({checkoutData:e,updateCheckoutData:t,shippingMethods:o,errors:r}){let{t:i}=(0,p.useI18n)(),[c,a]=(0,n.useState)(null),d=e=>{t({shipping_method:e}),a(e.id),setTimeout(()=>a(null),600)},l=e=>{let t=e.estimated_delivery_min_days||0,o=e.estimated_delivery_max_days||0;return 0===t&&0===o?i("checkout.shipping.deliveryTime.today"):t===o?i("checkout.shipping.deliveryTime.days",{count:t}):i("checkout.shipping.deliveryTime.range",{min:t,max:o})},u=e=>0===e?i("checkout.shipping.free"):`${e.toFixed(2)} EUR`;return(0,s.jsxs)("div",{className:j().container,children:[(0,s.jsx)("h2",{className:j().title,children:i("checkout.shipping.title")}),(0,s.jsx)("div",{className:j().shippingMethods,children:o.filter(e=>e.is_active).map(t=>{let o=e.shipping_method?.id===t.id;return(0,s.jsx)("div",{className:`${j().shippingMethod} ${o?j().selected:""} ${c===t.id?j().justSelected:""}`,onClick:()=>d(t),children:(0,s.jsx)("div",{className:j().methodContent,children:(0,s.jsxs)("div",{className:j().methodHeader,children:[(0,s.jsxs)("div",{className:j().radioButton,children:[(0,s.jsx)("input",{type:"radio",name:"shipping_method",checked:o,onChange:()=>d(t),className:j().radioInput}),(0,s.jsx)("span",{className:j().radioMark})]}),(0,s.jsxs)("div",{className:j().methodInfo,children:[(0,s.jsx)("div",{className:j().methodName,children:t.name}),(0,s.jsx)("div",{className:j().methodDescription,children:t.description})]}),(0,s.jsxs)("div",{className:j().methodPricing,children:[(0,s.jsx)("div",{className:j().methodPrice,children:u(t.cost)}),(0,s.jsx)("div",{className:j().deliveryTime,children:l(t)})]})]})})},t.id)})}),"      ",r.shipping_method&&(0,s.jsx)("div",{className:j().errorMessage,children:r.shipping_method}),"      ",(0,s.jsxs)("div",{className:j().shippingInfo,children:[(0,s.jsx)("div",{className:j().infoIcon,children:"ℹ️"}),(0,s.jsx)("div",{className:j().infoText,children:i("checkout.shipping.info")})]})]})}var y=o(88112),S=o.n(y);function N({checkoutData:e,updateCheckoutData:t,paymentMethods:o,errors:n,orderSummary:r}){let{t:i}=(0,p.useI18n)(),c=e=>{t({payment_method:e})};return(0,s.jsxs)("div",{className:S().container,children:[(0,s.jsx)("h2",{className:S().title,children:i("checkout.payment.title")}),(0,s.jsx)("div",{className:S().paymentMethods,children:o.map(t=>(0,s.jsx)("div",{className:`${S().paymentMethod} ${e.payment_method?.id===t.id?S().selected:""}`,onClick:()=>c(t),children:(0,s.jsxs)("div",{className:S().methodContent,children:[(0,s.jsxs)("div",{className:S().radioButton,children:[(0,s.jsx)("input",{type:"radio",name:"payment_method",checked:e.payment_method?.id===t.id,onChange:()=>c(t),className:S().radioInput}),(0,s.jsx)("span",{className:S().radioMark})]}),(0,s.jsx)("div",{className:S().methodIcon,children:t.icon}),(0,s.jsxs)("div",{className:S().methodInfo,children:[(0,s.jsx)("div",{className:S().methodName,children:t.name}),t.description&&(0,s.jsx)("div",{className:S().methodDescription,children:i(t.description)})]})]})},t.id))}),n.payment_method&&(0,s.jsx)("div",{className:S().errorMessage,children:n.payment_method}),"      ",e.payment_method&&(0,s.jsxs)("div",{className:S().paymentInstructions,children:[(0,s.jsx)("div",{className:S().instructionsIcon,children:"\uD83D\uDD12"}),(0,s.jsx)("div",{className:S().instructionsText,children:i("checkout.payment.instructions")})]}),n.payment_method&&(0,s.jsx)("div",{className:S().errorMessage,children:n.payment_method})]})}var C=o(88321),b=o.n(C);let E=({checkoutData:e,orderSummary:t,onPlaceOrder:o,isLoading:r=!1})=>{let{t:i}=(0,p.useI18n)(),[c,a]=(0,n.useState)(!1),[d,l]=(0,n.useState)(!1),{customer_info:u,shipping_address:m,shipping_method:h,payment_method:_}=e;return(0,s.jsxs)("div",{className:b().confirmationStep,children:[(0,s.jsx)("h2",{children:i("checkout.confirmation.title")}),(0,s.jsx)("p",{className:b().reviewText,children:i("checkout.confirmation.reviewText")}),(0,s.jsxs)("div",{className:b().confirmationSections,children:["        ",(0,s.jsxs)("div",{className:b().section,children:[(0,s.jsx)("h3",{children:i("checkout.confirmation.customerInfo.title")}),(0,s.jsxs)("div",{className:b().sectionContent,children:[(0,s.jsxs)("p",{children:[(0,s.jsxs)("strong",{children:[i("checkout.confirmation.customerInfo.name"),":"]})," ",u?.first_name," ",u?.last_name]}),(0,s.jsxs)("p",{children:[(0,s.jsxs)("strong",{children:[i("checkout.confirmation.customerInfo.email"),":"]})," ",u?.email]}),(0,s.jsxs)("p",{children:[(0,s.jsxs)("strong",{children:[i("checkout.confirmation.customerInfo.phone"),":"]})," ",u?.phone]})]})]}),"        ",(0,s.jsxs)("div",{className:b().section,children:[(0,s.jsx)("h3",{children:i("checkout.confirmation.shippingInfo.title")}),(0,s.jsxs)("div",{className:b().sectionContent,children:[(0,s.jsx)("p",{children:(0,s.jsxs)("strong",{children:[i("checkout.confirmation.shippingInfo.address"),":"]})}),(0,s.jsx)("p",{children:(e=>{if(!e)return"";let t=[];return e.street_address&&t.push(e.street_address),e.apartment&&t.push(e.apartment),e.city&&t.push(e.city),e.state&&t.push(e.state),e.postal_code&&t.push(e.postal_code),e.country&&t.push(e.country),t.join(", ")})(m)}),(0,s.jsxs)("p",{children:[(0,s.jsxs)("strong",{children:[i("checkout.confirmation.shippingInfo.method"),":"]})," ",h?.name]}),(0,s.jsxs)("p",{children:[(0,s.jsxs)("strong",{children:[i("checkout.confirmation.shippingInfo.deliveryTime"),":"]})," ",h?.estimated_delivery_min_days?(e=>1===e?i("checkout.confirmation.deliveryTime.oneDay"):e<=7?i("checkout.confirmation.deliveryTime.days",{days:e}):e<=14?i("checkout.confirmation.deliveryTime.weeks",{weeks:"1-2"}):i("checkout.confirmation.deliveryTime.weeks",{weeks:Math.ceil(e/7)}))(h.estimated_delivery_min_days):"N/A"]}),h&&h.cost>0&&(0,s.jsxs)("p",{children:[(0,s.jsxs)("strong",{children:[i("checkout.confirmation.shippingInfo.cost"),":"]})," ",h.cost.toFixed(2)," EUR"]})]}),"        "]}),"        ",(0,s.jsxs)("div",{className:b().section,children:[(0,s.jsx)("h3",{children:i("checkout.confirmation.paymentMethod.title")}),(0,s.jsx)("div",{className:b().sectionContent,children:(0,s.jsxs)("div",{className:b().paymentMethod,children:[(0,s.jsxs)("span",{className:b().paymentIcon,children:[_?.type==="card"&&"\uD83D\uDCB3",_?.type==="paypal"&&"\uD83C\uDD7F️",_?.type==="apple_pay"&&"\uD83C\uDF4E",_?.type==="google_pay"&&"\uD83D\uDD0D",_?.type==="bank_transfer"&&"\uD83C\uDFE6"]}),(0,s.jsx)("span",{children:_?.name})]})})]}),(0,s.jsxs)("div",{className:b().section,children:[(0,s.jsx)("h3",{children:i("checkout.confirmation.orderItems.title")}),(0,s.jsx)("div",{className:b().orderItems,children:t.items.map(e=>(0,s.jsxs)("div",{className:b().orderItem,children:[(0,s.jsxs)("div",{className:b().itemInfo,children:[(0,s.jsx)("h4",{children:e.name}),(0,s.jsxs)("p",{children:[i("checkout.confirmation.orderItems.quantity"),": ",e.quantity]}),e.variant&&(0,s.jsxs)("p",{className:b().variant,children:[i("checkout.confirmation.orderItems.variant"),": ",e.variant]})]}),(0,s.jsxs)("div",{className:b().itemPrice,children:[(e.price*e.quantity).toFixed(2)," EUR"]})]},e.id))})]}),(0,s.jsxs)("div",{className:b().section,children:[(0,s.jsx)("h3",{children:i("checkout.confirmation.orderTotal.title")}),(0,s.jsxs)("div",{className:b().orderTotals,children:[(0,s.jsxs)("div",{className:b().totalLine,children:[(0,s.jsxs)("span",{children:[i("checkout.confirmation.orderTotal.subtotal"),":"]}),(0,s.jsxs)("span",{children:[t.subtotal.toFixed(2)," EUR"]})]}),t.shipping_cost>0&&(0,s.jsxs)("div",{className:b().totalLine,children:[(0,s.jsxs)("span",{children:[i("checkout.confirmation.orderTotal.shipping"),":"]}),(0,s.jsxs)("span",{children:[t.shipping_cost.toFixed(2)," EUR"]})]}),t.discount_amount>0&&(0,s.jsxs)("div",{className:b().totalLine,children:[(0,s.jsxs)("span",{children:[i("checkout.confirmation.orderTotal.discount"),":"]}),(0,s.jsxs)("span",{children:["-",t.discount_amount.toFixed(2)," EUR"]})]}),(0,s.jsxs)("div",{className:`${b().totalLine} ${b().grandTotal}`,children:[(0,s.jsxs)("span",{children:[i("checkout.confirmation.orderTotal.total"),":"]}),(0,s.jsxs)("span",{children:[t.total_amount.toFixed(2)," EUR"]})]})]})]})]}),(0,s.jsxs)("div",{className:b().terms,children:[(0,s.jsxs)("label",{className:b().termsLabel,children:[(0,s.jsx)("input",{type:"checkbox",checked:c,onChange:e=>{a(e.target.checked),e.target.checked&&l(!1)},required:!0}),(0,s.jsxs)("span",{children:[i("checkout.confirmation.terms.agree")," ",(0,s.jsx)("a",{href:"/terms",target:"_blank",children:i("checkout.confirmation.terms.termsLink")})," ",i("checkout.confirmation.terms.and")," ",(0,s.jsx)("a",{href:"/privacy",target:"_blank",children:i("checkout.confirmation.terms.privacyLink")})]})]}),d&&(0,s.jsx)("div",{className:b().termsError,children:i("checkout.confirmation.terms.error")})]}),(0,s.jsxs)("div",{className:b().placeOrderSection,children:[(0,s.jsx)("button",{type:"button",onClick:()=>{if(console.log("=== PLACE ORDER BUTTON CLICKED ==="),console.log("Terms agreed:",c),console.log("Is loading:",r),!c){console.log("Terms not agreed, showing error"),l(!0);return}console.log("Calling onPlaceOrder..."),o()},disabled:r||!c,className:`${b().placeOrderButton} ${!c?b().disabled:""}`,children:r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:b().spinner}),i("checkout.confirmation.button.loading")]}):i("checkout.confirmation.button.placeOrder",{amount:t.total_amount.toFixed(2)})}),(0,s.jsx)("p",{className:b().redirectNotice,children:i("checkout.confirmation.redirectNotice")})]}),(0,s.jsx)("div",{className:b().securityNotice,children:(0,s.jsxs)("p",{children:["\uD83D\uDD12 ",i("checkout.confirmation.securityNotice")]})})]})};var A=o(90578),R=o.n(A);let T=({orderSummary:e,isLoading:t=!1})=>{let{t:o}=(0,p.useI18n)();return(0,s.jsxs)("div",{className:R().orderSummary,children:[(0,s.jsx)("h3",{children:o("checkout.summary.title")}),(0,s.jsx)("div",{className:R().orderItems,children:e.items.map(e=>(0,s.jsxs)("div",{className:R().orderItem,children:["            ",(0,s.jsxs)("div",{className:R().itemImage,children:[e.image?(0,s.jsx)("img",{src:e.image,alt:e.name,onError:e=>{e.currentTarget.style.display="none",e.currentTarget.nextElementSibling?.classList.add(R().visible)}}):null,(0,s.jsx)("div",{className:`${R().placeholderImage} ${!e.image?R().visible:""}`,children:(0,s.jsx)("span",{children:"\uD83D\uDCE6"})}),(0,s.jsx)("span",{className:R().quantity,children:e.quantity})]}),(0,s.jsxs)("div",{className:R().itemDetails,children:[(0,s.jsx)("h4",{className:R().itemName,children:e.name}),e.variant&&(0,s.jsx)("p",{className:R().itemVariant,children:e.variant}),"              ",(e.color||e.size)&&(0,s.jsxs)("p",{className:R().itemOptions,children:[e.color&&(0,s.jsxs)("span",{className:R().colorOption,children:[e.colorCode&&(0,s.jsx)("span",{className:R().colorCircle,style:{backgroundColor:e.colorCode},title:e.color}),e.color]}),e.size&&(0,s.jsxs)("span",{children:[o("checkout.summary.size"),": ",e.size]})]})]}),(0,s.jsxs)("div",{className:R().itemPrice,children:[(e.price*e.quantity).toFixed(2)," EUR"]})]},e.id))}),"      ",(0,s.jsxs)("div",{className:R().orderTotals,children:[(0,s.jsxs)("div",{className:R().totalLine,children:[(0,s.jsx)("span",{children:o("checkout.summary.subtotal")}),(0,s.jsxs)("span",{children:[e.subtotal.toFixed(2)," EUR"]})]}),e.shipping_cost>0&&(0,s.jsxs)("div",{className:R().totalLine,children:[(0,s.jsx)("span",{children:o("checkout.summary.shipping")}),(0,s.jsxs)("span",{children:[e.shipping_cost.toFixed(2)," EUR"]})]}),e.discount_amount>0&&(0,s.jsxs)("div",{className:R().totalLine,children:[(0,s.jsx)("span",{children:o("checkout.summary.discount")}),(0,s.jsxs)("span",{className:R().discountAmount,children:["-",e.discount_amount.toFixed(2)," EUR"]})]}),(0,s.jsxs)("div",{className:`${R().totalLine} ${R().grandTotal}`,children:[(0,s.jsx)("span",{children:o("checkout.summary.total")}),(0,s.jsxs)("span",{children:[e.total_amount.toFixed(2)," EUR"]})]})]}),"      ",(0,s.jsxs)("div",{className:R().securityBadges,children:[(0,s.jsxs)("div",{className:R().badge,children:[(0,s.jsx)("span",{className:R().badgeIcon,children:"\uD83D\uDD12"}),(0,s.jsx)("span",{children:o("checkout.secureCheckout")})]}),(0,s.jsxs)("div",{className:R().badge,children:[(0,s.jsx)("span",{className:R().badgeIcon,children:"\uD83D\uDE9A"}),(0,s.jsx)("span",{children:o("checkout.summary.freeReturns")})]}),(0,s.jsxs)("div",{className:R().badge,children:[(0,s.jsx)("span",{className:R().badgeIcon,children:"\uD83D\uDCDE"}),(0,s.jsx)("span",{children:o("checkout.summary.support")})]})]}),"      ",t&&(0,s.jsxs)("div",{className:R().loadingOverlay,children:[(0,s.jsx)("div",{className:R().spinner}),(0,s.jsx)("p",{children:o("checkout.summary.updating")})]})]})};var w=o(70083),P=o.n(w);function O({steps:e,currentStep:t,onStepClick:o}){let{t:n}=(0,p.useI18n)();return(0,s.jsx)("div",{className:P().stepsContainer,children:(0,s.jsx)("div",{className:P().steps,children:e.map((r,i)=>(0,s.jsxs)("div",{className:`${P().step} ${r.completed?P().completed:""} ${r.current?P().current:""} ${!1===r.accessible?P().disabled:""}`,onClick:()=>{(!1!==r.accessible||r.id<=t)&&o(r.id)},style:{cursor:!1===r.accessible&&r.id>t?"not-allowed":"pointer",opacity:!1===r.accessible&&r.id>t?.5:1},children:[(0,s.jsx)("div",{className:P().stepNumber,children:r.completed?(0,s.jsx)("span",{className:P().checkmark,children:"✓"}):(0,s.jsx)("span",{children:r.id})}),(0,s.jsx)("div",{className:P().stepLabel,children:n(r.title)}),i<e.length-1&&(0,s.jsx)("div",{className:`${P().connector} ${r.completed?P().connectorCompleted:""}`})]},r.id))})})}function D(){let{t:e}=(0,p.useI18n)();(0,i.useRouter)();let t=(0,r.wA)();(0,i.useSearchParams)();let{items:o,cartId:_}=(0,r.d4)(e=>e.cart),{user:x,isAuthenticated:v}=(0,r.d4)(e=>e.auth),[k,j]=(0,n.useState)(!1),[y,S]=(0,n.useState)(null),[C,b]=(0,n.useState)(null),[A,R]=(0,n.useState)(!1),[w,P]=(0,n.useState)([]),[D,M]=(0,n.useState)(!1),[L,U]=(0,n.useState)(!1),[B,F]=(0,n.useState)(null),[G,q]=(0,n.useState)(1),[$,z]=(0,n.useState)(a),[K,H]=(0,n.useState)(!1),[X,W]=(0,n.useState)({}),[Z,V]=(0,n.useState)({customer_info:{first_name:"",last_name:"",email:"",phone:""},shipping_address:{street_address:"",apartment:"",city:"",state:"",postal_code:"",country:"BY"},save_address:!1,shipping_method:null,payment_method:null,customer_notes:""}),[Y,J]=(0,n.useState)([{id:1,name:e("checkout.shipping.standardShipping"),description:e("checkout.shipping.standardDescription"),cost:10,estimated_delivery_min_days:5,estimated_delivery_max_days:14,is_active:!0}]),Q=(()=>{let e=k&&y?[y]:o,t=e.reduce((e,t)=>e+t.price*t.quantity,0),s=Z.shipping_method?.cost||0;return{subtotal:t,shipping_cost:s,tax_amount:0,discount_amount:0,total_amount:t+s-0,items:e.map((e,t)=>({id:t+1,product_id:e.id,variant_id:e.variantId,name:e.name,price:e.price,quantity:e.quantity,image:e.image,color:e.color,colorCode:e.colorCode,size:e.size,variant:e.variantId?`${e.color||""} ${e.size||""}`.trim():void 0}))}})(),ee=(0,n.useCallback)(t=>{let o={};switch(t){case 1:Z.customer_info.first_name||(o.first_name=e("checkout.validation.firstNameRequired")),Z.customer_info.last_name||(o.last_name=e("checkout.validation.lastNameRequired")),Z.customer_info.email||(o.email=e("checkout.validation.emailRequired")),Z.shipping_address.street_address||(o.street_address=e("checkout.validation.addressRequired")),Z.shipping_address.city||(o.city=e("checkout.validation.cityRequired")),Z.shipping_address.postal_code||(o.postal_code=e("checkout.validation.postalCodeRequired"));break;case 2:Z.shipping_method||(o.shipping_method=e("checkout.validation.shippingMethodRequired"));break;case 3:Z.payment_method||(o.payment_method=e("checkout.validation.paymentMethodRequired"))}return 0===Object.keys(o).length},[Z]),et=(0,n.useCallback)(e=>{for(let t=1;t<e;t++)if(!ee(t))return!1;return!0},[ee]);(0,n.useCallback)(e=>{z(t=>t.map((t,o)=>{let s=o+1,n=s<e,r=s===e,i=1===s;return s>1&&(i=et(s)),{...t,completed:n,current:r,accessible:i}}))},[et]);let eo=()=>{G<4&&q(G+1)},es=()=>{G>1&&q(G-1)},en=e=>{V(t=>({...t,...e}))},er=()=>{let t=ee(G);if(!t){let t={};switch(G){case 1:Z.customer_info.first_name||(t.first_name=e("checkout.validation.firstNameRequired")),Z.customer_info.last_name||(t.last_name=e("checkout.validation.lastNameRequired")),Z.customer_info.email||(t.email=e("checkout.validation.emailRequired")),Z.shipping_address.street_address||(t.street_address=e("checkout.validation.addressRequired")),Z.shipping_address.city||(t.city=e("checkout.validation.cityRequired")),Z.shipping_address.postal_code||(t.postal_code=e("checkout.validation.postalCodeRequired"));break;case 2:Z.shipping_method||(t.shipping_method=e("checkout.validation.shippingMethodRequired"));break;case 3:Z.payment_method||(t.payment_method=e("checkout.validation.paymentMethodRequired"))}W(t)}return t},ei=async()=>{if(v&&x&&!L&&Z.shipping_address.street_address&&Z.shipping_address.city&&Z.shipping_address.postal_code&&Z.customer_info.first_name&&Z.customer_info.last_name){U(!0);try{let e=localStorage.getItem("access_token");if(e){let t=Array.isArray(w)?w:[];if(!t.find(e=>e.street_address===Z.shipping_address.street_address&&e.city===Z.shipping_address.city&&e.postal_code===Z.shipping_address.postal_code)){let o={address_type:"shipping",recipient_name:`${Z.customer_info.first_name} ${Z.customer_info.last_name}`.trim(),street_address:Z.shipping_address.street_address,address_line_2:Z.shipping_address.apartment||void 0,city:Z.shipping_address.city,state_province:Z.shipping_address.state||"",postal_code:Z.shipping_address.postal_code,country_code:Z.shipping_address.country,phone_number:Z.customer_info.phone||void 0,is_default_shipping:0===t.length,is_default_billing:0===t.length},s=await l(o,e);P(e=>[...Array.isArray(e)?e:[],s])}}}catch(e){console.error("Failed to auto-save address:",e)}finally{U(!1)}}},ec=async t=>{if(confirm(e("checkout.confirmations.deleteAddress")))try{let e=localStorage.getItem("access_token");e&&(await u(t,e),P(e=>e.filter(e=>e.id!==t)),B===t&&F(null))}catch(e){console.error("Failed to delete address:",e)}},ea=async()=>{H(!0),console.log("=== ORDER SUBMISSION STARTED ==="),console.log("Current step:",G),console.log("Cart ID:",_),console.log("Selected Address ID:",B),console.log("Is authenticated:",v),console.log("User:",x),console.log("Checkout data:",Z),console.log("Is buy now flow:",k);try{let e=B,s=null;if(v&&!B){console.log("Creating address for order (save_address=",Z.save_address,")");try{let t=localStorage.getItem("access_token");if(t){let o={address_type:"shipping",recipient_name:`${Z.customer_info.first_name} ${Z.customer_info.last_name}`.trim(),street_address:Z.shipping_address.street_address,address_line_2:Z.shipping_address.apartment||void 0,city:Z.shipping_address.city,state_province:Z.shipping_address.state||"",postal_code:Z.shipping_address.postal_code,country_code:Z.shipping_address.country,phone_number:Z.customer_info.phone||void 0,is_default_shipping:Z.save_address,is_default_billing:Z.save_address};console.log("Address data to save:",o);let s=await l(o,t);e=s.id,console.log("Address saved successfully:",s)}else throw Error("Authentication token not found")}catch(e){throw console.error("Failed to save address:",e),Error("Failed to save shipping address: "+(e instanceof Error?e.message:"Unknown error"))}}else B&&(console.log("Using existing selected address:",B),e=B);if(k&&y){if(console.log("=== BUY NOW FLOW - CREATING DIRECT ORDER ==="),console.log("Buy now product:",y),!e)throw console.log("=== ERROR: NO ADDRESS ID ==="),Error("Shipping address is required. Please ensure address is saved or selected.");let t=localStorage.getItem("access_token");if(!t)throw console.log("=== ERROR: NO AUTH TOKEN ==="),Error("Authentication required");let o={product_id:y.id,quantity:y.quantity||1,shipping_address_id:e,billing_address_id:e,shipping_method_id:Z.shipping_method?.id||1,customer_notes:Z.customer_notes||""};y.variantId&&(o.product_variant_id=y.variantId),y.color&&(o.color=y.color),y.colorCode&&(o.color_code=y.colorCode),y.size&&(o.size=y.size),console.log("=== SENDING DIRECT ORDER CREATION REQUEST ==="),console.log("Direct order data:",o),s=await (0,m.mK)(o,t),console.log("=== DIRECT ORDER CREATED SUCCESSFULLY ==="),console.log("Created order:",s)}else{console.log("=== REGULAR CHECKOUT FLOW - PROCEEDING WITH ORDER CREATION ===");let n=_;if(!n){console.log("=== NO CART ID - CREATING TEMPORARY CART FOR SINGLE ITEM ===");let e=k&&y?[y]:o;if(0===e.length)throw Error("No items to order. Please add items to cart first.");console.log("Items to add to cart:",e);let t=await (0,h.zA)();if(!t)throw Error("Failed to create cart for order");for(let o of(n=t.cart_id,console.log("✓ Temporary cart created:",n),e)){let e={drop_product:o.dropProductId,product_variant:o.variantId,quantity:o.quantity,color:o.color,color_code:o.colorCode,size:o.size};if(console.log("Adding item to cart:",e),!await (0,h.r5)(n,e))throw Error(`Failed to add ${o.name} to cart`)}console.log("✓ All items added to temporary cart")}if(!n)throw console.log("=== ERROR: NO CART ID AVAILABLE ==="),Error("Cart ID not available. Please refresh and try again.");if(console.log("✓ Cart ID available:",n),!e)throw console.log("=== ERROR: NO ADDRESS ID ==="),Error("Shipping address is required. Please ensure address is saved or selected.");console.log("✓ Address ID available:",e);let r=localStorage.getItem("access_token");if(!r)throw console.log("=== ERROR: NO AUTH TOKEN ==="),Error("Authentication required");console.log("✓ Auth token available"),console.log("=== CREATING ORDER ===");let i={cart_id:n,shipping_address_id:e,billing_address_id:e,shipping_method_id:Z.shipping_method?.id||1,customer_notes:Z.customer_notes||""};console.log("=== SENDING ORDER CREATION REQUEST ==="),console.log("Order data:",i),s=await (0,m.fS)(i,r),console.log("=== ORDER CREATED SUCCESSFULLY ==="),console.log("Created order:",s),t((0,c.sX)())}console.log("=== REDIRECTING TO PAYMENT ==="),console.log("isBuyNowFlow:",k),console.log("buyNowProduct:",y),console.log("buyNowLink:",C),console.log("buyNowLink type:",typeof C),console.log("buyNowLink length:",C?C.length:"null/undefined");let n="";k&&y?C?(console.log("Using product buy now link from URL params:",C),n=C):(console.log("No buy_now_link found, using generic payment gateway"),n=`https://payment.gateway.com/pay?amount=${Q.total_amount.toFixed(2)}&currency=EUR&orderid=${s.id}&returnUrl=${encodeURIComponent(window.location.origin+"/payment-result?status=success&orderid="+s.id)}&cancelUrl=${encodeURIComponent(window.location.origin+"/payment-result?status=cancelled&orderid="+s.id)}`):(console.log("Regular checkout flow, using generic payment gateway"),n=`https://payment.gateway.com/pay?amount=${Q.total_amount.toFixed(2)}&currency=EUR&orderid=${s.id}&returnUrl=${encodeURIComponent(window.location.origin+"/payment-result?status=success&orderid="+s.id)}&cancelUrl=${encodeURIComponent(window.location.origin+"/payment-result?status=cancelled&orderid="+s.id)}`),console.log("Final payment URL:",n),window.location.href=n}catch(t){console.error("=== ORDER SUBMISSION FAILED ==="),console.error("Error:",t),console.error("Error message:",t instanceof Error?t.message:"Unknown error"),console.error("Error stack:",t instanceof Error?t.stack:"No stack trace"),W({submit:e("checkout.error.orderSubmissionFailed")+": "+(t instanceof Error?t.message:"Unknown error")})}finally{H(!1)}};return A?k||0!==o.length?k&&!y?(0,s.jsxs)("div",{className:f().emptyCart,children:[(0,s.jsx)("h2",{children:e("checkout.error.title")}),(0,s.jsx)("p",{children:e("checkout.error.productLoadFailed")})]}):(0,s.jsx)("div",{className:f().checkoutPage,children:(0,s.jsxs)("div",{className:f().container,children:[(0,s.jsxs)("div",{className:f().header,children:[(0,s.jsx)("h1",{className:f().title,children:e("checkout.title")}),(0,s.jsx)(O,{steps:$,currentStep:G,onStepClick:e=>{let t=$.find(t=>t.id===e);(e<=G||t&&t.accessible)&&q(e)}})]}),(0,s.jsxs)("div",{className:f().content,children:[(0,s.jsxs)("div",{className:f().mainContent,children:["            ",1===G&&(0,s.jsx)(g,{checkoutData:Z,updateCheckoutData:en,errors:X,isAuthenticated:v,userAddresses:w,isLoadingAddresses:D,autoSaveInProgress:L,onLoadSavedAddress:e=>{F(e.id),V(t=>({...t,shipping_address:{street_address:e.street_address,apartment:e.address_line_2||"",city:e.city,state:e.state_province,postal_code:e.postal_code,country:e.country_code}}))},onDeleteAddress:ec,selectedAddressId:B}),2===G&&(0,s.jsx)(I,{checkoutData:Z,updateCheckoutData:en,shippingMethods:Y,errors:X}),3===G&&(0,s.jsx)(N,{checkoutData:Z,updateCheckoutData:en,paymentMethods:d,errors:X,orderSummary:Q}),"            ",4===G&&(0,s.jsx)(E,{checkoutData:Z,orderSummary:Q,onPlaceOrder:ea,isLoading:K}),"            ",G<4&&(0,s.jsxs)("div",{className:f().navigation,children:[G>1&&(0,s.jsx)("button",{type:"button",onClick:es,className:f().backButton,disabled:K,children:e("checkout.navigation.back")}),(0,s.jsx)("button",{type:"button",onClick:()=>{console.log("=== HANDLE CONTINUE CLICKED ==="),console.log("Current step:",G),console.log("Validation result:",er()),er()?1===G?(console.log("Step 1: Auto-saving address and moving to next step"),ei().then(()=>{eo()})):4===G?(console.log("Step 4: Starting order submission"),ea()):(console.log(`Step ${G}: Moving to next step`),eo()):console.log("Validation failed, errors:",X)},className:f().continueButton,disabled:K,children:K?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:f().spinner}),e("checkout.navigation.processing")]}):e("checkout.navigation.continue")})]}),4===G&&(0,s.jsx)("div",{className:f().navigation,children:(0,s.jsx)("button",{type:"button",onClick:es,className:f().backButton,disabled:K,children:e("checkout.navigation.back")})}),X.submit&&(0,s.jsx)("div",{className:f().errorMessage,children:X.submit})]}),"          ",(0,s.jsx)("div",{className:f().sidebar,children:(0,s.jsx)(T,{orderSummary:Q,isLoading:K})})]})]})}):(0,s.jsxs)("div",{className:f().emptyCart,children:[(0,s.jsx)("h2",{children:e("checkout.emptyCart.title")}),(0,s.jsx)("p",{children:e("checkout.emptyCart.message")})]}):(0,s.jsx)("div",{className:f().checkoutPage,children:(0,s.jsx)("div",{className:f().container,children:(0,s.jsx)("div",{className:f().header,children:(0,s.jsx)("h1",{className:f().title,children:e("checkout.loading")})})})})}},42379:e=>{e.exports={checkoutPage:"checkout_checkoutPage__Oxt8U",container:"checkout_container__GDzOa",header:"checkout_header__ZlUxF",title:"checkout_title___IbnB",content:"checkout_content__zllQ3",mainContent:"checkout_mainContent__ecFbb",sidebar:"checkout_sidebar__7IEP5",navigation:"checkout_navigation__t7G5u",backButton:"checkout_backButton__ZIt2k",continueButton:"checkout_continueButton__jkgBp",spinner:"checkout_spinner__5GGpM",spin:"checkout_spin__sL5rA",errorMessage:"checkout_errorMessage__WSOsj",emptyCart:"checkout_emptyCart__aTX89"}},54787:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});let s=(0,o(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\alien\\\\Downloads\\\\Malikli-son - Preview\\\\frontend\\\\src\\\\app\\\\checkout\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\alien\\Downloads\\Malikli-son - Preview\\frontend\\src\\app\\checkout\\page.tsx","default")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70083:e=>{e.exports={checkoutSteps:"CheckoutSteps_checkoutSteps__MA8FE",stepsContainer:"CheckoutSteps_stepsContainer__YqEUe",steps:"CheckoutSteps_steps__PAdkX",step:"CheckoutSteps_step__YgWCz",stepNumber:"CheckoutSteps_stepNumber__0Wqyl",completed:"CheckoutSteps_completed__C31FA",current:"CheckoutSteps_current__rDiU5",pulse:"CheckoutSteps_pulse__taqqQ",checkmark:"CheckoutSteps_checkmark__teilK",checkmarkPop:"CheckoutSteps_checkmarkPop__xW_cI",stepLabel:"CheckoutSteps_stepLabel___U138",connector:"CheckoutSteps_connector__3xZrB",connectorCompleted:"CheckoutSteps_connectorCompleted__kMerg",disabled:"CheckoutSteps_disabled__Hw_am"}},70440:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});var s=o(31658);let n=async e=>[{type:"image/x-icon",sizes:"256x256",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},71753:(e,t,o)=>{"use strict";o.r(t),o.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>l,routeModule:()=>m,tree:()=>d});var s=o(65239),n=o(48088),r=o(88170),i=o.n(r),c=o(30893),a={};for(let e in c)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(a[e]=()=>c[e]);o.d(t,a);let d={children:["",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(o.bind(o,54787)),"C:\\Users\\alien\\Downloads\\Malikli-son - Preview\\frontend\\src\\app\\checkout\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(o.bind(o,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(o.bind(o,94431)),"C:\\Users\\alien\\Downloads\\Malikli-son - Preview\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(o.t.bind(o,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(o.t.bind(o,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(o.t.bind(o,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(o.bind(o,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,l=["C:\\Users\\alien\\Downloads\\Malikli-son - Preview\\frontend\\src\\app\\checkout\\page.tsx"],u={require:o,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/checkout/page",pathname:"/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},72725:(e,t,o)=>{"use strict";o.d(t,{FK:()=>n,It:()=>i,N4:()=>a,fS:()=>r,mK:()=>m,p:()=>c,u:()=>d});let s="http://localhost:8000/api/v1";async function n(e,t){let o=new URL(`${s}/orders/`);t&&(t.status&&"all"!==t.status&&o.searchParams.append("status",t.status),t.ordering&&o.searchParams.append("ordering",t.ordering),t.page&&o.searchParams.append("page",t.page.toString()),t.page_size&&o.searchParams.append("page_size",t.page_size.toString()));let n=await fetch(o.toString(),{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!n.ok){if(401===n.status)throw Error("Unauthorized - please log in again");throw Error(`Failed to fetch orders: ${n.statusText}`)}let r=await n.json();return{...r,results:r.results.map(u)}}async function r(e,t){console.log("=== CREATE ORDER API CALLED ==="),console.log("API URL:",`${s}/orders/create/`),console.log("Order data:",e),console.log("Token available:",!!t);let o=await fetch(`${s}/orders/create/`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log("=== CREATE ORDER RESPONSE ==="),console.log("Status:",o.status),console.log("Status text:",o.statusText),console.log("Response OK:",o.ok),!o.ok){let e=await o.json();throw console.error("=== CREATE ORDER ERROR RESPONSE ==="),console.error("Error data:",e),Error(e.message||"Failed to create order")}let n=await o.json();console.log("=== CREATE ORDER SUCCESS ==="),console.log("Backend order response:",n);let r=u(n);return console.log("Transformed order:",r),r}async function i(e,t,o){let n={"Content-Type":"application/json"};o&&(n.Authorization=`Bearer ${o}`);let r=await fetch(`${s}/orders/payment-callback/`,{method:"POST",headers:n,body:JSON.stringify({uid:e,status:"paid"===t?"success":"failed"})});if(!r.ok)throw Error((await r.json()).message||"Failed to update order payment status");if((await r.json()).success&&o)return c(String(e),o);throw Error("Payment status update failed")}async function c(e,t){let o=await fetch(`${s}/orders/${e}/`,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!o.ok){if(401===o.status)throw Error("Unauthorized - please log in again");if(404===o.status)throw Error("Order not found");throw Error(`Failed to fetch order: ${o.statusText}`)}return u(await o.json())}async function a(e,t){let o=await fetch(`${s}/orders/${e}/cancel/`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!o.ok){if(401===o.status)throw Error("Unauthorized - please log in again");if(404===o.status)throw Error("Order not found");if(400===o.status)throw Error((await o.json()).detail||"Cannot cancel this order");throw Error(`Failed to cancel order: ${o.statusText}`)}return u(await o.json())}async function d(e,t){let o=await fetch(`${s}/orders/${e}/reorder/`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!o.ok){if(401===o.status)throw Error("Unauthorized - please log in again");if(404===o.status)throw Error("Order not found");if(400===o.status)throw Error((await o.json()).detail||"Cannot reorder these items");throw Error(`Failed to reorder items: ${o.statusText}`)}return o.json()}function l(e){return{id:e.id,product_id:e.product_id,variant_id:e.variant_id,product_name:e.product_name,variant_name:e.variant_name,product_image:e.product_image,product_slug:e.product_slug,price:e.price,quantity:e.quantity,color:e.color,size:e.size,subtotal:e.subtotal,sku_snapshot:e.sku_snapshot,name:e.product_name,image:e.product_image||"/placeholder-product.png",variant:e.variant_name}}function u(e){console.log("Transforming backend order:",e);let t=e.shipping_address_details||e.shipping_address||{};return console.log("Shipping address details:",t),console.log("User fields from backend:",{user_first_name:e.user_first_name,user_last_name:e.user_last_name,user_email:e.user_email,user_phone:e.user_phone,email_for_guest:e.email_for_guest}),{id:e.order_id||e.id,order_number:e.order_number,status:({pending_payment:"pending",processing:"processing",shipped:"shipped",delivered:"delivered",cancelled:"cancelled",refunded:"cancelled",failed:"cancelled"})[e.order_status]||"pending",payment_status:({pending:"pending",paid:"paid",failed:"failed",refunded_partial:"refunded",refunded_full:"refunded"})[e.payment_status]||"pending",created_at:e.created_at,updated_at:e.updated_at,total_amount:e.total_amount,shipping_cost:e.shipping_cost,discount_amount:e.discount_amount,subtotal_amount:e.subtotal_amount,items:e.items?.map(l)||[],shipping_address:{first_name:t.recipient_name?.split(" ")[0]||t.first_name||"",last_name:t.recipient_name?.split(" ").slice(1).join(" ")||t.last_name||"",street_address:t.street_address||t.address_line_1||"",city:t.city||"",state:t.state_province||t.state||t.region||"",postal_code:t.postal_code||t.zip_code||"",country:t.country_code||t.country||"",phone:t.phone_number||t.phone||""},shipping_method:e.shipping_method_details?.name||e.shipping_method||"Standard",shipping_method_details:e.shipping_method_details,tracking_number:e.tracking_number,estimated_delivery:e.estimated_delivery,customer_info:{first_name:e.user_first_name||t.recipient_name?.split(" ")[0]||"",last_name:e.user_last_name||t.recipient_name?.split(" ").slice(1).join(" ")||"",email:e.user_email||e.email_for_guest||"",phone:e.user_phone||t.phone_number||""}}}async function m(e,t){console.log("=== CREATE DIRECT ORDER API CALLED ==="),console.log("API URL:",`${s}/orders/create-direct/`),console.log("Order data:",e),console.log("Token available:",!!t);let o={"Content-Type":"application/json"};t&&(o.Authorization=`Bearer ${t}`);let n=await fetch(`${s}/orders/create-direct/`,{method:"POST",headers:o,body:JSON.stringify(e)});if(console.log("=== CREATE DIRECT ORDER RESPONSE ==="),console.log("Status:",n.status),console.log("Status text:",n.statusText),console.log("Response OK:",n.ok),!n.ok){let e=await n.json();throw console.error("=== CREATE DIRECT ORDER ERROR RESPONSE ==="),console.error("Error data:",e),Error(e.message||"Failed to create direct order")}let r=await n.json();console.log("=== CREATE DIRECT ORDER SUCCESS ==="),console.log("Backend order response:",r);let i=u(r);return console.log("Transformed direct order:",i),i}},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},88112:e=>{e.exports={container:"PaymentStep_container__1zxh8",title:"PaymentStep_title__gFgXC",paymentMethods:"PaymentStep_paymentMethods__1tkZm",paymentMethod:"PaymentStep_paymentMethod__a697r",selected:"PaymentStep_selected__OUj_V",radioButton:"PaymentStep_radioButton__EuoBj",methodContent:"PaymentStep_methodContent__BUTEF",methodIcon:"PaymentStep_methodIcon__r4F5I",methodInfo:"PaymentStep_methodInfo__IKeMb",methodName:"PaymentStep_methodName__CMpbX",methodDescription:"PaymentStep_methodDescription__cXbKx",cardForm:"PaymentStep_cardForm__YQ8mr",formGrid:"PaymentStep_formGrid__UX0_T",formGroup:"PaymentStep_formGroup__D1DFH",fullWidth:"PaymentStep_fullWidth__XOKDH",label:"PaymentStep_label__wZfTx",input:"PaymentStep_input__GXtae",error:"PaymentStep_error___BxeO",errorMessage:"PaymentStep_errorMessage__fzSBu",cardIcons:"PaymentStep_cardIcons__1sGzT",cardIcon:"PaymentStep_cardIcon__rcgEL",securityInfo:"PaymentStep_securityInfo__ubUzw",paymentInstructions:"PaymentStep_paymentInstructions__KsXNK",instructionsIcon:"PaymentStep_instructionsIcon__p_kFS",instructionsText:"PaymentStep_instructionsText__KAPr3",instructionsList:"PaymentStep_instructionsList__vFe4L",saveCard:"PaymentStep_saveCard__KpKdh",checkbox:"PaymentStep_checkbox__6EAy7",checkboxLabel:"PaymentStep_checkboxLabel__UGlsR",orderTotal:"PaymentStep_orderTotal__Yqzld",paymentStep:"PaymentStep_paymentStep__hm056"}},88321:e=>{e.exports={confirmationStep:"ConfirmationStep_confirmationStep__UN4sm",reviewText:"ConfirmationStep_reviewText__nLr0v",confirmationSections:"ConfirmationStep_confirmationSections__nXtvw",section:"ConfirmationStep_section__EFdIv",sectionContent:"ConfirmationStep_sectionContent__dLZSc",paymentMethod:"ConfirmationStep_paymentMethod__bPkQx",paymentIcon:"ConfirmationStep_paymentIcon__MuTJa",orderItems:"ConfirmationStep_orderItems__f_iXD",orderItem:"ConfirmationStep_orderItem__6ttSQ",itemInfo:"ConfirmationStep_itemInfo__he7Na",variant:"ConfirmationStep_variant__LyMI7",itemPrice:"ConfirmationStep_itemPrice__KpR5s",orderTotals:"ConfirmationStep_orderTotals__Q6hUC",totalLine:"ConfirmationStep_totalLine__XAEBs",grandTotal:"ConfirmationStep_grandTotal__Wdm90",terms:"ConfirmationStep_terms__8RjZr",termsLabel:"ConfirmationStep_termsLabel__dAkMs",termsError:"ConfirmationStep_termsError__MHzL5",fadeInError:"ConfirmationStep_fadeInError__a_wEm",placeOrderSection:"ConfirmationStep_placeOrderSection__Y8QIG",placeOrderButton:"ConfirmationStep_placeOrderButton__p3Ami",disabled:"ConfirmationStep_disabled__rCkEN",spinner:"ConfirmationStep_spinner__6MvNH",spin:"ConfirmationStep_spin__5A8Xa",securityNotice:"ConfirmationStep_securityNotice__SpvqX",redirectNotice:"ConfirmationStep_redirectNotice__CoqfD"}},90578:e=>{e.exports={orderSummary:"OrderSummary_orderSummary__Al7DB",orderItems:"OrderSummary_orderItems__vJsVE",orderItem:"OrderSummary_orderItem__FXDOc",itemImage:"OrderSummary_itemImage__CXmt9",placeholderImage:"OrderSummary_placeholderImage__e_olv",visible:"OrderSummary_visible__UzXqC",quantity:"OrderSummary_quantity__yzvTc",itemDetails:"OrderSummary_itemDetails__GJwZ_",itemName:"OrderSummary_itemName__bqPCA",itemVariant:"OrderSummary_itemVariant__JlRRz",itemOptions:"OrderSummary_itemOptions__QPoQ9",colorOption:"OrderSummary_colorOption__dng73",colorCircle:"OrderSummary_colorCircle__CabZL",itemPrice:"OrderSummary_itemPrice__Dc0jZ",discountSection:"OrderSummary_discountSection__JhQ2C",discountInput:"OrderSummary_discountInput__Dj6gk",discountCode:"OrderSummary_discountCode__hWzlh",applyButton:"OrderSummary_applyButton__98fda",orderTotals:"OrderSummary_orderTotals__iDnGc",totalLine:"OrderSummary_totalLine__p1NO5",discountAmount:"OrderSummary_discountAmount__zCMWX",grandTotal:"OrderSummary_grandTotal__HXncb",securityBadges:"OrderSummary_securityBadges__8S28i",badge:"OrderSummary_badge__n_yBw",badgeIcon:"OrderSummary_badgeIcon__nS_nY",loadingOverlay:"OrderSummary_loadingOverlay__OCdO_",spinner:"OrderSummary_spinner__oKbWI",spin:"OrderSummary_spin__sPrWa"}},94735:e=>{"use strict";e.exports=require("events")},95424:(e,t,o)=>{Promise.resolve().then(o.bind(o,42349))}};var t=require("../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),s=t.X(0,[447,966,658,325],()=>o(71753));module.exports=s})();