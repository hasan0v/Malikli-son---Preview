(()=>{var e={};e.id=501,e.ids=[501],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6865:(e,r,t)=>{Promise.resolve().then(t.bind(t,51893))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},16281:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=t(65239),o=t(48088),a=t(88170),i=t.n(a),n=t(30893),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);t.d(r,l);let d={children:["",{children:["order",{children:["complete",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,51893)),"C:\\Users\\alien\\Downloads\\Malikli-son - Preview\\frontend\\src\\app\\order\\complete\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,94431)),"C:\\Users\\alien\\Downloads\\Malikli-son - Preview\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\alien\\Downloads\\Malikli-son - Preview\\frontend\\src\\app\\order\\complete\\page.tsx"],m={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/order/complete/page",pathname:"/order/complete",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},35623:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c});var s=t(60687),o=t(43210),a=t(16189),i=t(54864),n=t(2381);t(72725);var l=t(91994),d=t.n(l);function c(){let{t:e}=(0,n.useI18n)(),r=(0,a.useRouter)(),t=(0,a.useSearchParams)(),{isAuthenticated:l}=(0,i.d4)(e=>e.auth),[c,m]=(0,o.useState)(null),[p,u]=(0,o.useState)(!0),[_,h]=(0,o.useState)(null);t?.get("orderId");let g=e=>"string"==typeof e?parseFloat(e):e,x=e=>g(e).toFixed(2),f=()=>{r.push("/")};return p?(0,s.jsx)("div",{className:d().completePage,children:(0,s.jsx)("div",{className:d().container,children:(0,s.jsxs)("div",{className:d().loadingState,children:[(0,s.jsx)("div",{className:d().spinner}),(0,s.jsx)("p",{children:e("orderComplete.loading")})]})})}):_?(0,s.jsx)("div",{className:d().completePage,children:(0,s.jsx)("div",{className:d().container,children:(0,s.jsxs)("div",{className:d().errorState,children:[(0,s.jsx)("div",{className:d().errorIcon,children:"⚠️"}),(0,s.jsx)("h1",{className:d().errorTitle,children:e("orderComplete.error.title")}),(0,s.jsx)("p",{className:d().errorMessage,children:_}),(0,s.jsxs)("div",{className:d().actions,children:[(0,s.jsx)("button",{onClick:()=>r.push("/orders"),className:d().primaryButton,children:e("orderComplete.error.viewOrders")}),(0,s.jsx)("button",{onClick:f,className:d().secondaryButton,children:e("orderComplete.error.backHome")})]})]})})}):(0,s.jsx)("div",{className:d().completePage,children:(0,s.jsx)("div",{className:d().container,children:(0,s.jsxs)("div",{className:d().successState,children:[(0,s.jsx)("div",{className:d().successIcon,children:(0,s.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("circle",{cx:"12",cy:"12",r:"10",fill:"#10B981"}),(0,s.jsx)("path",{d:"m9 12 2 2 4-4",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,s.jsx)("h1",{className:d().successTitle,children:e("orderComplete.success.title")}),(0,s.jsx)("p",{className:d().successMessage,children:e("orderComplete.success.message")}),c&&(0,s.jsxs)("div",{className:d().orderSummary,children:[(0,s.jsx)("h2",{className:d().summaryTitle,children:e("orderComplete.summary.title")}),(0,s.jsxs)("div",{className:d().summaryGrid,children:[(0,s.jsxs)("div",{className:d().summaryItem,children:[(0,s.jsxs)("span",{className:d().label,children:[e("orderComplete.summary.orderNumber"),":"]}),(0,s.jsx)("span",{className:d().value,children:c.order_number})]}),(0,s.jsxs)("div",{className:d().summaryItem,children:[(0,s.jsxs)("span",{className:d().label,children:[e("orderComplete.summary.total"),":"]}),(0,s.jsxs)("span",{className:d().value,children:["$",x(c.total_amount)]})]}),(0,s.jsxs)("div",{className:d().summaryItem,children:[(0,s.jsxs)("span",{className:d().label,children:[e("orderComplete.summary.paymentStatus"),":"]}),(0,s.jsx)("span",{className:`${d().value} ${d().statusPaid}`,children:e(`orders.paymentStatus.${c.payment_status}`)})]}),(0,s.jsxs)("div",{className:d().summaryItem,children:[(0,s.jsxs)("span",{className:d().label,children:[e("orderComplete.summary.orderStatus"),":"]}),(0,s.jsx)("span",{className:d().value,children:e(`orders.status.${c.status}`)})]})]}),(0,s.jsxs)("div",{className:d().itemsPreview,children:[(0,s.jsx)("h3",{className:d().itemsTitle,children:e("orderComplete.items.title")}),(0,s.jsxs)("div",{className:d().itemsList,children:[c.items.slice(0,3).map(r=>(0,s.jsxs)("div",{className:d().orderItem,children:[(0,s.jsx)("img",{src:r.image||"/placeholder-product.png",alt:r.name,className:d().itemImage}),(0,s.jsxs)("div",{className:d().itemDetails,children:[(0,s.jsx)("span",{className:d().itemName,children:r.name}),(0,s.jsxs)("span",{className:d().itemQuantity,children:[e("orderComplete.items.quantity"),": ",r.quantity]})]}),(0,s.jsxs)("span",{className:d().itemPrice,children:["$",x(g(r.price)*r.quantity)]})]},r.id)),c.items.length>3&&(0,s.jsx)("div",{className:d().moreItems,children:e("orderComplete.items.andMore",{count:c.items.length-3})})]})]})]}),(0,s.jsxs)("div",{className:d().nextSteps,children:[(0,s.jsx)("h3",{className:d().nextStepsTitle,children:e("orderComplete.nextSteps.title")}),(0,s.jsxs)("ul",{className:d().stepsList,children:[(0,s.jsx)("li",{children:e("orderComplete.nextSteps.confirmation")}),(0,s.jsx)("li",{children:e("orderComplete.nextSteps.processing")}),(0,s.jsx)("li",{children:e("orderComplete.nextSteps.shipping")}),(0,s.jsx)("li",{children:e("orderComplete.nextSteps.tracking")})]})]}),(0,s.jsxs)("div",{className:d().actions,children:[(0,s.jsx)("button",{onClick:()=>{c&&r.push(`/orders/${c.id}`)},className:d().primaryButton,children:e("orderComplete.actions.viewOrder")}),(0,s.jsx)("button",{onClick:f,className:d().secondaryButton,children:e("orderComplete.actions.continueShopping")})]})]})})})}},51893:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\alien\\\\Downloads\\\\Malikli-son - Preview\\\\frontend\\\\src\\\\app\\\\order\\\\complete\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\alien\\Downloads\\Malikli-son - Preview\\frontend\\src\\app\\order\\complete\\page.tsx","default")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70440:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>o});var s=t(31658);let o=async e=>[{type:"image/x-icon",sizes:"256x256",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},72017:(e,r,t)=>{Promise.resolve().then(t.bind(t,35623))},72725:(e,r,t)=>{"use strict";t.d(r,{FK:()=>o,It:()=>i,N4:()=>l,fS:()=>a,mK:()=>p,p:()=>n,u:()=>d});let s="http://localhost:8000/api/v1";async function o(e,r){let t=new URL(`${s}/orders/`);r&&(r.status&&"all"!==r.status&&t.searchParams.append("status",r.status),r.ordering&&t.searchParams.append("ordering",r.ordering),r.page&&t.searchParams.append("page",r.page.toString()),r.page_size&&t.searchParams.append("page_size",r.page_size.toString()));let o=await fetch(t.toString(),{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!o.ok){if(401===o.status)throw Error("Unauthorized - please log in again");throw Error(`Failed to fetch orders: ${o.statusText}`)}let a=await o.json();return{...a,results:a.results.map(m)}}async function a(e,r){console.log("=== CREATE ORDER API CALLED ==="),console.log("API URL:",`${s}/orders/create/`),console.log("Order data:",e),console.log("Token available:",!!r);let t=await fetch(`${s}/orders/create/`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log("=== CREATE ORDER RESPONSE ==="),console.log("Status:",t.status),console.log("Status text:",t.statusText),console.log("Response OK:",t.ok),!t.ok){let e=await t.json();throw console.error("=== CREATE ORDER ERROR RESPONSE ==="),console.error("Error data:",e),Error(e.message||"Failed to create order")}let o=await t.json();console.log("=== CREATE ORDER SUCCESS ==="),console.log("Backend order response:",o);let a=m(o);return console.log("Transformed order:",a),a}async function i(e,r,t){let o={"Content-Type":"application/json"};t&&(o.Authorization=`Bearer ${t}`);let a=await fetch(`${s}/orders/payment-callback/`,{method:"POST",headers:o,body:JSON.stringify({uid:e,status:"paid"===r?"success":"failed"})});if(!a.ok)throw Error((await a.json()).message||"Failed to update order payment status");if((await a.json()).success&&t)return n(String(e),t);throw Error("Payment status update failed")}async function n(e,r){let t=await fetch(`${s}/orders/${e}/`,{method:"GET",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(!t.ok){if(401===t.status)throw Error("Unauthorized - please log in again");if(404===t.status)throw Error("Order not found");throw Error(`Failed to fetch order: ${t.statusText}`)}return m(await t.json())}async function l(e,r){let t=await fetch(`${s}/orders/${e}/cancel/`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(!t.ok){if(401===t.status)throw Error("Unauthorized - please log in again");if(404===t.status)throw Error("Order not found");if(400===t.status)throw Error((await t.json()).detail||"Cannot cancel this order");throw Error(`Failed to cancel order: ${t.statusText}`)}return m(await t.json())}async function d(e,r){let t=await fetch(`${s}/orders/${e}/reorder/`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(!t.ok){if(401===t.status)throw Error("Unauthorized - please log in again");if(404===t.status)throw Error("Order not found");if(400===t.status)throw Error((await t.json()).detail||"Cannot reorder these items");throw Error(`Failed to reorder items: ${t.statusText}`)}return t.json()}function c(e){return{id:e.id,product_id:e.product_id,variant_id:e.variant_id,product_name:e.product_name,variant_name:e.variant_name,product_image:e.product_image,product_slug:e.product_slug,price:e.price,quantity:e.quantity,color:e.color,size:e.size,subtotal:e.subtotal,sku_snapshot:e.sku_snapshot,name:e.product_name,image:e.product_image||"/placeholder-product.png",variant:e.variant_name}}function m(e){console.log("Transforming backend order:",e);let r=e.shipping_address_details||e.shipping_address||{};return console.log("Shipping address details:",r),console.log("User fields from backend:",{user_first_name:e.user_first_name,user_last_name:e.user_last_name,user_email:e.user_email,user_phone:e.user_phone,email_for_guest:e.email_for_guest}),{id:e.order_id||e.id,order_number:e.order_number,status:({pending_payment:"pending",processing:"processing",shipped:"shipped",delivered:"delivered",cancelled:"cancelled",refunded:"cancelled",failed:"cancelled"})[e.order_status]||"pending",payment_status:({pending:"pending",paid:"paid",failed:"failed",refunded_partial:"refunded",refunded_full:"refunded"})[e.payment_status]||"pending",created_at:e.created_at,updated_at:e.updated_at,total_amount:e.total_amount,shipping_cost:e.shipping_cost,discount_amount:e.discount_amount,subtotal_amount:e.subtotal_amount,items:e.items?.map(c)||[],shipping_address:{first_name:r.recipient_name?.split(" ")[0]||r.first_name||"",last_name:r.recipient_name?.split(" ").slice(1).join(" ")||r.last_name||"",street_address:r.street_address||r.address_line_1||"",city:r.city||"",state:r.state_province||r.state||r.region||"",postal_code:r.postal_code||r.zip_code||"",country:r.country_code||r.country||"",phone:r.phone_number||r.phone||""},shipping_method:e.shipping_method_details?.name||e.shipping_method||"Standard",shipping_method_details:e.shipping_method_details,tracking_number:e.tracking_number,estimated_delivery:e.estimated_delivery,customer_info:{first_name:e.user_first_name||r.recipient_name?.split(" ")[0]||"",last_name:e.user_last_name||r.recipient_name?.split(" ").slice(1).join(" ")||"",email:e.user_email||e.email_for_guest||"",phone:e.user_phone||r.phone_number||""}}}async function p(e,r){console.log("=== CREATE DIRECT ORDER API CALLED ==="),console.log("API URL:",`${s}/orders/create-direct/`),console.log("Order data:",e),console.log("Token available:",!!r);let t={"Content-Type":"application/json"};r&&(t.Authorization=`Bearer ${r}`);let o=await fetch(`${s}/orders/create-direct/`,{method:"POST",headers:t,body:JSON.stringify(e)});if(console.log("=== CREATE DIRECT ORDER RESPONSE ==="),console.log("Status:",o.status),console.log("Status text:",o.statusText),console.log("Response OK:",o.ok),!o.ok){let e=await o.json();throw console.error("=== CREATE DIRECT ORDER ERROR RESPONSE ==="),console.error("Error data:",e),Error(e.message||"Failed to create direct order")}let a=await o.json();console.log("=== CREATE DIRECT ORDER SUCCESS ==="),console.log("Backend order response:",a);let i=m(a);return console.log("Transformed direct order:",i),i}},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91994:e=>{e.exports={completePage:"orderComplete_completePage__VBNyh",container:"orderComplete_container__1AWZK",loadingState:"orderComplete_loadingState__XdTg8",spinner:"orderComplete_spinner__yLpoy",spin:"orderComplete_spin__SYPV_",errorState:"orderComplete_errorState__Jtetn",errorIcon:"orderComplete_errorIcon__ZTiUU",errorTitle:"orderComplete_errorTitle__rKeak",errorMessage:"orderComplete_errorMessage__jkoJT",successState:"orderComplete_successState__ZjvM_",successIcon:"orderComplete_successIcon__51aNq",successTitle:"orderComplete_successTitle__GKLLe",successMessage:"orderComplete_successMessage__NyB_p",orderSummary:"orderComplete_orderSummary__u_nq7",summaryTitle:"orderComplete_summaryTitle__1Jlg3",summaryGrid:"orderComplete_summaryGrid__u9RWl",summaryItem:"orderComplete_summaryItem__L49fo",label:"orderComplete_label__By6h0",value:"orderComplete_value__RJSQ4",statusPaid:"orderComplete_statusPaid__8E4vs",itemsPreview:"orderComplete_itemsPreview__rU39i",itemsTitle:"orderComplete_itemsTitle__K8cTC",itemsList:"orderComplete_itemsList__qwDeT",orderItem:"orderComplete_orderItem__KZbrS",itemImage:"orderComplete_itemImage__epiVu",itemDetails:"orderComplete_itemDetails__ZaM3G",itemName:"orderComplete_itemName__jgxU6",itemQuantity:"orderComplete_itemQuantity__dzTmF",itemPrice:"orderComplete_itemPrice__0HkhO",moreItems:"orderComplete_moreItems__M2lfF",nextSteps:"orderComplete_nextSteps__NwBrp",nextStepsTitle:"orderComplete_nextStepsTitle__TFwiL",stepsList:"orderComplete_stepsList__tT4is",actions:"orderComplete_actions__t3DhH",primaryButton:"orderComplete_primaryButton__2OfuW",secondaryButton:"orderComplete_secondaryButton__ftY9_"}},94735:e=>{"use strict";e.exports=require("events")}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[447,966,658,325],()=>t(16281));module.exports=s})();