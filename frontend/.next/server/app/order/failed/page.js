(()=>{var e={};e.id=163,e.ids=[163],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},26887:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>t});let t=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\alien\\\\Downloads\\\\Malikli-son - Preview\\\\frontend\\\\src\\\\app\\\\order\\\\failed\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\alien\\Downloads\\Malikli-son - Preview\\frontend\\src\\app\\order\\failed\\page.tsx","default")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},35741:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>l});var t=s(65239),a=s(48088),o=s(88170),i=s.n(o),n=s(30893),d={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(r,d);let l={children:["",{children:["order",{children:["failed",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,26887)),"C:\\Users\\alien\\Downloads\\Malikli-son - Preview\\frontend\\src\\app\\order\\failed\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,94431)),"C:\\Users\\alien\\Downloads\\Malikli-son - Preview\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\alien\\Downloads\\Malikli-son - Preview\\frontend\\src\\app\\order\\failed\\page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/order/failed/page",pathname:"/order/failed",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},54938:e=>{e.exports={failedPage:"orderFailed_failedPage__pbbCu",container:"orderFailed_container__eH3Mk",loadingState:"orderFailed_loadingState__Es11V",spinner:"orderFailed_spinner__w43Kg",spin:"orderFailed_spin__1UL6W",failureState:"orderFailed_failureState__hwkk3",failureIcon:"orderFailed_failureIcon__1aBU9",failureTitle:"orderFailed_failureTitle__FgsCj",failureMessage:"orderFailed_failureMessage__OXI7u",reasonBox:"orderFailed_reasonBox__1x9HI",reasonTitle:"orderFailed_reasonTitle__pJp08",reasonText:"orderFailed_reasonText__HqOC7",orderInfo:"orderFailed_orderInfo__6j95A",infoTitle:"orderFailed_infoTitle__BAJwa",infoGrid:"orderFailed_infoGrid__syPxN",infoItem:"orderFailed_infoItem__xgB6U",label:"orderFailed_label__fkFQ6",value:"orderFailed_value__HW5Ei",statusFailed:"orderFailed_statusFailed__5p_bL",paymentFailed:"orderFailed_paymentFailed__L0EPd",nextSteps:"orderFailed_nextSteps__nNs5z",nextStepsTitle:"orderFailed_nextStepsTitle__oH42R",stepsList:"orderFailed_stepsList__bD7Dk",commonIssues:"orderFailed_commonIssues__FyxUA",issuesTitle:"orderFailed_issuesTitle__tUnHx",issuesList:"orderFailed_issuesList__SNXOB",issue:"orderFailed_issue__KfJzs",actions:"orderFailed_actions__sfzSE",primaryButton:"orderFailed_primaryButton__njV23",secondaryButton:"orderFailed_secondaryButton__RJP2q",tertiaryButton:"orderFailed_tertiaryButton__Tu14W"}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},59063:(e,r,s)=>{Promise.resolve().then(s.bind(s,26887))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},67085:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>c});var t=s(60687),a=s(43210),o=s(16189),i=s(54864),n=s(2381);s(72725);var d=s(54938),l=s.n(d);function c(){let e,{t:r}=(0,n.useI18n)(),s=(0,o.useRouter)(),d=(0,o.useSearchParams)(),{isAuthenticated:c}=(0,i.d4)(e=>e.auth),[u,p]=(0,a.useState)(null),[_,m]=(0,a.useState)(!0),[h,f]=(0,a.useState)(null);d?.get("orderId");let x=d?.get("reason");if(_)return(0,t.jsx)("div",{className:l().failedPage,children:(0,t.jsx)("div",{className:l().container,children:(0,t.jsxs)("div",{className:l().loadingState,children:[(0,t.jsx)("div",{className:l().spinner}),(0,t.jsx)("p",{children:r("orderFailed.loading")})]})})});return(0,t.jsx)("div",{className:l().failedPage,children:(0,t.jsx)("div",{className:l().container,children:(0,t.jsxs)("div",{className:l().failureState,children:[(0,t.jsx)("div",{className:l().failureIcon,children:(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("circle",{cx:"12",cy:"12",r:"10",fill:"#EF4444"}),(0,t.jsx)("path",{d:"m15 9-6 6m0-6 6 6",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,t.jsx)("h1",{className:l().failureTitle,children:r("orderFailed.title")}),(0,t.jsx)("p",{className:l().failureMessage,children:r("orderFailed.message")}),x&&(0,t.jsxs)("div",{className:l().reasonBox,children:[(0,t.jsx)("h3",{className:l().reasonTitle,children:r("orderFailed.reason.title")}),(0,t.jsx)("p",{className:l().reasonText,children:decodeURIComponent(x)})]}),u&&(0,t.jsxs)("div",{className:l().orderInfo,children:[(0,t.jsx)("h2",{className:l().infoTitle,children:r("orderFailed.orderInfo.title")}),(0,t.jsxs)("div",{className:l().infoGrid,children:[(0,t.jsxs)("div",{className:l().infoItem,children:[(0,t.jsxs)("span",{className:l().label,children:[r("orderFailed.orderInfo.orderNumber"),":"]}),(0,t.jsx)("span",{className:l().value,children:u.order_number})]}),(0,t.jsxs)("div",{className:l().infoItem,children:[(0,t.jsxs)("span",{className:l().label,children:[r("orderFailed.orderInfo.amount"),":"]}),(0,t.jsxs)("span",{className:l().value,children:["$",("string"==typeof(e=u.total_amount)?parseFloat(e):e).toFixed(2)]})]}),(0,t.jsxs)("div",{className:l().infoItem,children:[(0,t.jsxs)("span",{className:l().label,children:[r("orderFailed.orderInfo.status"),":"]}),(0,t.jsx)("span",{className:`${l().value} ${l().statusFailed}`,children:r(`orders.status.${u.status}`)})]}),(0,t.jsxs)("div",{className:l().infoItem,children:[(0,t.jsxs)("span",{className:l().label,children:[r("orderFailed.orderInfo.paymentStatus"),":"]}),(0,t.jsx)("span",{className:`${l().value} ${l().paymentFailed}`,children:r(`orders.paymentStatus.${u.payment_status}`)})]})]})]}),(0,t.jsxs)("div",{className:l().nextSteps,children:[(0,t.jsx)("h3",{className:l().nextStepsTitle,children:r("orderFailed.nextSteps.title")}),(0,t.jsxs)("ul",{className:l().stepsList,children:[(0,t.jsx)("li",{children:r("orderFailed.nextSteps.checkPayment")}),(0,t.jsx)("li",{children:r("orderFailed.nextSteps.tryAgain")}),(0,t.jsx)("li",{children:r("orderFailed.nextSteps.differentMethod")}),(0,t.jsx)("li",{children:r("orderFailed.nextSteps.contactSupport")})]})]}),(0,t.jsxs)("div",{className:l().commonIssues,children:[(0,t.jsx)("h3",{className:l().issuesTitle,children:r("orderFailed.commonIssues.title")}),(0,t.jsxs)("div",{className:l().issuesList,children:[(0,t.jsxs)("div",{className:l().issue,children:[(0,t.jsx)("h4",{children:r("orderFailed.commonIssues.insufficientFunds.title")}),(0,t.jsx)("p",{children:r("orderFailed.commonIssues.insufficientFunds.description")})]}),(0,t.jsxs)("div",{className:l().issue,children:[(0,t.jsx)("h4",{children:r("orderFailed.commonIssues.cardExpired.title")}),(0,t.jsx)("p",{children:r("orderFailed.commonIssues.cardExpired.description")})]}),(0,t.jsxs)("div",{className:l().issue,children:[(0,t.jsx)("h4",{children:r("orderFailed.commonIssues.networkError.title")}),(0,t.jsx)("p",{children:r("orderFailed.commonIssues.networkError.description")})]})]})]}),(0,t.jsxs)("div",{className:l().actions,children:[(0,t.jsx)("button",{onClick:()=>{u?s.push("/checkout"):s.push("/cart")},className:l().primaryButton,children:r("orderFailed.actions.tryAgain")}),(0,t.jsx)("button",{onClick:()=>{s.push("/contact")},className:l().secondaryButton,children:r("orderFailed.actions.contactSupport")}),(0,t.jsx)("button",{onClick:()=>{s.push("/orders")},className:l().tertiaryButton,children:r("orderFailed.actions.viewOrders")})]})]})})})}},70440:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>a});var t=s(31658);let a=async e=>[{type:"image/x-icon",sizes:"256x256",url:(0,t.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},72725:(e,r,s)=>{"use strict";s.d(r,{FK:()=>a,It:()=>i,N4:()=>d,fS:()=>o,mK:()=>p,p:()=>n,u:()=>l});let t="http://localhost:8000/api/v1";async function a(e,r){let s=new URL(`${t}/orders/`);r&&(r.status&&"all"!==r.status&&s.searchParams.append("status",r.status),r.ordering&&s.searchParams.append("ordering",r.ordering),r.page&&s.searchParams.append("page",r.page.toString()),r.page_size&&s.searchParams.append("page_size",r.page_size.toString()));let a=await fetch(s.toString(),{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!a.ok){if(401===a.status)throw Error("Unauthorized - please log in again");throw Error(`Failed to fetch orders: ${a.statusText}`)}let o=await a.json();return{...o,results:o.results.map(u)}}async function o(e,r){console.log("=== CREATE ORDER API CALLED ==="),console.log("API URL:",`${t}/orders/create/`),console.log("Order data:",e),console.log("Token available:",!!r);let s=await fetch(`${t}/orders/create/`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log("=== CREATE ORDER RESPONSE ==="),console.log("Status:",s.status),console.log("Status text:",s.statusText),console.log("Response OK:",s.ok),!s.ok){let e=await s.json();throw console.error("=== CREATE ORDER ERROR RESPONSE ==="),console.error("Error data:",e),Error(e.message||"Failed to create order")}let a=await s.json();console.log("=== CREATE ORDER SUCCESS ==="),console.log("Backend order response:",a);let o=u(a);return console.log("Transformed order:",o),o}async function i(e,r,s){let a={"Content-Type":"application/json"};s&&(a.Authorization=`Bearer ${s}`);let o=await fetch(`${t}/orders/payment-callback/`,{method:"POST",headers:a,body:JSON.stringify({uid:e,status:"paid"===r?"success":"failed"})});if(!o.ok)throw Error((await o.json()).message||"Failed to update order payment status");if((await o.json()).success&&s)return n(String(e),s);throw Error("Payment status update failed")}async function n(e,r){let s=await fetch(`${t}/orders/${e}/`,{method:"GET",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(!s.ok){if(401===s.status)throw Error("Unauthorized - please log in again");if(404===s.status)throw Error("Order not found");throw Error(`Failed to fetch order: ${s.statusText}`)}return u(await s.json())}async function d(e,r){let s=await fetch(`${t}/orders/${e}/cancel/`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(!s.ok){if(401===s.status)throw Error("Unauthorized - please log in again");if(404===s.status)throw Error("Order not found");if(400===s.status)throw Error((await s.json()).detail||"Cannot cancel this order");throw Error(`Failed to cancel order: ${s.statusText}`)}return u(await s.json())}async function l(e,r){let s=await fetch(`${t}/orders/${e}/reorder/`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(!s.ok){if(401===s.status)throw Error("Unauthorized - please log in again");if(404===s.status)throw Error("Order not found");if(400===s.status)throw Error((await s.json()).detail||"Cannot reorder these items");throw Error(`Failed to reorder items: ${s.statusText}`)}return s.json()}function c(e){return{id:e.id,product_id:e.product_id,variant_id:e.variant_id,product_name:e.product_name,variant_name:e.variant_name,product_image:e.product_image,product_slug:e.product_slug,price:e.price,quantity:e.quantity,color:e.color,size:e.size,subtotal:e.subtotal,sku_snapshot:e.sku_snapshot,name:e.product_name,image:e.product_image||"/placeholder-product.png",variant:e.variant_name}}function u(e){console.log("Transforming backend order:",e);let r=e.shipping_address_details||e.shipping_address||{};return console.log("Shipping address details:",r),console.log("User fields from backend:",{user_first_name:e.user_first_name,user_last_name:e.user_last_name,user_email:e.user_email,user_phone:e.user_phone,email_for_guest:e.email_for_guest}),{id:e.order_id||e.id,order_number:e.order_number,status:({pending_payment:"pending",processing:"processing",shipped:"shipped",delivered:"delivered",cancelled:"cancelled",refunded:"cancelled",failed:"cancelled"})[e.order_status]||"pending",payment_status:({pending:"pending",paid:"paid",failed:"failed",refunded_partial:"refunded",refunded_full:"refunded"})[e.payment_status]||"pending",created_at:e.created_at,updated_at:e.updated_at,total_amount:e.total_amount,shipping_cost:e.shipping_cost,discount_amount:e.discount_amount,subtotal_amount:e.subtotal_amount,items:e.items?.map(c)||[],shipping_address:{first_name:r.recipient_name?.split(" ")[0]||r.first_name||"",last_name:r.recipient_name?.split(" ").slice(1).join(" ")||r.last_name||"",street_address:r.street_address||r.address_line_1||"",city:r.city||"",state:r.state_province||r.state||r.region||"",postal_code:r.postal_code||r.zip_code||"",country:r.country_code||r.country||"",phone:r.phone_number||r.phone||""},shipping_method:e.shipping_method_details?.name||e.shipping_method||"Standard",shipping_method_details:e.shipping_method_details,tracking_number:e.tracking_number,estimated_delivery:e.estimated_delivery,customer_info:{first_name:e.user_first_name||r.recipient_name?.split(" ")[0]||"",last_name:e.user_last_name||r.recipient_name?.split(" ").slice(1).join(" ")||"",email:e.user_email||e.email_for_guest||"",phone:e.user_phone||r.phone_number||""}}}async function p(e,r){console.log("=== CREATE DIRECT ORDER API CALLED ==="),console.log("API URL:",`${t}/orders/create-direct/`),console.log("Order data:",e),console.log("Token available:",!!r);let s={"Content-Type":"application/json"};r&&(s.Authorization=`Bearer ${r}`);let a=await fetch(`${t}/orders/create-direct/`,{method:"POST",headers:s,body:JSON.stringify(e)});if(console.log("=== CREATE DIRECT ORDER RESPONSE ==="),console.log("Status:",a.status),console.log("Status text:",a.statusText),console.log("Response OK:",a.ok),!a.ok){let e=await a.json();throw console.error("=== CREATE DIRECT ORDER ERROR RESPONSE ==="),console.error("Error data:",e),Error(e.message||"Failed to create direct order")}let o=await a.json();console.log("=== CREATE DIRECT ORDER SUCCESS ==="),console.log("Backend order response:",o);let i=u(o);return console.log("Transformed direct order:",i),i}},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},87087:(e,r,s)=>{Promise.resolve().then(s.bind(s,67085))},94735:e=>{"use strict";e.exports=require("events")}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[447,966,658,325],()=>s(35741));module.exports=t})();