"use strict";exports.id=8852,exports.ids=[8852],exports.modules={15471:(a,t,d)=>{d.d(t,{G:()=>r,j:()=>i});var e=d(54864);let i=()=>(0,e.wA)(),r=e.d4},26335:(a,t,d)=>{d.d(t,{Ay:()=>b,Bb:()=>w,RO:()=>C,So:()=>l,dt:()=>I,sL:()=>p,sX:()=>h,tA:()=>u,u$:()=>S});var e=d(40678),i=d(15191),r=d(48557);let o=()=>[],s=a=>{},c=()=>{},n=a=>{},l=(0,e.zD)("cart/syncWithBackend",async(a,{getState:t,rejectWithValue:d})=>{try{let a=t(),d=(0,i.vM)(a.cart.items),e=a.cart.cartId,r=await (0,i.I1)({items:d,guest_cart_id:e});if(!r)throw Error("Failed to sync cart with backend");return r}catch(a){return d(a.message||"Failed to sync cart")}}),p=(0,e.zD)("cart/mergeGuestCart",async({guestCartId:a,strategy:t},{rejectWithValue:d})=>{try{let d=await (0,i.vI)({guest_cart_id:a,merge_strategy:t});if(!d)throw Error("Failed to merge guest cart");return d}catch(a){return d(a.message||"Failed to merge cart")}}),u=(0,e.zD)("cart/loadFromBackend",async(a={},{rejectWithValue:t})=>{try{return await (0,i.P_)(a.guestCartId)}catch(a){return t(a.message||"Failed to load cart from backend")}}),y=(0,e.zD)("cart/bulkAddToUserCart",async(a,{getState:t,rejectWithValue:e})=>{try{let a=t(),{bulkAddToCart:e}=await Promise.resolve().then(d.bind(d,15191)),r=(0,i.vM)(a.cart.items);if(0===r.length)return null;let o=await e(r);if(!o)throw Error("Failed to bulk add items to cart");return o}catch(a){return e(a.message||"Failed to bulk add items to cart")}}),_=(0,e.zD)("cart/addToCartAPI",async(a,{getState:t,rejectWithValue:e})=>{try{let e=t(),{bulkAddToCart:i}=await Promise.resolve().then(d.bind(d,15191)),o=[(0,r.s)(a)].filter(a=>a.drop_product_id||a.product_variant_id);if(0===o.length)throw Error("Invalid item to add to cart");let s=await i(o,e.cart.cartId);if(!s)throw Error("Failed to add item to cart");return s}catch(a){return e(a.message||"Failed to add item to cart")}}),m=(0,e.zD)("cart/updateCartItemQuantityAPI",async(a,{getState:t,rejectWithValue:e})=>{try{t();let{updateCartItemQuantity:e}=await Promise.resolve().then(d.bind(d,15191)),i=await e({itemId:a.id,variantId:a.variantId,color:a.color,size:a.size,quantity:a.quantity});if(!i)throw Error("Failed to update cart item quantity");return i}catch(a){return e(a.message||"Failed to update cart item quantity")}}),g={items:o(),cartId:c(),isLoading:!1,needsSync:!1,lastSyncTime:void 0},v=(0,e.Z0)({name:"cart",initialState:g,reducers:{addToCart:(a,t)=>{let d=a.items.find(a=>a.id===t.payload.id&&a.variantId===t.payload.variantId&&a.color===t.payload.color&&a.size===t.payload.size);d?d.quantity+=t.payload.quantity||1:a.items.push(t.payload),s(a.items),a.needsSync=!0},removeFromCart:(a,t)=>{a.items=a.items.filter(a=>a.id!==t.payload.id||a.variantId!==t.payload.variantId||a.color!==t.payload.color||a.size!==t.payload.size),s(a.items),a.needsSync=!0},updateQuantity:(a,t)=>{let d=a.items.find(a=>a.id===t.payload.id&&a.variantId===t.payload.variantId&&a.color===t.payload.color&&a.size===t.payload.size);d&&(d.quantity=Math.max(1,Math.floor(t.payload.quantity))),s(a.items),a.needsSync=!0},clearCart:a=>{a.items=[],a.needsSync=!1,s([])},loadCart:a=>{a.items=o(),a.cartId=c()},setCartId:(a,t)=>{a.cartId=t.payload,n(t.payload)},markAsSynced:a=>{a.needsSync=!1,a.lastSyncTime=Date.now()},setCartFromBackend:(a,t)=>{a.items=t.payload.items.map(a=>(0,r.E)(a)),a.cartId=t.payload.cart_id,a.needsSync=!1,a.lastSyncTime=Date.now(),s(a.items),n(t.payload.cart_id)}},extraReducers:a=>{a.addCase(l.pending,a=>{a.isLoading=!0,a.error=void 0}).addCase(l.fulfilled,(a,t)=>{a.isLoading=!1,a.needsSync=!1,a.lastSyncTime=Date.now(),t.payload.cart_id&&(a.cartId=t.payload.cart_id,n(t.payload.cart_id))}).addCase(l.rejected,(a,t)=>{a.isLoading=!1,a.error=t.payload}),a.addCase(p.pending,a=>{a.isLoading=!0,a.error=void 0}).addCase(p.fulfilled,(a,t)=>{a.isLoading=!1,a.needsSync=!1,a.lastSyncTime=Date.now(),a.items=t.payload.items.map(a=>(0,r.E)(a)),a.cartId=t.payload.cart_id,s(a.items),n(t.payload.cart_id)}).addCase(p.rejected,(a,t)=>{a.isLoading=!1,a.error=t.payload}),a.addCase(u.pending,a=>{a.isLoading=!0,a.error=void 0}).addCase(u.fulfilled,(a,t)=>{a.isLoading=!1,t.payload&&(a.items=t.payload.items.map(a=>(0,r.E)(a)),t.payload.cart_id&&(a.cartId=t.payload.cart_id,n(t.payload.cart_id)),a.needsSync=!1,a.lastSyncTime=Date.now(),s(a.items))}).addCase(u.rejected,(a,t)=>{a.isLoading=!1,a.error=t.payload}),a.addCase(y.pending,a=>{a.isLoading=!0,a.error=void 0}).addCase(y.fulfilled,(a,t)=>{a.isLoading=!1,a.needsSync=!1,a.lastSyncTime=Date.now(),t.payload&&(a.items=t.payload.items.map(a=>(0,r.E)(a)),t.payload.cart_id&&(a.cartId=t.payload.cart_id,n(t.payload.cart_id)),s(a.items))}).addCase(y.rejected,(a,t)=>{a.isLoading=!1,a.error=t.payload}),a.addCase(_.pending,a=>{a.isLoading=!0,a.error=void 0}).addCase(_.fulfilled,(a,t)=>{a.isLoading=!1,a.needsSync=!1,a.lastSyncTime=Date.now(),t.payload&&(a.items=t.payload.items.map(a=>(0,r.E)(a)),t.payload.cart_id&&(a.cartId=t.payload.cart_id,n(t.payload.cart_id)),s(a.items))}).addCase(_.rejected,(a,t)=>{a.isLoading=!1,a.error=t.payload}).addCase(m.pending,a=>{a.isLoading=!0,a.error=void 0}).addCase(m.fulfilled,(a,t)=>{a.isLoading=!1,a.needsSync=!1,a.lastSyncTime=Date.now(),t.payload&&(a.items=t.payload.items.map(a=>(0,r.E)(a)),t.payload.cart_id&&(a.cartId=t.payload.cart_id,n(t.payload.cart_id)),s(a.items))}).addCase(m.rejected,(a,t)=>{a.isLoading=!1,a.error=t.payload})}}),{addToCart:f,removeFromCart:I,updateQuantity:C,clearCart:h,loadCart:w,setCartId:z,markAsSynced:S,setCartFromBackend:L}=v.actions,b=v.reducer},48557:(a,t,d)=>{function e(a){let t,d,e,i,r;if(a.drop_product_details?t={name:a.drop_product_details.product.name,basePrice:a.drop_product_details.product.base_price}:a.product_variant_details?.product_details&&(t={name:a.product_variant_details.product_details.name,basePrice:parseFloat(a.product_variant_details.product_details.base_price)}),a.product_variant_details?.image)d=a.product_variant_details.image;else if(a.product_variant_details?.images&&a.product_variant_details.images.length>0){let t=a.product_variant_details.images.find(a=>a.is_primary);d=t?t.image:a.product_variant_details.images[0].image}else if(a.product_variant_details?.product_details?.images&&a.product_variant_details.product_details.images.length>0){let t=a.product_variant_details.product_details.images.find(a=>a.is_primary);d=t?t.image:a.product_variant_details.product_details.images[0].image}else a.drop_product_details?.image&&(d=a.drop_product_details.image);return a.color?e=a.color:a.product_variant_details?.color_info?.name&&(e=a.product_variant_details.color_info.name),a.color_code?i=a.color_code:a.product_variant_details?.color_info?.hex_code&&(i=a.product_variant_details.color_info.hex_code),a.size?r=a.size:a.product_variant_details?.size_info?.name&&(r=a.product_variant_details.size_info.name),{id:a.drop_product||a.product_variant||a.id,variantId:a.product_variant||void 0,dropProductId:a.drop_product||void 0,isDropProduct:!!a.drop_product,name:t?.name||"Unknown Product",price:a.unit_price,quantity:a.quantity,image:d,color:e,colorCode:i,size:r}}function i(a){return a.isDropProduct||a.dropProductId?{drop_product_id:a.dropProductId||a.id,quantity:a.quantity,color:a.color||void 0,color_code:a.colorCode||void 0,size:a.size||void 0}:a.variantId?{product_variant_id:a.variantId,quantity:a.quantity,color:a.color||void 0,color_code:a.colorCode||void 0,size:a.size||void 0}:(console.warn("Product without variant ID found in cart:",a),{quantity:a.quantity,color:a.color||void 0,color_code:a.colorCode||void 0,size:a.size||void 0})}d.d(t,{E:()=>e,s:()=>i})},79752:(a,t,d)=>{d.d(t,{y:()=>l});var e=d(40678);let i=(0,e.Z0)({name:"ui",initialState:{isMobileMenuOpen:!1,globalLoading:!1},reducers:{toggleMobileMenu:a=>{a.isMobileMenuOpen=!a.isMobileMenuOpen},setGlobalLoading:(a,t)=>{a.globalLoading=t.payload}}}),{toggleMobileMenu:r,setGlobalLoading:o}=i.actions,s=i.reducer;var c=d(26335),n=d(83023);(0,e.U1)({reducer:{ui:s,cart:c.Ay,auth:n.Ay}});let l=()=>(0,e.U1)({reducer:{ui:s,cart:c.Ay,auth:n.Ay},devTools:!1})}};