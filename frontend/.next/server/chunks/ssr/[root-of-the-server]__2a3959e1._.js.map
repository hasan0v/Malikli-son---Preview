{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alien/Downloads/Malikli-son%20-%20Preview/frontend/src/store/slices/uiSlice.ts"],"sourcesContent":["// src/store/slices/uiSlice.ts\r\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\n\r\ninterface UiState {\r\n  isMobileMenuOpen: boolean;\r\n  globalLoading: boolean;\r\n}\r\n\r\nconst initialState: UiState = {\r\n  isMobileMenuOpen: false,\r\n  globalLoading: false,\r\n};\r\n\r\nconst uiSlice = createSlice({\r\n  name: 'ui',\r\n  initialState,\r\n  reducers: {\r\n    toggleMobileMenu: (state) => {\r\n      state.isMobileMenuOpen = !state.isMobileMenuOpen;\r\n    },\r\n    setGlobalLoading: (state, action: PayloadAction<boolean>) => {\r\n      state.globalLoading = action.payload;\r\n    },\r\n  },\r\n});\r\n\r\nexport const { toggleMobileMenu, setGlobalLoading } = uiSlice.actions;\r\nexport default uiSlice.reducer; // Export the reducer"],"names":[],"mappings":"AAAA,8BAA8B;;;;;;AAC9B;;AAOA,MAAM,eAAwB;IAC5B,kBAAkB;IAClB,eAAe;AACjB;AAEA,MAAM,UAAU,CAAA,GAAA,2LAAA,CAAA,cAAW,AAAD,EAAE;IAC1B,MAAM;IACN;IACA,UAAU;QACR,kBAAkB,CAAC;YACjB,MAAM,gBAAgB,GAAG,CAAC,MAAM,gBAAgB;QAClD;QACA,kBAAkB,CAAC,OAAO;YACxB,MAAM,aAAa,GAAG,OAAO,OAAO;QACtC;IACF;AACF;AAEO,MAAM,EAAE,gBAAgB,EAAE,gBAAgB,EAAE,GAAG,QAAQ,OAAO;uCACtD,QAAQ,OAAO;CAAE,qBAAqB","debugId":null}},
    {"offset": {"line": 48, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alien/Downloads/Malikli-son%20-%20Preview/frontend/src/types/backendCart.ts"],"sourcesContent":["// types/backendCart.ts\r\n// Backend cart item structure from Django API\r\nexport interface BackendCartItem {\r\n  id: number;\r\n  cart: string;\r\n  drop_product: number | null;\r\n  product_variant: number | null;\r\n  quantity: number;\r\n  color: string | null;\r\n  color_code: string | null;\r\n  size: string | null;  drop_product_details?: {\r\n    id: number;\r\n    product: {\r\n      id: number;\r\n      name: string;\r\n      base_price: number;\r\n    };\r\n    drop_price: number;\r\n    current_stock_quantity: number;\r\n    image?: string;\r\n    // Add other fields as needed\r\n  };  product_variant_details?: {\r\n    id: number;\r\n    product: number;\r\n    product_details: {\r\n      id: number;\r\n      name: string;\r\n      slug: string;\r\n      base_price: string;\r\n      category_name?: string;\r\n      images?: Array<{\r\n        id: number;\r\n        image: string;\r\n        alt_text?: string;\r\n        display_order: number;\r\n        is_primary: boolean;\r\n      }>;\r\n    };\r\n    additional_price: string;\r\n    size_info?: {\r\n      id: number;\r\n      name: string;\r\n    };\r\n    color_info?: {\r\n      id: number;\r\n      name: string;\r\n      hex_code?: string;\r\n    };\r\n    image?: string;\r\n    images?: Array<{\r\n      id: number;\r\n      image: string;\r\n      alt_text?: string;\r\n      display_order: number;\r\n      is_primary: boolean;\r\n    }>;\r\n    // Add other fields as needed\r\n  };\r\n  unit_price: number;\r\n  total_price: number;\r\n  added_at: string;\r\n}\r\n\r\nexport interface BackendCart {\r\n  cart_id: string;\r\n  user?: number;\r\n  user_username?: string;\r\n  items: BackendCartItem[];\r\n  total_items: number;\r\n  subtotal: number;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\n// Helper function to convert backend cart item to frontend cart item\r\nexport function convertBackendItemToFrontend(backendItem: BackendCartItem) {\r\n  // Extract product details - for drop products it's direct, for variants it's nested in product_details\r\n  let productInfo;\r\n  if (backendItem.drop_product_details) {\r\n    productInfo = {\r\n      name: backendItem.drop_product_details.product.name,\r\n      basePrice: backendItem.drop_product_details.product.base_price,\r\n    };\r\n  } else if (backendItem.product_variant_details?.product_details) {\r\n    productInfo = {\r\n      name: backendItem.product_variant_details.product_details.name,\r\n      basePrice: parseFloat(backendItem.product_variant_details.product_details.base_price),\r\n    };\r\n  }\r\n  \r\n  // Extract image from variant or product details\r\n  let image: string | undefined;\r\n  if (backendItem.product_variant_details?.image) {\r\n    image = backendItem.product_variant_details.image;\r\n  } else if (backendItem.product_variant_details?.images && backendItem.product_variant_details.images.length > 0) {\r\n    // Use the primary image or first image if available\r\n    const primaryImage = backendItem.product_variant_details.images.find(img => img.is_primary);\r\n    image = primaryImage ? primaryImage.image : backendItem.product_variant_details.images[0].image;\r\n  } else if (backendItem.product_variant_details?.product_details?.images && backendItem.product_variant_details.product_details.images.length > 0) {\r\n    // Use product images if variant doesn't have images\r\n    const primaryImage = backendItem.product_variant_details.product_details.images.find(img => img.is_primary);\r\n    image = primaryImage ? primaryImage.image : backendItem.product_variant_details.product_details.images[0].image;\r\n  } else if (backendItem.drop_product_details?.image) {\r\n    image = backendItem.drop_product_details.image;\r\n  }\r\n  \r\n  // Extract color and size information - prioritize direct fields, fallback to nested variant info\r\n  let color: string | undefined;\r\n  let colorCode: string | undefined;\r\n  let size: string | undefined;\r\n  \r\n  // Use direct cart item fields if available\r\n  if (backendItem.color) {\r\n    color = backendItem.color;\r\n  } else if (backendItem.product_variant_details?.color_info?.name) {\r\n    // Fallback to variant color info\r\n    color = backendItem.product_variant_details.color_info.name;\r\n  }\r\n  \r\n  if (backendItem.color_code) {\r\n    colorCode = backendItem.color_code;\r\n  } else if (backendItem.product_variant_details?.color_info?.hex_code) {\r\n    // Fallback to variant color info\r\n    colorCode = backendItem.product_variant_details.color_info.hex_code;\r\n  }\r\n  \r\n  if (backendItem.size) {\r\n    size = backendItem.size;\r\n  } else if (backendItem.product_variant_details?.size_info?.name) {\r\n    // Fallback to variant size info\r\n    size = backendItem.product_variant_details.size_info.name;\r\n  }\r\n  \r\n  return {\r\n    id: backendItem.drop_product || backendItem.product_variant || backendItem.id,\r\n    variantId: backendItem.product_variant || undefined,\r\n    dropProductId: backendItem.drop_product || undefined,\r\n    isDropProduct: !!backendItem.drop_product,\r\n    name: productInfo?.name || 'Unknown Product',\r\n    price: backendItem.unit_price,\r\n    quantity: backendItem.quantity,\r\n    image: image,\r\n    color: color,\r\n    colorCode: colorCode,\r\n    size: size,\r\n  };\r\n}\r\n\r\n// Helper function to convert frontend cart item to backend sync format\r\nexport function convertFrontendItemToBackend(frontendItem: import('../store/cartSlice').CartItem) {\r\n  // Check if this is a drop product or regular product\r\n  if (frontendItem.isDropProduct || frontendItem.dropProductId) {\r\n    return {\r\n      drop_product_id: frontendItem.dropProductId || frontendItem.id,\r\n      quantity: frontendItem.quantity,\r\n      color: frontendItem.color || undefined,\r\n      color_code: frontendItem.colorCode || undefined,\r\n      size: frontendItem.size || undefined,\r\n    };\r\n  } else {\r\n    // This is a regular product with variants\r\n    // Only send product_variant_id if we have a valid variantId\r\n    if (frontendItem.variantId) {\r\n      return {\r\n        product_variant_id: frontendItem.variantId,\r\n        quantity: frontendItem.quantity,\r\n        color: frontendItem.color || undefined,\r\n        color_code: frontendItem.colorCode || undefined,\r\n        size: frontendItem.size || undefined,\r\n      };\r\n    } else {\r\n      // For products without variants, log a warning and return an invalid item\r\n      // This will be filtered out in convertCartItemsToSyncFormat\r\n      console.warn('Product without variant ID found in cart:', frontendItem);\r\n      return {\r\n        // Don't set either ID - this will be filtered out\r\n        quantity: frontendItem.quantity,\r\n        color: frontendItem.color || undefined,\r\n        color_code: frontendItem.colorCode || undefined,\r\n        size: frontendItem.size || undefined,\r\n      };\r\n    }\r\n  }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 249, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alien/Downloads/Malikli-son%20-%20Preview/frontend/src/services/api.ts"],"sourcesContent":["// API service file for common API functionality\r\nimport axios from 'axios';\r\n\r\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000/api/v1';\r\n\r\n// Create axios instance with default config\r\nconst apiClient = axios.create({\r\n  baseURL: API_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Request interceptor for logging and adding auth token if needed\r\napiClient.interceptors.request.use(\r\n  (config) => {    // Get auth token from localStorage if in browser environment\r\n    if (typeof window !== 'undefined') {\r\n      const token = localStorage.getItem('access_token');\r\n      if (token) {\r\n        config.headers.Authorization = `Bearer ${token}`;\r\n      }\r\n    }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    console.error('API Request Error:', error);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Response interceptor for error handling\r\napiClient.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    // Handle specific error codes\r\n    if (error.response) {\r\n      // Log based on status code\r\n      if (error.response.status === 401) {\r\n        console.error('Authentication error. Please login again.');\r\n        // Could trigger logout or redirect to login here\r\n      }\r\n    }\r\n    console.error('API Response Error:', error.response?.data || error.message);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default apiClient;"],"names":[],"mappings":"AAAA,gDAAgD;;;;AAChD;;AAEA,MAAM,UAAU,oEAAmC;AAEnD,4CAA4C;AAC5C,MAAM,YAAY,qIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IAC7B,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;AACF;AAEA,kEAAkE;AAClE,UAAU,YAAY,CAAC,OAAO,CAAC,GAAG,CAChC,CAAC;IACC,uCAAmC;;IAKnC;IACA,OAAO;AACT,GACA,CAAC;IACC,QAAQ,KAAK,CAAC,sBAAsB;IACpC,OAAO,QAAQ,MAAM,CAAC;AACxB;AAGF,0CAA0C;AAC1C,UAAU,YAAY,CAAC,QAAQ,CAAC,GAAG,CACjC,CAAC,WAAa,UACd,CAAC;IACC,8BAA8B;IAC9B,IAAI,MAAM,QAAQ,EAAE;QAClB,2BAA2B;QAC3B,IAAI,MAAM,QAAQ,CAAC,MAAM,KAAK,KAAK;YACjC,QAAQ,KAAK,CAAC;QACd,iDAAiD;QACnD;IACF;IACA,QAAQ,KAAK,CAAC,uBAAuB,MAAM,QAAQ,EAAE,QAAQ,MAAM,OAAO;IAC1E,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa","debugId":null}},
    {"offset": {"line": 293, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alien/Downloads/Malikli-son%20-%20Preview/frontend/src/services/cartService.ts"],"sourcesContent":["// Cart Service for handling API calls to the cart endpoints\r\nimport { CartItem } from '../store/cartSlice';\r\nimport { BackendCart, convertFrontendItemToBackend } from '../types/backendCart';\r\nimport apiClient from './api';\r\n\r\nexport interface CartResponse extends BackendCart {}\r\n\r\nexport interface AddToCartRequest {\r\n  product_variant?: number;\r\n  drop_product?: number;\r\n  quantity: number;\r\n  color?: string;\r\n  color_code?: string;\r\n  size?: string;\r\n}\r\n\r\n// Add the missing sync interfaces\r\nexport interface CartSyncItem {\r\n  drop_product_id?: number;\r\n  product_variant_id?: number;\r\n  quantity: number;\r\n  color?: string;\r\n  color_code?: string;\r\n  size?: string;\r\n}\r\n\r\nexport interface CartSyncRequest {\r\n  items: CartSyncItem[];\r\n  guest_cart_id?: string;\r\n}\r\n\r\nexport interface CartMergeRequest {\r\n  guest_cart_id: string;\r\n  merge_strategy: 'replace' | 'merge' | 'keep_user';\r\n}\r\n\r\nexport interface CartSyncResponse {\r\n  cart: CartResponse;\r\n  message: string;\r\n}\r\n\r\n/**\r\n * Get the current user's cart or guest cart\r\n */\r\nexport async function getCart(cartId?: string): Promise<CartResponse | null> {\r\n  try {\r\n    const url = cartId ? `/carts/${cartId}/` : '/carts/';\r\n    const response = await apiClient.get<CartResponse>(url);\r\n    return response.data;\r\n  } catch (error: any) {\r\n    if (error.response?.status === 404) {\r\n      return null;\r\n    }\r\n    console.error('Error fetching cart:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Add an item to cart\r\n */\r\nexport async function addToCartAPI(cartId: string, item: AddToCartRequest): Promise<CartItem | null> {\r\n  try {\r\n    const response = await apiClient.post(`/carts/${cartId}/items/`, item);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error adding item to cart:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Update cart item quantity\r\n */\r\nexport async function updateCartItem(cartId: string, itemId: number, quantity: number): Promise<CartItem | null> {\r\n  try {\r\n    const response = await apiClient.patch(`/carts/${cartId}/items/${itemId}/`, { quantity });\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error updating cart item:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Remove item from cart\r\n */\r\nexport async function removeFromCartAPI(cartId: string, itemId: number): Promise<boolean> {\r\n  try {\r\n    await apiClient.delete(`/carts/${cartId}/items/${itemId}/`);\r\n    return true;\r\n  } catch (error) {\r\n    console.error('Error removing item from cart:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * Create a new cart (for guest users)\r\n */\r\nexport async function createCart(): Promise<CartResponse | null> {\r\n  try {\r\n    const response = await apiClient.post<CartResponse>('/carts/', {});\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error creating cart:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Sync cart items from localStorage to backend\r\n */\r\nexport async function syncCart(syncData: CartSyncRequest): Promise<CartResponse | null> {\r\n  try {\r\n    const response = await apiClient.post<CartSyncResponse>('/carts/sync/', syncData);\r\n    return response.data.cart;\r\n  } catch (error) {\r\n    console.error('Error syncing cart:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Merge guest cart with user cart on login\r\n */\r\nexport async function mergeGuestCart(mergeData: CartMergeRequest): Promise<CartResponse | null> {\r\n  try {\r\n    const response = await apiClient.post<CartSyncResponse>('/carts/merge/', mergeData);\r\n    return response.data.cart;\r\n  } catch (error) {\r\n    console.error('Error merging guest cart:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Get user's cart (using 'mine' endpoint)\r\n */\r\nexport async function getMyCart(guestCartId?: string): Promise<CartResponse | null> {\r\n  try {\r\n    const headers: Record<string, string> = {};\r\n    if (guestCartId) {\r\n      headers['X-Cart-ID'] = guestCartId;\r\n    }\r\n    \r\n    const response = await apiClient.get<CartResponse>('/carts/mine/', { headers });\r\n    return response.data;\r\n  } catch (error: any) {\r\n    if (error.response?.status === 404) {\r\n      return null;\r\n    }\r\n    console.error('Error fetching my cart:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Bulk add items to cart\r\n */\r\nexport async function bulkAddToCart(items: CartSyncItem[], cartId?: string): Promise<CartResponse | null> {\r\n  try {\r\n    const headers: Record<string, string> = {};\r\n    if (cartId) {\r\n      headers['X-Cart-ID'] = cartId;\r\n    }\r\n    \r\n    const response = await apiClient.post<CartResponse>('/carts/bulk-add/', { items }, { headers });\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error bulk adding to cart:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Convert frontend cart items to sync format\r\n */\r\nexport function convertCartItemsToSyncFormat(items: CartItem[]): CartSyncItem[] {\r\n  return items\r\n    .map(item => convertFrontendItemToBackend(item))\r\n    .filter(item => {\r\n      // Filter out items that don't have valid IDs\r\n      return item.drop_product_id || item.product_variant_id;\r\n    });\r\n}\r\n\r\n/**\r\n * Update cart item quantity (for specific item)\r\n */\r\nexport async function updateCartItemQuantity(params: {\r\n  itemId: number;\r\n  variantId?: number;\r\n  color?: string;\r\n  size?: string;\r\n  quantity: number;\r\n}): Promise<CartResponse | null> {\r\n  try {\r\n    // For now, we'll use the bulk add approach to update quantities\r\n    // Since the backend doesn't have a specific endpoint for updating individual cart items by complex criteria\r\n    // We can either implement a custom endpoint or use the existing sync mechanism\r\n    \r\n    // Use the sync mechanism to update quantity\r\n    const syncItem: CartSyncItem = {\r\n      quantity: params.quantity,\r\n      color: params.color,\r\n      color_code: undefined, // We don't have this info here\r\n      size: params.size,\r\n    };\r\n    \r\n    // Determine if this is a drop product or variant\r\n    if (params.variantId) {\r\n      syncItem.product_variant_id = params.variantId;\r\n    } else {\r\n      syncItem.drop_product_id = params.itemId;\r\n    }\r\n    \r\n    // Use bulk add which will merge/update existing items\r\n    return await bulkAddToCart([syncItem]);\r\n  } catch (error) {\r\n    console.error('Error updating cart item quantity:', error);\r\n    return null;\r\n  }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 454, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alien/Downloads/Malikli-son%20-%20Preview/frontend/src/store/cartSlice.ts"],"sourcesContent":["// store/cartSlice.ts\r\nimport { createSlice, PayloadAction, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport { \r\n  syncCart, \r\n  mergeGuestCart, \r\n  getMyCart, \r\n  convertCartItemsToSyncFormat,\r\n  CartResponse,\r\n  CartSyncRequest,\r\n  CartMergeRequest \r\n} from '../services/cartService';\r\nimport { convertBackendItemToFrontend, convertFrontendItemToBackend } from '../types/backendCart';\r\n\r\n// Define the cart item type\r\nexport interface CartItem {\r\n  id: number;           // Product ID\r\n  variantId?: number;   // Product Variant ID (if applicable)\r\n  dropProductId?: number; // Drop Product ID (if this is a drop product)\r\n  name: string;\r\n  price: number;\r\n  quantity: number;\r\n  image?: string;\r\n  color?: string;       // Color name (e.g., \"Red\", \"Blue\")\r\n  colorCode?: string;   // Color code (e.g., \"#FF0000\", \"#0000FF\")\r\n  size?: string;        // Size name (e.g., \"S\", \"M\", \"L\")\r\n  isDropProduct?: boolean; // Flag to distinguish between regular and drop products\r\n}\r\n\r\n// Define the cart state type\r\ninterface CartState {\r\n  items: CartItem[];\r\n  cartId?: string;      // Backend cart ID\r\n  isLoading: boolean;   // Loading state for async operations\r\n  error?: string;       // Error message\r\n  lastSyncTime?: number; // Timestamp of last sync\r\n  needsSync: boolean;   // Flag to indicate if cart needs syncing\r\n}\r\n\r\n// LocalStorage functions\r\nconst loadCartFromStorage = (): CartItem[] => {\r\n  if (typeof window === 'undefined') return [];\r\n  \r\n  try {\r\n    const savedCart = localStorage.getItem('cart');\r\n    return savedCart ? JSON.parse(savedCart) : [];\r\n  } catch (error) {\r\n    console.error('Error loading cart from localStorage:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\nconst saveCartToStorage = (items: CartItem[]) => {\r\n  if (typeof window === 'undefined') return;\r\n  \r\n  try {\r\n    localStorage.setItem('cart', JSON.stringify(items));\r\n  } catch (error) {\r\n    console.error('Error saving cart to localStorage:', error);\r\n  }\r\n};\r\n\r\nconst loadCartIdFromStorage = (): string | undefined => {\r\n  if (typeof window === 'undefined') return undefined;\r\n  \r\n  try {\r\n    return localStorage.getItem('cartId') || undefined;\r\n  } catch (error) {\r\n    console.error('Error loading cart ID from localStorage:', error);\r\n    return undefined;\r\n  }\r\n};\r\n\r\nconst saveCartIdToStorage = (cartId?: string) => {\r\n  if (typeof window === 'undefined') return;\r\n  \r\n  try {\r\n    if (cartId) {\r\n      localStorage.setItem('cartId', cartId);\r\n    } else {\r\n      localStorage.removeItem('cartId');\r\n    }\r\n  } catch (error) {\r\n    console.error('Error saving cart ID to localStorage:', error);\r\n  }\r\n};\r\n\r\n// Async thunks for backend integration\r\nexport const syncCartWithBackend = createAsyncThunk(\r\n  'cart/syncWithBackend',\r\n  async (_, { getState, rejectWithValue }) => {\r\n    try {\r\n      const state = getState() as { cart: CartState };\r\n      const items = convertCartItemsToSyncFormat(state.cart.items);\r\n      const guestCartId = state.cart.cartId;\r\n\r\n      const syncData: CartSyncRequest = {\r\n        items,\r\n        guest_cart_id: guestCartId,\r\n      };\r\n\r\n      const result = await syncCart(syncData);\r\n      if (!result) {\r\n        throw new Error('Failed to sync cart with backend');\r\n      }\r\n\r\n      return result;\r\n    } catch (error: any) {\r\n      return rejectWithValue(error.message || 'Failed to sync cart');\r\n    }\r\n  }\r\n);\r\n\r\nexport const mergeGuestCartWithUser = createAsyncThunk(\r\n  'cart/mergeGuestCart',\r\n  async (\r\n    { guestCartId, strategy }: { guestCartId: string; strategy: 'replace' | 'merge' | 'keep_user' },\r\n    { rejectWithValue }\r\n  ) => {\r\n    try {\r\n      const mergeData: CartMergeRequest = {\r\n        guest_cart_id: guestCartId,\r\n        merge_strategy: strategy,\r\n      };\r\n\r\n      const result = await mergeGuestCart(mergeData);\r\n      if (!result) {\r\n        throw new Error('Failed to merge guest cart');\r\n      }\r\n\r\n      return result;\r\n    } catch (error: any) {\r\n      return rejectWithValue(error.message || 'Failed to merge cart');\r\n    }\r\n  }\r\n);\r\n\r\nexport const loadCartFromBackend = createAsyncThunk(\r\n  'cart/loadFromBackend',\r\n  async (params: { guestCartId?: string } = {}, { rejectWithValue }) => {\r\n    try {\r\n      const result = await getMyCart(params.guestCartId);\r\n      return result;\r\n    } catch (error: any) {\r\n      return rejectWithValue(error.message || 'Failed to load cart from backend');\r\n    }\r\n  }\r\n);\r\n\r\nexport const bulkAddToUserCart = createAsyncThunk(\r\n  'cart/bulkAddToUserCart',\r\n  async (_, { getState, rejectWithValue }) => {\r\n    try {\r\n      const state = getState() as { cart: CartState };\r\n      const { bulkAddToCart } = await import('../services/cartService');\r\n      \r\n      // Convert cart items to sync format\r\n      const syncItems = convertCartItemsToSyncFormat(state.cart.items);\r\n      \r\n      if (syncItems.length === 0) {\r\n        // No valid items to sync, just mark as synced\r\n        return null;\r\n      }\r\n\r\n      const result = await bulkAddToCart(syncItems);\r\n      if (!result) {\r\n        throw new Error('Failed to bulk add items to cart');\r\n      }\r\n\r\n      return result;    } catch (error: any) {\r\n      return rejectWithValue(error.message || 'Failed to bulk add items to cart');\r\n    }\r\n  }\r\n);\r\n\r\nexport const addToCartAPI = createAsyncThunk(\r\n  'cart/addToCartAPI',\r\n  async (item: CartItem, { getState, rejectWithValue }) => {\r\n    try {\r\n      const state = getState() as { cart: CartState };\r\n      const { bulkAddToCart } = await import('../services/cartService');\r\n      \r\n      // Convert single item to sync format\r\n      const syncItems = [convertFrontendItemToBackend(item)].filter(item => \r\n        item.drop_product_id || item.product_variant_id\r\n      );\r\n      \r\n      if (syncItems.length === 0) {\r\n        throw new Error('Invalid item to add to cart');\r\n      }\r\n\r\n      const result = await bulkAddToCart(syncItems, state.cart.cartId);\r\n      if (!result) {\r\n        throw new Error('Failed to add item to cart');\r\n      }\r\n\r\n      return result;\r\n    } catch (error: any) {\r\n      return rejectWithValue(error.message || 'Failed to add item to cart');\r\n    }\r\n  }\r\n);\r\n\r\nexport const updateCartItemQuantityAPI = createAsyncThunk(\r\n  'cart/updateCartItemQuantityAPI',\r\n  async (params: {id: number, variantId?: number, color?: string, size?: string, quantity: number}, { getState, rejectWithValue }) => {\r\n    try {\r\n      const state = getState() as { cart: CartState };\r\n      const { updateCartItemQuantity } = await import('../services/cartService');\r\n      \r\n      const result = await updateCartItemQuantity({\r\n        itemId: params.id,\r\n        variantId: params.variantId,\r\n        color: params.color,\r\n        size: params.size,\r\n        quantity: params.quantity\r\n      });\r\n      \r\n      if (!result) {\r\n        throw new Error('Failed to update cart item quantity');\r\n      }\r\n\r\n      return result;\r\n    } catch (error: any) {\r\n      return rejectWithValue(error.message || 'Failed to update cart item quantity');\r\n    }\r\n  }\r\n);\r\n\r\nconst initialState: CartState = {\r\n  items: loadCartFromStorage(),\r\n  cartId: loadCartIdFromStorage(),\r\n  isLoading: false,\r\n  needsSync: false,\r\n  lastSyncTime: undefined,\r\n};\r\n\r\nconst cartSlice = createSlice({\r\n  name: 'cart',\r\n  initialState,\r\n  reducers: {\r\n    addToCart: (state, action: PayloadAction<CartItem>) => {\r\n      // Find existing item based on product ID and variant characteristics\r\n      const existingItem = state.items.find(item => \r\n        item.id === action.payload.id && \r\n        item.variantId === action.payload.variantId &&\r\n        item.color === action.payload.color &&\r\n        item.size === action.payload.size\r\n      );\r\n      \r\n      if (existingItem) {\r\n        existingItem.quantity += action.payload.quantity || 1;\r\n      } else {\r\n        state.items.push(action.payload);\r\n      }\r\n      \r\n      // Save to localStorage and mark for sync\r\n      saveCartToStorage(state.items);\r\n      state.needsSync = true;\r\n    },\r\n    removeFromCart: (state, action: PayloadAction<{id: number, variantId?: number, color?: string, size?: string}>) => {\r\n      state.items = state.items.filter(item => \r\n        !(item.id === action.payload.id && \r\n          item.variantId === action.payload.variantId &&\r\n          item.color === action.payload.color &&\r\n          item.size === action.payload.size)\r\n      );\r\n      \r\n      // Save to localStorage and mark for sync\r\n      saveCartToStorage(state.items);\r\n      state.needsSync = true;\r\n    },    updateQuantity: (state, action: PayloadAction<{id: number, variantId?: number, color?: string, size?: string, quantity: number}>) => {\r\n      const existingItem = state.items.find(item => \r\n        item.id === action.payload.id && \r\n        item.variantId === action.payload.variantId &&\r\n        item.color === action.payload.color &&\r\n        item.size === action.payload.size\r\n      );\r\n      if (existingItem) {\r\n        // Ensure quantity is a positive integer\r\n        const newQuantity = Math.max(1, Math.floor(action.payload.quantity));\r\n        existingItem.quantity = newQuantity;\r\n      }\r\n      \r\n      // Save to localStorage and mark for sync\r\n      saveCartToStorage(state.items);\r\n      state.needsSync = true;\r\n    },\r\n    clearCart: (state) => {\r\n      state.items = [];\r\n      state.needsSync = false;\r\n      // Clear from localStorage\r\n      saveCartToStorage([]);\r\n    },\r\n    // Action to manually load cart from localStorage (useful for hydration)\r\n    loadCart: (state) => {\r\n      state.items = loadCartFromStorage();\r\n      state.cartId = loadCartIdFromStorage();\r\n    },\r\n    // Action to set cart ID\r\n    setCartId: (state, action: PayloadAction<string | undefined>) => {\r\n      state.cartId = action.payload;\r\n      saveCartIdToStorage(action.payload);\r\n    },\r\n    // Action to mark cart as synced\r\n    markAsSynced: (state) => {\r\n      state.needsSync = false;\r\n      state.lastSyncTime = Date.now();\r\n    },    // Action to convert backend cart items to frontend format\r\n    setCartFromBackend: (state, action: PayloadAction<CartResponse>) => {\r\n      // Convert backend items to frontend format\r\n      state.items = action.payload.items.map(backendItem => convertBackendItemToFrontend(backendItem));\r\n      \r\n      state.cartId = action.payload.cart_id;\r\n      state.needsSync = false;\r\n      state.lastSyncTime = Date.now();\r\n      \r\n      // Save to localStorage\r\n      saveCartToStorage(state.items);\r\n      saveCartIdToStorage(action.payload.cart_id);\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    // Handle syncCartWithBackend\r\n    builder\r\n      .addCase(syncCartWithBackend.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.error = undefined;\r\n      })\r\n      .addCase(syncCartWithBackend.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.needsSync = false;\r\n        state.lastSyncTime = Date.now();\r\n        \r\n        if (action.payload.cart_id) {\r\n          state.cartId = action.payload.cart_id;\r\n          saveCartIdToStorage(action.payload.cart_id);\r\n        }\r\n      })\r\n      .addCase(syncCartWithBackend.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.error = action.payload as string;\r\n      });\r\n\r\n    // Handle mergeGuestCartWithUser\r\n    builder\r\n      .addCase(mergeGuestCartWithUser.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.error = undefined;\r\n      })      .addCase(mergeGuestCartWithUser.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.needsSync = false;\r\n        state.lastSyncTime = Date.now();\r\n        \r\n        // Update cart with merged data\r\n        state.items = action.payload.items.map(backendItem => convertBackendItemToFrontend(backendItem));\r\n        \r\n        state.cartId = action.payload.cart_id;\r\n        \r\n        // Save to localStorage\r\n        saveCartToStorage(state.items);\r\n        saveCartIdToStorage(action.payload.cart_id);\r\n      })\r\n      .addCase(mergeGuestCartWithUser.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.error = action.payload as string;\r\n      });\r\n\r\n    // Handle loadCartFromBackend\r\n    builder\r\n      .addCase(loadCartFromBackend.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.error = undefined;\r\n      })      .addCase(loadCartFromBackend.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        \r\n        if (action.payload) {\r\n          state.items = action.payload.items.map(backendItem => convertBackendItemToFrontend(backendItem));\r\n          \r\n          if (action.payload.cart_id) {\r\n            state.cartId = action.payload.cart_id;\r\n            saveCartIdToStorage(action.payload.cart_id);\r\n          }\r\n          \r\n          state.needsSync = false;\r\n          state.lastSyncTime = Date.now();\r\n          \r\n          // Save to localStorage\r\n          saveCartToStorage(state.items);\r\n        }\r\n      })      .addCase(loadCartFromBackend.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.error = action.payload as string;\r\n      });\r\n\r\n    // Handle bulkAddToUserCart\r\n    builder\r\n      .addCase(bulkAddToUserCart.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.error = undefined;\r\n      })      .addCase(bulkAddToUserCart.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.needsSync = false;\r\n        state.lastSyncTime = Date.now();\r\n        \r\n        if (action.payload) {\r\n          // Update cart with backend data\r\n          state.items = action.payload.items.map(backendItem => convertBackendItemToFrontend(backendItem));\r\n          \r\n          if (action.payload.cart_id) {\r\n            state.cartId = action.payload.cart_id;\r\n            saveCartIdToStorage(action.payload.cart_id);\r\n          }\r\n          \r\n          // Save to localStorage\r\n          saveCartToStorage(state.items);\r\n        } else {\r\n          // No items were synced (all items were invalid), just mark as synced\r\n          // Keep the current items but mark as synced\r\n        }\r\n      })      .addCase(bulkAddToUserCart.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.error = action.payload as string;\r\n      });\r\n\r\n    // Handle addToCartAPI\r\n    builder\r\n      .addCase(addToCartAPI.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.error = undefined;\r\n      })\r\n      .addCase(addToCartAPI.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.needsSync = false;\r\n        state.lastSyncTime = Date.now();\r\n        \r\n        if (action.payload) {\r\n          // Update cart with backend data\r\n          state.items = action.payload.items.map(backendItem => convertBackendItemToFrontend(backendItem));\r\n          \r\n          if (action.payload.cart_id) {\r\n            state.cartId = action.payload.cart_id;\r\n            saveCartIdToStorage(action.payload.cart_id);\r\n          }\r\n          \r\n          // Save to localStorage\r\n          saveCartToStorage(state.items);\r\n        }\r\n      })      .addCase(addToCartAPI.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.error = action.payload as string;\r\n      })\r\n      .addCase(updateCartItemQuantityAPI.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.error = undefined;\r\n      })\r\n      .addCase(updateCartItemQuantityAPI.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.needsSync = false;\r\n        state.lastSyncTime = Date.now();\r\n        \r\n        if (action.payload) {\r\n          // Update cart with backend data\r\n          state.items = action.payload.items.map((backendItem: any) => convertBackendItemToFrontend(backendItem));\r\n          \r\n          if (action.payload.cart_id) {\r\n            state.cartId = action.payload.cart_id;\r\n            saveCartIdToStorage(action.payload.cart_id);\r\n          }\r\n          \r\n          // Save to localStorage\r\n          saveCartToStorage(state.items);\r\n        }\r\n      })\r\n      .addCase(updateCartItemQuantityAPI.rejected, (state, action) => {        state.isLoading = false;\r\n        state.error = action.payload as string;\r\n      });\r\n  },\r\n});\r\n\r\nexport const { \r\n  addToCart, \r\n  removeFromCart, \r\n  updateQuantity, \r\n  clearCart, \r\n  loadCart, \r\n  setCartId, \r\n  markAsSynced, \r\n  setCartFromBackend \r\n} = cartSlice.actions;\r\n\r\nexport default cartSlice.reducer;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 799, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alien/Downloads/Malikli-son%20-%20Preview/frontend/src/store/authSlice.ts"],"sourcesContent":["// src/store/authSlice.ts\r\nimport { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit';\r\n\r\nexport interface User {\r\n  id: number;\r\n  username: string;\r\n  email: string;\r\n  first_name: string;\r\n  last_name: string;\r\n  phone_number?: string;\r\n  is_verified: boolean;\r\n}\r\n\r\nexport interface AuthState {\r\n  user: User | null;\r\n  token: string | null;\r\n  refreshToken: string | null;\r\n  isLoading: boolean;\r\n  error: string | null;\r\n  isAuthenticated: boolean;\r\n  isInitialized: boolean;\r\n}\r\n\r\nconst initialState: AuthState = {\r\n  user: null,\r\n  token: null,\r\n  refreshToken: null,\r\n  isLoading: false,\r\n  error: null,\r\n  isAuthenticated: false,\r\n  isInitialized: false,\r\n};\r\n\r\n// Async thunks for API calls\r\nexport const loginUser = createAsyncThunk(\r\n  'auth/login',\r\n  async (credentials: { username: string; password: string }, { rejectWithValue }) => {\r\n    try {      const response = await fetch('http://localhost:8000/api/v1/auth/login/', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(credentials),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        return rejectWithValue(errorData);\r\n      }\r\n\r\n      const data = await response.json();\r\n      \r\n      // Store tokens in localStorage\r\n      localStorage.setItem('access_token', data.access);\r\n      localStorage.setItem('refresh_token', data.refresh);\r\n      \r\n      return data;\r\n    } catch (error) {\r\n      return rejectWithValue({ message: 'Ошибка сети' });\r\n    }\r\n  }\r\n);\r\n\r\nexport const registerUser = createAsyncThunk(\r\n  'auth/register',\r\n  async (userData: {\r\n    username: string;\r\n    email: string;\r\n    password: string;\r\n    password2: string;\r\n    first_name: string;\r\n    last_name: string;\r\n    phone_number?: string;\r\n  }, { rejectWithValue }) => {\r\n    try {      const response = await fetch('http://localhost:8000/api/v1/auth/register/', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(userData),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        return rejectWithValue(errorData);\r\n      }\r\n\r\n      const data = await response.json();\r\n      return data;\r\n    } catch (error) {\r\n      return rejectWithValue({ message: 'Ошибка сети' });\r\n    }\r\n  }\r\n);\r\n\r\nexport const fetchUserProfile = createAsyncThunk(\r\n  'auth/fetchProfile',\r\n  async (_, { rejectWithValue, getState }) => {\r\n    try {\r\n      const state = getState() as { auth: AuthState };\r\n      const token = state.auth.token || localStorage.getItem('access_token');\r\n      \r\n      if (!token) {\r\n        return rejectWithValue({ message: 'Нет токена авторизации' });\r\n      }      const response = await fetch('http://localhost:8000/api/v1/auth/profile/', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json',\r\n        },\r\n      });\r\n\r\n      if (!response.ok) {\r\n        if (response.status === 401) {\r\n          // Token expired, try to refresh\r\n          throw new Error('Token expired');\r\n        }\r\n        const errorData = await response.json();\r\n        return rejectWithValue(errorData);\r\n      }\r\n\r\n      const data = await response.json();\r\n      return data;\r\n    } catch (error) {\r\n      return rejectWithValue({ message: 'Ошибка получения профиля' });\r\n    }\r\n  }\r\n);\r\n\r\nexport const refreshAccessToken = createAsyncThunk(\r\n  'auth/refreshToken',\r\n  async (_, { rejectWithValue }) => {\r\n    try {\r\n      const refreshToken = localStorage.getItem('refresh_token');\r\n      \r\n      if (!refreshToken) {\r\n        return rejectWithValue({ message: 'Нет refresh токена' });\r\n      }      const response = await fetch('http://localhost:8000/api/v1/auth/login/refresh/', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ refresh: refreshToken }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        return rejectWithValue(errorData);\r\n      }\r\n\r\n      const data = await response.json();\r\n      localStorage.setItem('access_token', data.access);\r\n      \r\n      return data;\r\n    } catch (error) {\r\n      return rejectWithValue({ message: 'Ошибка обновления токена' });\r\n    }\r\n  }\r\n);\r\n\r\nexport const requestPasswordReset = createAsyncThunk(\r\n  'auth/requestPasswordReset',\r\n  async (email: string, { rejectWithValue }) => {\r\n    try {      const response = await fetch('http://localhost:8000/api/v1/auth/password-reset/', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ email }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        return rejectWithValue(errorData);\r\n      }\r\n\r\n      const data = await response.json();\r\n      return data;\r\n    } catch (error) {\r\n      return rejectWithValue({ message: 'Ошибка сети' });\r\n    }\r\n  }\r\n);\r\n\r\nconst authSlice = createSlice({\r\n  name: 'auth',\r\n  initialState,\r\n  reducers: {\r\n    logout: (state) => {\r\n      state.user = null;\r\n      state.token = null;\r\n      state.refreshToken = null;\r\n      state.isAuthenticated = false;\r\n      state.error = null;\r\n      localStorage.removeItem('access_token');\r\n      localStorage.removeItem('refresh_token');\r\n    },\r\n    clearError: (state) => {\r\n      state.error = null;\r\n    },    loadTokensFromStorage: (state) => {\r\n      const token = localStorage.getItem('access_token');\r\n      const refreshToken = localStorage.getItem('refresh_token');\r\n      \r\n      if (token && refreshToken) {\r\n        state.token = token;\r\n        state.refreshToken = refreshToken;\r\n        state.isAuthenticated = true;\r\n      }\r\n      state.isInitialized = true;\r\n    },\r\n    setTokens: (state, action: PayloadAction<{ access: string; refresh: string }>) => {\r\n      state.token = action.payload.access;\r\n      state.refreshToken = action.payload.refresh;\r\n      state.isAuthenticated = true;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      // Login\r\n      .addCase(loginUser.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(loginUser.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.token = action.payload.access;\r\n        state.refreshToken = action.payload.refresh;\r\n        state.isAuthenticated = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(loginUser.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.error = action.payload as string;\r\n        state.isAuthenticated = false;\r\n      })\r\n      \r\n      // Register\r\n      .addCase(registerUser.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(registerUser.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.user = action.payload;\r\n        state.error = null;\r\n      })\r\n      .addCase(registerUser.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.error = action.payload as string;\r\n      })\r\n      \r\n      // Fetch Profile\r\n      .addCase(fetchUserProfile.pending, (state) => {\r\n        state.isLoading = true;\r\n      })\r\n      .addCase(fetchUserProfile.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.user = action.payload;\r\n        state.error = null;\r\n      })\r\n      .addCase(fetchUserProfile.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.error = action.payload as string;\r\n        // If token is invalid, clear auth state\r\n        state.isAuthenticated = false;\r\n        state.token = null;\r\n        state.refreshToken = null;\r\n        localStorage.removeItem('access_token');\r\n        localStorage.removeItem('refresh_token');\r\n      })\r\n      \r\n      // Refresh Token\r\n      .addCase(refreshAccessToken.fulfilled, (state, action) => {\r\n        state.token = action.payload.access;\r\n      })\r\n      .addCase(refreshAccessToken.rejected, (state) => {\r\n        state.isAuthenticated = false;\r\n        state.token = null;\r\n        state.refreshToken = null;\r\n        localStorage.removeItem('access_token');\r\n        localStorage.removeItem('refresh_token');\r\n      })\r\n      \r\n      // Password Reset Request\r\n      .addCase(requestPasswordReset.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(requestPasswordReset.fulfilled, (state) => {\r\n        state.isLoading = false;\r\n        state.error = null;\r\n      })\r\n      .addCase(requestPasswordReset.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.error = action.payload as string;\r\n      });\r\n  },\r\n});\r\n\r\nexport const { logout, clearError, loadTokensFromStorage, setTokens } = authSlice.actions;\r\nexport default authSlice.reducer;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1056, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alien/Downloads/Malikli-son%20-%20Preview/frontend/src/store/store.ts"],"sourcesContent":["// src/store/store.ts\r\nimport { configureStore } from '@reduxjs/toolkit';\r\n// Import your reducers (slices) here\r\nimport uiReducer from './slices/uiSlice'; \r\nimport cartReducer from './cartSlice' // Adjust the path as necessary\r\nimport authReducer from './authSlice';\r\n// import productReducer from './slices/productSlice';\r\n// ... etc.\r\n\r\n// Create a temporary store to infer types\r\nconst tempStore = configureStore({\r\n  reducer: {\r\n    ui: uiReducer,\r\n    cart: cartReducer, \r\n    auth: authReducer,\r\n  },\r\n});\r\n\r\n// Export types first\r\nexport type RootState = ReturnType<typeof tempStore.getState>;\r\nexport type AppDispatch = typeof tempStore.dispatch;\r\n\r\nexport const makeStore = () => {\r\n  return configureStore({\r\n    reducer: {\r\n        ui: uiReducer, // <--- ADD THE REDUCER HERE\r\n        cart: cartReducer, \r\n        auth: authReducer,\r\n      // product: productReducer,\r\n      // ... your other reducers\r\n    },\r\n    // middleware: (getDefaultMiddleware) => getDefaultMiddleware().concat(logger), // example\r\n    devTools: process.env.NODE_ENV !== 'production',\r\n  });\r\n};\r\n\r\n// Infer the type of makeStore\r\nexport type AppStore = ReturnType<typeof makeStore>;"],"names":[],"mappings":"AAAA,qBAAqB;;;;AACrB;AACA,qCAAqC;AACrC;AACA,oNAAsC,+BAA+B;AACrE;;;;;AACA,sDAAsD;AACtD,WAAW;AAEX,0CAA0C;AAC1C,MAAM,YAAY,CAAA,GAAA,2LAAA,CAAA,iBAAc,AAAD,EAAE;IAC/B,SAAS;QACP,IAAI,iIAAA,CAAA,UAAS;QACb,MAAM,yHAAA,CAAA,UAAW;QACjB,MAAM,yHAAA,CAAA,UAAW;IACnB;AACF;AAMO,MAAM,YAAY;IACvB,OAAO,CAAA,GAAA,2LAAA,CAAA,iBAAc,AAAD,EAAE;QACpB,SAAS;YACL,IAAI,iIAAA,CAAA,UAAS;YACb,MAAM,yHAAA,CAAA,UAAW;YACjB,MAAM,yHAAA,CAAA,UAAW;QAGrB;QACA,0FAA0F;QAC1F,UAAU,oDAAyB;IACrC;AACF","debugId":null}},
    {"offset": {"line": 1096, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alien/Downloads/Malikli-son%20-%20Preview/frontend/src/app/StoreProvider.tsx"],"sourcesContent":["// src/app/StoreProvider.tsx\r\n\"use client\"; // This component uses Redux Provider, which needs to be client-side\r\n\r\nimport { useRef, useEffect } from 'react';\r\nimport { Provider } from 'react-redux';\r\nimport { makeStore, AppStore } from '../store/store'; // Adjust path to your store config\r\nimport { loadTokensFromStorage, fetchUserProfile } from '../store/authSlice';\r\n\r\nexport default function StoreProvider({\r\n  children,\r\n}: {\r\n  children: React.ReactNode;\r\n}) {\r\n  const storeRef = useRef<AppStore | null>(null);\r\n  if (!storeRef.current) {\r\n    // Create the store instance the first time this renders\r\n    storeRef.current = makeStore();\r\n  }\r\n\r\n  // Initialize auth state from localStorage\r\n  useEffect(() => {\r\n    if (storeRef.current) {\r\n      const store = storeRef.current;\r\n      \r\n      // Load tokens from localStorage\r\n      store.dispatch(loadTokensFromStorage());\r\n      \r\n      // If tokens exist, fetch user profile\r\n      const state = store.getState();\r\n      if (state.auth.isAuthenticated && state.auth.token) {\r\n        store.dispatch(fetchUserProfile());\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  return <Provider store={storeRef.current}>{children}</Provider>;\r\n}"],"names":[],"mappings":"AAAA,4BAA4B;;;;;AAG5B;AACA;AACA,4MAAsD,mCAAmC;AACzF;AALA,cAAc,oEAAoE;;;;;;AAOnE,SAAS,cAAc,EACpC,QAAQ,EAGT;IACC,MAAM,WAAW,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAmB;IACzC,IAAI,CAAC,SAAS,OAAO,EAAE;QACrB,wDAAwD;QACxD,SAAS,OAAO,GAAG,CAAA,GAAA,qHAAA,CAAA,YAAS,AAAD;IAC7B;IAEA,0CAA0C;IAC1C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,SAAS,OAAO,EAAE;YACpB,MAAM,QAAQ,SAAS,OAAO;YAE9B,gCAAgC;YAChC,MAAM,QAAQ,CAAC,CAAA,GAAA,yHAAA,CAAA,wBAAqB,AAAD;YAEnC,sCAAsC;YACtC,MAAM,QAAQ,MAAM,QAAQ;YAC5B,IAAI,MAAM,IAAI,CAAC,eAAe,IAAI,MAAM,IAAI,CAAC,KAAK,EAAE;gBAClD,MAAM,QAAQ,CAAC,CAAA,GAAA,yHAAA,CAAA,mBAAgB,AAAD;YAChC;QACF;IACF,GAAG,EAAE;IAEL,qBAAO,8OAAC,yJAAA,CAAA,WAAQ;QAAC,OAAO,SAAS,OAAO;kBAAG;;;;;;AAC7C","debugId":null}},
    {"offset": {"line": 1169, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alien/Downloads/Malikli-son%20-%20Preview/frontend/src/store/hooks.ts"],"sourcesContent":["import { useDispatch, useSelector } from 'react-redux';\r\nimport type { TypedUseSelectorHook } from 'react-redux';\r\nimport type { RootState, AppDispatch } from './store';\r\n\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\r\n"],"names":[],"mappings":";;;;AAAA;;AAIO,MAAM,iBAAiB,IAAM,CAAA,GAAA,yJAAA,CAAA,cAAW,AAAD;AACvC,MAAM,iBAAkD,yJAAA,CAAA,cAAW","debugId":null}},
    {"offset": {"line": 1182, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/Layout/Navbar.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"cartCount\": \"Navbar-module__eVzsNW__cartCount\",\n  \"cartIconContainer\": \"Navbar-module__eVzsNW__cartIconContainer\",\n  \"chevron\": \"Navbar-module__eVzsNW__chevron\",\n  \"chevronUp\": \"Navbar-module__eVzsNW__chevronUp\",\n  \"dark\": \"Navbar-module__eVzsNW__dark\",\n  \"dropdownDivider\": \"Navbar-module__eVzsNW__dropdownDivider\",\n  \"dropdownIcon\": \"Navbar-module__eVzsNW__dropdownIcon\",\n  \"dropdownItem\": \"Navbar-module__eVzsNW__dropdownItem\",\n  \"dropdownSlideIn\": \"Navbar-module__eVzsNW__dropdownSlideIn\",\n  \"fixedCartButton\": \"Navbar-module__eVzsNW__fixedCartButton\",\n  \"fixedCartCount\": \"Navbar-module__eVzsNW__fixedCartCount\",\n  \"iconLight\": \"Navbar-module__eVzsNW__iconLight\",\n  \"iconLink\": \"Navbar-module__eVzsNW__iconLink\",\n  \"iconSvg\": \"Navbar-module__eVzsNW__iconSvg\",\n  \"logo\": \"Navbar-module__eVzsNW__logo\",\n  \"logoContainer\": \"Navbar-module__eVzsNW__logoContainer\",\n  \"logoWhite\": \"Navbar-module__eVzsNW__logoWhite\",\n  \"mobileActionIcon\": \"Navbar-module__eVzsNW__mobileActionIcon\",\n  \"mobileAuthAction\": \"Navbar-module__eVzsNW__mobileAuthAction\",\n  \"mobileAuthSection\": \"Navbar-module__eVzsNW__mobileAuthSection\",\n  \"mobileLangSection\": \"Navbar-module__eVzsNW__mobileLangSection\",\n  \"mobileMenu\": \"Navbar-module__eVzsNW__mobileMenu\",\n  \"mobileMenuButton\": \"Navbar-module__eVzsNW__mobileMenuButton\",\n  \"mobileMenuLinks\": \"Navbar-module__eVzsNW__mobileMenuLinks\",\n  \"mobileOpen\": \"Navbar-module__eVzsNW__mobileOpen\",\n  \"mobileUserAction\": \"Navbar-module__eVzsNW__mobileUserAction\",\n  \"mobileUserActions\": \"Navbar-module__eVzsNW__mobileUserActions\",\n  \"mobileUserAvatar\": \"Navbar-module__eVzsNW__mobileUserAvatar\",\n  \"mobileUserDetails\": \"Navbar-module__eVzsNW__mobileUserDetails\",\n  \"mobileUserEmail\": \"Navbar-module__eVzsNW__mobileUserEmail\",\n  \"mobileUserInfo\": \"Navbar-module__eVzsNW__mobileUserInfo\",\n  \"mobileUserName\": \"Navbar-module__eVzsNW__mobileUserName\",\n  \"mobileUserSection\": \"Navbar-module__eVzsNW__mobileUserSection\",\n  \"navContainer\": \"Navbar-module__eVzsNW__navContainer\",\n  \"navIcons\": \"Navbar-module__eVzsNW__navIcons\",\n  \"navLink\": \"Navbar-module__eVzsNW__navLink\",\n  \"navLinks\": \"Navbar-module__eVzsNW__navLinks\",\n  \"navbar\": \"Navbar-module__eVzsNW__navbar\",\n  \"open\": \"Navbar-module__eVzsNW__open\",\n  \"pulse\": \"Navbar-module__eVzsNW__pulse\",\n  \"transparent\": \"Navbar-module__eVzsNW__transparent\",\n  \"userAvatar\": \"Navbar-module__eVzsNW__userAvatar\",\n  \"userButton\": \"Navbar-module__eVzsNW__userButton\",\n  \"userDropdown\": \"Navbar-module__eVzsNW__userDropdown\",\n  \"userMenuContainer\": \"Navbar-module__eVzsNW__userMenuContainer\",\n  \"userName\": \"Navbar-module__eVzsNW__userName\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 1246, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alien/Downloads/Malikli-son%20-%20Preview/frontend/src/hooks/useI18n.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { createContext, useContext, useState, useEffect, ReactNode } from 'react';\r\nimport en from '../locales/en.json';\r\nimport ru from '../locales/ru.json';\r\n\r\ninterface I18nContextType {\r\n  locale: string;\r\n  setLocale: (locale: string) => void;\r\n  t: (key: string, params?: Record<string, string | number>) => string;\r\n  availableLocales: string[];\r\n}\r\n\r\nconst I18nContext = createContext<I18nContextType | undefined>(undefined);\r\n\r\nconst translations = {\r\n  en,\r\n  ru,\r\n};\r\n\r\ninterface I18nProviderProps {\r\n  children: ReactNode;\r\n}\r\n\r\nexport function I18nProvider({ children }: I18nProviderProps) {\r\n  const [locale, setCurrentLocale] = useState<string>('en');\r\n\r\n  useEffect(() => {\r\n    // Load locale from localStorage or browser preference\r\n    const savedLocale = localStorage.getItem('locale');\r\n    const browserLocale = navigator.language.split('-')[0];\r\n    const initialLocale = savedLocale || (browserLocale === 'ru' ? 'ru' : 'en');\r\n    setCurrentLocale(initialLocale);\r\n  }, []);\r\n\r\n  const setLocale = (newLocale: string) => {\r\n    setCurrentLocale(newLocale);\r\n    localStorage.setItem('locale', newLocale);\r\n    \r\n    // Update HTML lang attribute\r\n    if (typeof document !== 'undefined') {\r\n      document.documentElement.lang = newLocale;\r\n    }\r\n  };\r\n\r\n  const t = (key: string, params?: Record<string, string | number>): string => {\r\n    const keys = key.split('.');\r\n    let value: any = translations[locale as keyof typeof translations];\r\n    \r\n    for (const k of keys) {\r\n      if (value && typeof value === 'object') {\r\n        value = value[k];\r\n      } else {\r\n        return key; // Return key if translation not found\r\n      }\r\n    }\r\n    \r\n    if (typeof value !== 'string') {\r\n      return key;\r\n    }\r\n    \r\n    // Replace parameters in the translation\r\n    if (params) {\r\n      return value.replace(/\\{\\{(\\w+)\\}\\}/g, (match, paramKey) => {\r\n        return params[paramKey]?.toString() || match;\r\n      });\r\n    }\r\n    \r\n    return value;\r\n  };\r\n\r\n  const value: I18nContextType = {\r\n    locale,\r\n    setLocale,\r\n    t,\r\n    availableLocales: ['en', 'ru'],\r\n  };\r\n\r\n  return (\r\n    <I18nContext.Provider value={value}>\r\n      {children}\r\n    </I18nContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useI18n(): I18nContextType {\r\n  const context = useContext(I18nContext);\r\n  if (context === undefined) {\r\n    throw new Error('useI18n must be used within an I18nProvider');\r\n  }\r\n  return context;\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAaA,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,gBAAa,AAAD,EAA+B;AAE/D,MAAM,eAAe;IACnB,IAAA,4FAAA,CAAA,UAAE;IACF,IAAA,4FAAA,CAAA,UAAE;AACJ;AAMO,SAAS,aAAa,EAAE,QAAQ,EAAqB;IAC1D,MAAM,CAAC,QAAQ,iBAAiB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IAEpD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,sDAAsD;QACtD,MAAM,cAAc,aAAa,OAAO,CAAC;QACzC,MAAM,gBAAgB,UAAU,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;QACtD,MAAM,gBAAgB,eAAe,CAAC,kBAAkB,OAAO,OAAO,IAAI;QAC1E,iBAAiB;IACnB,GAAG,EAAE;IAEL,MAAM,YAAY,CAAC;QACjB,iBAAiB;QACjB,aAAa,OAAO,CAAC,UAAU;QAE/B,6BAA6B;QAC7B,IAAI,OAAO,aAAa,aAAa;YACnC,SAAS,eAAe,CAAC,IAAI,GAAG;QAClC;IACF;IAEA,MAAM,IAAI,CAAC,KAAa;QACtB,MAAM,OAAO,IAAI,KAAK,CAAC;QACvB,IAAI,QAAa,YAAY,CAAC,OAAoC;QAElE,KAAK,MAAM,KAAK,KAAM;YACpB,IAAI,SAAS,OAAO,UAAU,UAAU;gBACtC,QAAQ,KAAK,CAAC,EAAE;YAClB,OAAO;gBACL,OAAO,KAAK,sCAAsC;YACpD;QACF;QAEA,IAAI,OAAO,UAAU,UAAU;YAC7B,OAAO;QACT;QAEA,wCAAwC;QACxC,IAAI,QAAQ;YACV,OAAO,MAAM,OAAO,CAAC,kBAAkB,CAAC,OAAO;gBAC7C,OAAO,MAAM,CAAC,SAAS,EAAE,cAAc;YACzC;QACF;QAEA,OAAO;IACT;IAEA,MAAM,QAAyB;QAC7B;QACA;QACA;QACA,kBAAkB;YAAC;YAAM;SAAK;IAChC;IAEA,qBACE,8OAAC,YAAY,QAAQ;QAAC,OAAO;kBAC1B;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,UAAU,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 1332, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/LanguageSwitcher/LanguageSwitcher.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"active\": \"LanguageSwitcher-module__U9ItxG__active\",\n  \"checkmark\": \"LanguageSwitcher-module__U9ItxG__checkmark\",\n  \"chevron\": \"LanguageSwitcher-module__U9ItxG__chevron\",\n  \"chevronOpen\": \"LanguageSwitcher-module__U9ItxG__chevronOpen\",\n  \"code\": \"LanguageSwitcher-module__U9ItxG__code\",\n  \"dark\": \"LanguageSwitcher-module__U9ItxG__dark\",\n  \"dropdown\": \"LanguageSwitcher-module__U9ItxG__dropdown\",\n  \"dropdownContent\": \"LanguageSwitcher-module__U9ItxG__dropdownContent\",\n  \"flag\": \"LanguageSwitcher-module__U9ItxG__flag\",\n  \"label\": \"LanguageSwitcher-module__U9ItxG__label\",\n  \"languageSwitcher\": \"LanguageSwitcher-module__U9ItxG__languageSwitcher\",\n  \"option\": \"LanguageSwitcher-module__U9ItxG__option\",\n  \"slideDown\": \"LanguageSwitcher-module__U9ItxG__slideDown\",\n  \"trigger\": \"LanguageSwitcher-module__U9ItxG__trigger\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 1354, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alien/Downloads/Malikli-son%20-%20Preview/frontend/src/components/LanguageSwitcher/LanguageSwitcher.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { useI18n } from '../../hooks/useI18n';\r\nimport styles from './LanguageSwitcher.module.css';\r\n\r\nconst languageConfig = {\r\n  en: {\r\n    label: 'English',\r\n    flag: '🇺🇸',\r\n    code: 'EN'\r\n  },\r\n  ru: {\r\n    label: 'Русский',\r\n    flag: '🇷🇺',\r\n    code: 'RU'\r\n  }\r\n};\r\n\r\nconst LanguageSwitcher: React.FC = () => {\r\n  const { locale, setLocale, availableLocales } = useI18n();\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const dropdownRef = useRef<HTMLDivElement>(null);\r\n\r\n  const currentLanguage = languageConfig[locale as keyof typeof languageConfig];\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  const handleLanguageChange = (newLocale: string) => {\r\n    setLocale(newLocale);\r\n    setIsOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div className={styles.languageSwitcher} ref={dropdownRef}>\r\n      <button\r\n        className={styles.trigger}\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        aria-label=\"Select language\"\r\n      >\r\n        <span className={styles.flag}>{currentLanguage.flag}</span>\r\n        <span className={styles.code}>{currentLanguage.code}</span>\r\n        <svg \r\n          className={`${styles.chevron} ${isOpen ? styles.chevronOpen : ''}`}\r\n          width=\"16\" \r\n          height=\"16\" \r\n          viewBox=\"0 0 24 24\" \r\n          fill=\"none\"\r\n        >\r\n          <path \r\n            d=\"M6 9l6 6 6-6\" \r\n            stroke=\"currentColor\" \r\n            strokeWidth=\"2\" \r\n            strokeLinecap=\"round\" \r\n            strokeLinejoin=\"round\"\r\n          />\r\n        </svg>\r\n      </button>\r\n\r\n      {isOpen && (\r\n        <div className={styles.dropdown}>\r\n          <div className={styles.dropdownContent}>\r\n            {availableLocales.map((localeCode) => {\r\n              const lang = languageConfig[localeCode as keyof typeof languageConfig];\r\n              const isActive = localeCode === locale;\r\n              \r\n              return (\r\n                <button\r\n                  key={localeCode}\r\n                  className={`${styles.option} ${isActive ? styles.active : ''}`}\r\n                  onClick={() => handleLanguageChange(localeCode)}\r\n                  disabled={isActive}\r\n                >\r\n                  <span className={styles.flag}>{lang.flag}</span>\r\n                  <span className={styles.label}>{lang.label}</span>\r\n                  {isActive && (\r\n                    <svg \r\n                      className={styles.checkmark} \r\n                      width=\"16\" \r\n                      height=\"16\" \r\n                      viewBox=\"0 0 24 24\" \r\n                      fill=\"none\"\r\n                    >\r\n                      <path \r\n                        d=\"M20 6L9 17l-5.5-5.5\" \r\n                        stroke=\"currentColor\" \r\n                        strokeWidth=\"2\" \r\n                        strokeLinecap=\"round\" \r\n                        strokeLinejoin=\"round\"\r\n                      />\r\n                    </svg>\r\n                  )}\r\n                </button>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LanguageSwitcher;\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;AAEA,MAAM,iBAAiB;IACrB,IAAI;QACF,OAAO;QACP,MAAM;QACN,MAAM;IACR;IACA,IAAI;QACF,OAAO;QACP,MAAM;QACN,MAAM;IACR;AACF;AAEA,MAAM,mBAA6B;IACjC,MAAM,EAAE,MAAM,EAAE,SAAS,EAAE,gBAAgB,EAAE,GAAG,CAAA,GAAA,wHAAA,CAAA,UAAO,AAAD;IACtD,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACrC,MAAM,cAAc,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAkB;IAE3C,MAAM,kBAAkB,cAAc,CAAC,OAAsC;IAE7E,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,qBAAqB,CAAC;YAC1B,IAAI,YAAY,OAAO,IAAI,CAAC,YAAY,OAAO,CAAC,QAAQ,CAAC,MAAM,MAAM,GAAW;gBAC9E,UAAU;YACZ;QACF;QAEA,SAAS,gBAAgB,CAAC,aAAa;QACvC,OAAO;YACL,SAAS,mBAAmB,CAAC,aAAa;QAC5C;IACF,GAAG,EAAE;IAEL,MAAM,uBAAuB,CAAC;QAC5B,UAAU;QACV,UAAU;IACZ;IAEA,qBACE,8OAAC;QAAI,WAAW,qKAAA,CAAA,UAAM,CAAC,gBAAgB;QAAE,KAAK;;0BAC5C,8OAAC;gBACC,WAAW,qKAAA,CAAA,UAAM,CAAC,OAAO;gBACzB,SAAS,IAAM,UAAU,CAAC;gBAC1B,cAAW;;kCAEX,8OAAC;wBAAK,WAAW,qKAAA,CAAA,UAAM,CAAC,IAAI;kCAAG,gBAAgB,IAAI;;;;;;kCACnD,8OAAC;wBAAK,WAAW,qKAAA,CAAA,UAAM,CAAC,IAAI;kCAAG,gBAAgB,IAAI;;;;;;kCACnD,8OAAC;wBACC,WAAW,GAAG,qKAAA,CAAA,UAAM,CAAC,OAAO,CAAC,CAAC,EAAE,SAAS,qKAAA,CAAA,UAAM,CAAC,WAAW,GAAG,IAAI;wBAClE,OAAM;wBACN,QAAO;wBACP,SAAQ;wBACR,MAAK;kCAEL,cAAA,8OAAC;4BACC,GAAE;4BACF,QAAO;4BACP,aAAY;4BACZ,eAAc;4BACd,gBAAe;;;;;;;;;;;;;;;;;YAKpB,wBACC,8OAAC;gBAAI,WAAW,qKAAA,CAAA,UAAM,CAAC,QAAQ;0BAC7B,cAAA,8OAAC;oBAAI,WAAW,qKAAA,CAAA,UAAM,CAAC,eAAe;8BACnC,iBAAiB,GAAG,CAAC,CAAC;wBACrB,MAAM,OAAO,cAAc,CAAC,WAA0C;wBACtE,MAAM,WAAW,eAAe;wBAEhC,qBACE,8OAAC;4BAEC,WAAW,GAAG,qKAAA,CAAA,UAAM,CAAC,MAAM,CAAC,CAAC,EAAE,WAAW,qKAAA,CAAA,UAAM,CAAC,MAAM,GAAG,IAAI;4BAC9D,SAAS,IAAM,qBAAqB;4BACpC,UAAU;;8CAEV,8OAAC;oCAAK,WAAW,qKAAA,CAAA,UAAM,CAAC,IAAI;8CAAG,KAAK,IAAI;;;;;;8CACxC,8OAAC;oCAAK,WAAW,qKAAA,CAAA,UAAM,CAAC,KAAK;8CAAG,KAAK,KAAK;;;;;;gCACzC,0BACC,8OAAC;oCACC,WAAW,qKAAA,CAAA,UAAM,CAAC,SAAS;oCAC3B,OAAM;oCACN,QAAO;oCACP,SAAQ;oCACR,MAAK;8CAEL,cAAA,8OAAC;wCACC,GAAE;wCACF,QAAO;wCACP,aAAY;wCACZ,eAAc;wCACd,gBAAe;;;;;;;;;;;;2BApBhB;;;;;oBA0BX;;;;;;;;;;;;;;;;;AAMZ;uCAEe","debugId":null}},
    {"offset": {"line": 1531, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alien/Downloads/Malikli-son%20-%20Preview/frontend/src/components/LanguageSwitcher/index.ts"],"sourcesContent":["export { default } from './LanguageSwitcher';\r\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 1549, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alien/Downloads/Malikli-son%20-%20Preview/frontend/src/components/Layout/Navbar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport Link from 'next/link';\r\nimport Image from 'next/image';\r\nimport { usePathname } from 'next/navigation';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '../../store/store';\r\nimport { useAppDispatch, useAppSelector } from '../../store/hooks';\r\nimport { logout } from '../../store/authSlice';\r\nimport styles from './Navbar.module.css';\r\nimport { CartItem } from '../../store/cartSlice';\r\nimport CartSidebar from '../Cart/CartSidebar'; // Still needed for commented code\r\nimport LanguageSwitcher from '../LanguageSwitcher';\r\nimport { useI18n } from '../../hooks/useI18n';\r\n\r\nexport default function Navbar() {\r\n  const { t } = useI18n();\r\n  // Initialize with false and only update after hydration\r\n  const [mounted, setMounted] = useState(false);\r\n  const [scrolled, setScrolled] = useState(false);  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n  // const [cartSidebarOpen, setCartSidebarOpen] = useState(false); // Commented out for Buy Now flow\r\n  const [userMenuOpen, setUserMenuOpen] = useState(false);\r\n    const pathname = usePathname();\r\n  const dispatch = useAppDispatch();\r\n  // const cartItems = useSelector((state: RootState) => state.cart.items); // Commented out for Buy Now flow\r\n  const { isAuthenticated, user } = useAppSelector((state) => state.auth);\r\n  \r\n  // Force scrolled appearance when mobile menu is open\r\n  const isScrolledOrMenuOpen = scrolled || mobileMenuOpen;\r\n  // Only calculate total items on client-side to avoid hydration mismatch - commented out for Buy Now flow\r\n  /* const totalItems = mounted \r\n    ? cartItems.reduce((total: number, item: CartItem) => total + item.quantity, 0)\r\n    : 0; */\r\n\r\n  // Mark component as mounted after hydration\r\n  useEffect(() => {\r\n    setMounted(true);\r\n  }, []);\r\n\r\n  // Handle scroll event to change navbar appearance\r\n  useEffect(() => {\r\n    const handleScroll = () => {\r\n      const isScrolled = window.scrollY > 50;\r\n      if (isScrolled !== scrolled) {\r\n        setScrolled(isScrolled);\r\n      }\r\n    };\r\n    \r\n    // Initial check\r\n    handleScroll();\r\n\r\n    window.addEventListener('scroll', handleScroll);\r\n    return () => window.removeEventListener('scroll', handleScroll);\r\n  }, [scrolled]);  // Only apply transparent style on homepage and when not scrolled or menu open\r\n  const isHomePage = pathname === '/';\r\n  \r\n  // Only apply client-side effects after hydration\r\n  const navbarClass = !mounted ? styles.navbar : (\r\n    isHomePage\r\n      ? isScrolledOrMenuOpen\r\n        ? `${styles.navbar} ${mobileMenuOpen ? styles.mobileOpen : ''}`\r\n        : `${styles.navbar} ${styles.transparent}`\r\n      : styles.navbar\r\n  );  /* Commented out for Buy Now flow\r\n  const handleCartClick = (e: React.MouseEvent) => {\r\n    e.preventDefault();\r\n    setCartSidebarOpen(true);\r\n  };\r\n  */\r\n\r\n  const handleUserMenuToggle = () => {\r\n    setUserMenuOpen(!userMenuOpen);\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    dispatch(logout());\r\n    setUserMenuOpen(false);\r\n  };\r\n\r\n  // Close user menu when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (userMenuOpen && !(event.target as Element).closest('.user-menu-container')) {\r\n        setUserMenuOpen(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, [userMenuOpen]);\r\n\r\n  return (\r\n    <>\r\n      <nav className={navbarClass}>\r\n        <div className={styles.navContainer}>\r\n          <Link href=\"/\" className={styles.logoContainer}>\r\n            {/* Use standard logo on server render, then conditionally apply styles once mounted */}          <Image \r\n              src=\"/logo.png\" \r\n              alt=\"Malikli1992 Logo\" \r\n              width={150} \r\n              height={40} \r\n              className={mounted && isHomePage && !isScrolledOrMenuOpen ? styles.logoWhite : styles.logo}\r\n              priority\r\n            />\r\n          </Link>          <div className={styles.navLinks}>\r\n            <Link href=\"https://www.malikli1992.store/shipping.html\" className={styles.navLink}>\r\n              {t('nav.delivery')}\r\n            </Link>\r\n            <Link href=\"https://www.malikli1992.store/about.html\" className={styles.navLink}>\r\n              {t('nav.about')}\r\n            </Link>\r\n            <Link href=\"https://www.malikli1992.store/contact.html\" className={styles.navLink}>\r\n              {t('nav.contact')}\r\n            </Link>\r\n          </div><div className={styles.navIcons}>\r\n            {/* Language Switcher */}\r\n            <LanguageSwitcher />\r\n            \r\n            {/* User Authentication Section */}\r\n            {isAuthenticated && user ? (\r\n              <div className={`${styles.userMenuContainer} user-menu-container`}>\r\n                <button \r\n                  className={styles.userButton}\r\n                  onClick={handleUserMenuToggle}\r\n                >                  <div className={styles.userAvatar}>\r\n                    {(() => {\r\n                      const firstName = user.first_name?.trim();\r\n                      const lastName = user.last_name?.trim();\r\n                      \r\n                      if (firstName && lastName) {\r\n                        return `${firstName[0].toUpperCase()}${lastName[0].toUpperCase()}`;\r\n                      } else if (firstName) {\r\n                        return firstName[0].toUpperCase();\r\n                      } else if (lastName) {\r\n                        return lastName[0].toUpperCase();\r\n                      } else if (user.username) {\r\n                        return user.username[0].toUpperCase();\r\n                      } else {\r\n                        return 'У';\r\n                      }\r\n                    })()}\r\n                  </div>                  <span className={styles.userName}>\r\n                    {(() => {\r\n                      const firstName = user.first_name?.trim();\r\n                      const lastName = user.last_name?.trim();\r\n                      \r\n                      if (firstName && lastName) {\r\n                        return `${firstName} ${lastName}`;\r\n                      } else if (firstName) {\r\n                        return firstName;\r\n                      } else if (lastName) {\r\n                        return lastName;\r\n                      } else {\r\n                        return user.username;\r\n                      }\r\n                    })()}\r\n                  </span>\r\n                  <svg \r\n                    xmlns=\"http://www.w3.org/2000/svg\" \r\n                    viewBox=\"0 0 20 20\" \r\n                    fill=\"currentColor\" \r\n                    className={`${styles.chevron} ${userMenuOpen ? styles.chevronUp : ''}`}\r\n                  >\r\n                    <path fillRule=\"evenodd\" d=\"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z\" clipRule=\"evenodd\" />\r\n                  </svg>\r\n                </button>\r\n                  {userMenuOpen && (\r\n                  <div className={styles.userDropdown}>                    <Link \r\n                      href=\"/profile\" \r\n                      className={styles.dropdownItem}\r\n                      onClick={() => setUserMenuOpen(false)}\r\n                    >\r\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" className={styles.dropdownIcon}>\r\n                        <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-5.5-2.5a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0zM10 12a5.99 5.99 0 00-4.793 2.39A6.483 6.483 0 0010 16.5a6.483 6.483 0 004.793-2.11A5.99 5.99 0 0010 12z\" clipRule=\"evenodd\" />\r\n                      </svg>\r\n                      {t('nav.profile')}\r\n                    </Link>\r\n                    <Link \r\n                      href=\"/orders\" \r\n                      className={styles.dropdownItem}\r\n                      onClick={() => setUserMenuOpen(false)}\r\n                    >\r\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" className={styles.dropdownIcon}>\r\n                        <path fillRule=\"evenodd\" d=\"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z\" clipRule=\"evenodd\" />\r\n                      </svg>\r\n                      {t('nav.orders')}\r\n                    </Link>\r\n                    {/* <Link \r\n                      href=\"/favorites\" \r\n                      className={styles.dropdownItem}\r\n                      onClick={() => setUserMenuOpen(false)}\r\n                    >\r\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" className={styles.dropdownIcon}>\r\n                        <path fillRule=\"evenodd\" d=\"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z\" clipRule=\"evenodd\" />\r\n                      </svg>\r\n                      Избранное\r\n                    </Link> */}\r\n                    {/* <div className={styles.dropdownDivider}></div> */}\r\n                    {/* <Link \r\n                      href=\"/settings\" \r\n                      className={styles.dropdownItem}\r\n                      onClick={() => setUserMenuOpen(false)}\r\n                    >\r\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" className={styles.dropdownIcon}>\r\n                        <path fillRule=\"evenodd\" d=\"M7.84 1.804A1 1 0 018.82 1h2.36a1 1 0 01.98.804l.331 1.652a6.993 6.993 0 011.929 1.115l1.598-.54a1 1 0 011.186.447l1.18 2.044a1 1 0 01-.205 1.251l-1.267 1.113a7.047 7.047 0 010 2.228l1.267 1.113a1 1 0 01.205 1.251l-1.18 2.044a1 1 0 01-1.186.447l-1.598-.54a6.993 6.993 0 01-1.929 1.115l-.33 1.652a1 1 0 01-.98.804H8.82a1 1 0 01-.98-.804l-.331-1.652a6.993 6.993 0 01-1.929-1.115l-1.598.54a1 1 0 01-1.186-.447l-1.18-2.044a1 1 0 01.205-1.251l1.267-1.114a7.05 7.05 0 010-2.227L1.821 7.773a1 1 0 01-.205-1.251l1.18-2.044a1 1 0 011.186-.447l1.598.54A6.993 6.993 0 017.51 3.456l.33-1.652zM10 13a3 3 0 100-6 3 3 0 000 6z\" clipRule=\"evenodd\" />\r\n                      </svg>\r\n                      Настройки\r\n                    </Link> */}                    <button \r\n                      className={styles.dropdownItem}\r\n                      onClick={handleLogout}\r\n                    >\r\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" className={styles.dropdownIcon}>\r\n                        <path fillRule=\"evenodd\" d=\"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z\" clipRule=\"evenodd\" />\r\n                      </svg>\r\n                      {t('nav.logout')}\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>            ) : (\r\n              <Link href=\"/auth/login\" className={styles.iconLink}>\r\n                <span className={`${styles.iconSvg} ${mounted && isHomePage && !isScrolledOrMenuOpen ? styles.iconLight : ''}`}>\r\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" width=\"24\" height=\"24\">\r\n                    <path fillRule=\"evenodd\" d=\"M7.5 6a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM3.751 20.105a8.25 8.25 0 0116.498 0 .75.75 0 01-.437.695A18.683 18.683 0 0112 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 01-.437-.695z\" clipRule=\"evenodd\" />\r\n                  </svg>\r\n                </span>\r\n              </Link>\r\n            )}\r\n          </div>\r\n\r\n          <button          className={styles.mobileMenuButton}\r\n            onClick={() => setMobileMenuOpen(!mobileMenuOpen)}\r\n          >\r\n            <span className={`${styles.iconSvg} ${mounted && isHomePage && !isScrolledOrMenuOpen ? styles.iconLight : ''}`}>\r\n              {mobileMenuOpen ? (\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" width=\"24\" height=\"24\">\r\n                  <path fillRule=\"evenodd\" d=\"M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z\" clipRule=\"evenodd\" />\r\n                </svg>\r\n              ) : (\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" width=\"24\" height=\"24\">\r\n                  <path fillRule=\"evenodd\" d=\"M3 6.75A.75.75 0 013.75 6h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 6.75zM3 12a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 12zm0 5.25a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75a.75.75 0 01-.75-.75z\" clipRule=\"evenodd\" />\r\n                </svg>\r\n              )}\r\n            </span>\r\n          </button>        </div>\r\n\r\n      {/* Mobile menu overlay */}\r\n      {mounted && (\r\n        <div className={`${styles.mobileMenu} ${mobileMenuOpen ? styles.open : ''} ${mobileMenuOpen ? styles.dark : ''}`}>\r\n          <div className={`${styles.mobileMenuLinks} ${mobileMenuOpen ? styles.dark : ''}`}>\r\n            <Link href=\"/delivery\" onClick={() => setMobileMenuOpen(false)}>\r\n              {t('nav.delivery')}\r\n            </Link>\r\n            <Link href=\"https://www.malikli1992.store/about.html\" onClick={() => setMobileMenuOpen(false)}>\r\n              {t('nav.about')}\r\n            </Link>\r\n            <Link href=\"https://www.malikli1992.store/contact.html\" onClick={() => setMobileMenuOpen(false)}>\r\n              {t('nav.contact')}\r\n            </Link>\r\n            \r\n            {/* Language Switcher for Mobile - Commented out */}\r\n            {/* \r\n            <div className={styles.mobileLangSection}>\r\n              <LanguageSwitcher />\r\n            </div>\r\n            */}\r\n            \r\n            {/* Auth section for mobile - only show login/register when not authenticated */}\r\n            {!isAuthenticated && (\r\n              <div className={styles.mobileAuthSection}>\r\n                <Link href=\"/auth/login\" onClick={() => setMobileMenuOpen(false)} className={styles.mobileAuthAction}>\r\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" className={styles.mobileActionIcon}>\r\n                    <path fillRule=\"evenodd\" d=\"M7.5 6a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM3.751 20.105a8.25 8.25 0 0116.498 0 .75.75 0 01-.437.695A18.683 18.683 0 0112 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 01-.437-.695z\" clipRule=\"evenodd\" />\r\n                  </svg>\r\n                  {t('nav.login')}\r\n                </Link>\r\n                <Link href=\"/auth/register\" onClick={() => setMobileMenuOpen(false)} className={styles.mobileAuthAction}>\r\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" className={styles.mobileActionIcon}>\r\n                    <path fillRule=\"evenodd\" d=\"M7.5 6a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM3.751 20.105a8.25 8.25 0 0116.498 0 .75.75 0 01-.437.695A18.683 18.683 0 0112 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 01-.437-.695z\" clipRule=\"evenodd\" />\r\n                  </svg>\r\n                  {t('nav.register')}\r\n                </Link>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n      </nav>{/* Cart sidebar - commented out for Buy Now flow */}\r\n      {/* <CartSidebar isOpen={cartSidebarOpen} onClose={() => setCartSidebarOpen(false)} /> */}\r\n        {/* Fixed cart button at bottom right - commented out for Buy Now flow */}\r\n      {/* \r\n      <button \r\n        className={styles.fixedCartButton}\r\n        onClick={handleCartClick}\r\n        aria-label=\"Open cart\"\r\n      >\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" width=\"24\" height=\"24\">\r\n          <path d=\"M2.25 2.25a.75.75 0 000 1.5h1.386c.17 0 .318.114.362.278l2.558 9.592a3.752 3.752 0 00-2.806 3.63c0 .414.336.75.75.75h15.75a.75.75 0 000-1.5H5.378A2.25 2.25 0 017.5 15h11.218a.75.75 0 00.674-.421 60.358 60.358 0 002.96-7.228.75.75 0 00-.525-.965A60.864 60.864 0 005.68 4.509l-.232-.867A1.875 1.875 0 003.636 2.25H2.25zM3.75 20.25a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zM16.5 20.25a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0z\" />\r\n        </svg>\r\n        {mounted && totalItems > 0 && (\r\n          <span className={styles.fixedCartCount}>{totalItems}</span>\r\n        )}\r\n      </button>\r\n      */}\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2126, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alien/Downloads/Malikli-son%20-%20Preview/frontend/src/hooks/useCartPersistence.ts"],"sourcesContent":["// hooks/useCartPersistence.ts\r\nimport { useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { AppDispatch } from '@/store/store';\r\nimport { loadCart } from '@/store/cartSlice';\r\n\r\n/**\r\n * Hook to handle cart persistence with localStorage\r\n * This ensures cart data is loaded from localStorage on app initialization\r\n */\r\nexport const useCartPersistence = () => {\r\n  const dispatch = useDispatch<AppDispatch>();\r\n\r\n  useEffect(() => {\r\n    // Load cart from localStorage when the app initializes\r\n    dispatch(loadCart());\r\n  }, [dispatch]);\r\n\r\n  // Optional: Listen for storage events to sync cart across tabs\r\n  useEffect(() => {\r\n    const handleStorageChange = (event: StorageEvent) => {\r\n      if (event.key === 'cart' || event.key === 'cartId') {\r\n        dispatch(loadCart());\r\n      }\r\n    };\r\n\r\n    // Listen for changes in other tabs/windows\r\n    window.addEventListener('storage', handleStorageChange);\r\n\r\n    return () => {\r\n      window.removeEventListener('storage', handleStorageChange);\r\n    };\r\n  }, [dispatch]);\r\n};\r\n"],"names":[],"mappings":"AAAA,8BAA8B;;;;AAC9B;AACA;AAEA;;;;AAMO,MAAM,qBAAqB;IAChC,MAAM,WAAW,CAAA,GAAA,yJAAA,CAAA,cAAW,AAAD;IAE3B,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,uDAAuD;QACvD,SAAS,CAAA,GAAA,yHAAA,CAAA,WAAQ,AAAD;IAClB,GAAG;QAAC;KAAS;IAEb,+DAA+D;IAC/D,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,sBAAsB,CAAC;YAC3B,IAAI,MAAM,GAAG,KAAK,UAAU,MAAM,GAAG,KAAK,UAAU;gBAClD,SAAS,CAAA,GAAA,yHAAA,CAAA,WAAQ,AAAD;YAClB;QACF;QAEA,2CAA2C;QAC3C,OAAO,gBAAgB,CAAC,WAAW;QAEnC,OAAO;YACL,OAAO,mBAAmB,CAAC,WAAW;QACxC;IACF,GAAG;QAAC;KAAS;AACf","debugId":null}},
    {"offset": {"line": 2166, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alien/Downloads/Malikli-son%20-%20Preview/frontend/src/hooks/useAuth.ts"],"sourcesContent":["// hooks/useAuth.ts\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '@/store/store';\r\n\r\nexport const useAuth = () => {\r\n  const auth = useSelector((state: RootState) => state.auth);\r\n  \r\n  return {\r\n    user: auth.user,\r\n    isLoading: auth.isLoading,\r\n    isAuthenticated: auth.isAuthenticated,\r\n    token: auth.token,\r\n    error: auth.error,\r\n  };\r\n};\r\n"],"names":[],"mappings":"AAAA,mBAAmB;;;;AACnB;;AAGO,MAAM,UAAU;IACrB,MAAM,OAAO,CAAA,GAAA,yJAAA,CAAA,cAAW,AAAD,EAAE,CAAC,QAAqB,MAAM,IAAI;IAEzD,OAAO;QACL,MAAM,KAAK,IAAI;QACf,WAAW,KAAK,SAAS;QACzB,iBAAiB,KAAK,eAAe;QACrC,OAAO,KAAK,KAAK;QACjB,OAAO,KAAK,KAAK;IACnB;AACF","debugId":null}},
    {"offset": {"line": 2188, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alien/Downloads/Malikli-son%20-%20Preview/frontend/src/hooks/useCartSync.ts"],"sourcesContent":["// hooks/useCartSync.ts\r\nimport { useEffect, useCallback } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { RootState, AppDispatch } from '@/store/store';\r\nimport { \r\n  syncCartWithBackend, \r\n  mergeGuestCartWithUser, \r\n  loadCartFromBackend,\r\n  markAsSynced,\r\n  clearCart \r\n} from '@/store/cartSlice';\r\nimport { useAuth } from './useAuth';\r\n\r\nexport const useCartSync = () => {\r\n  const dispatch = useDispatch<AppDispatch>();\r\n  const { user, isLoading: authLoading } = useAuth();\r\n  const { \r\n    items, \r\n    cartId, \r\n    needsSync, \r\n    isLoading: cartLoading, \r\n    lastSyncTime \r\n  } = useSelector((state: RootState) => state.cart);\r\n  // Auto-sync cart when user authentication state changes\r\n  useEffect(() => {\r\n    if (authLoading) return; // Wait for auth to be determined\r\n\r\n    const handleCartSync = async () => {\r\n      if (user && !cartLoading) {\r\n        // User is logged in\r\n        if (cartId && items.length > 0) {\r\n          // User has a guest cart with items - merge it\r\n          try {\r\n            // Add a small delay to ensure token is properly set after login\r\n            await new Promise(resolve => setTimeout(resolve, 100));\r\n            await dispatch(mergeGuestCartWithUser({\r\n              guestCartId: cartId,\r\n              strategy: 'merge'\r\n            })).unwrap();\r\n          } catch (error) {\r\n            console.error('Failed to merge guest cart:', error);\r\n            // Fallback: load user's existing cart\r\n            await dispatch(loadCartFromBackend({}));\r\n          }\r\n        } else {\r\n          // Load user's existing cart from backend\r\n          await dispatch(loadCartFromBackend({}));\r\n        }\r\n      } else if (!user && items.length > 0 && needsSync) {\r\n        // Guest user with items that need syncing\r\n        try {\r\n          await dispatch(syncCartWithBackend()).unwrap();\r\n        } catch (error) {\r\n          console.error('Failed to sync guest cart:', error);\r\n        }\r\n      }\r\n    };\r\n\r\n    handleCartSync();\r\n  }, [user, authLoading, dispatch]);  // Auto-sync cart periodically when needed (for both guest and logged-in users)\r\n  useEffect(() => {\r\n    if (needsSync && !cartLoading) {\r\n      const syncTimeout = setTimeout(() => {\r\n        // Always use the sync endpoint for both guest and authenticated users\r\n        // This ensures quantities are set correctly rather than accumulated\r\n        dispatch(syncCartWithBackend());\r\n      }, 2000); // Debounce syncing by 2 seconds\r\n\r\n      return () => clearTimeout(syncTimeout);\r\n    }\r\n  }, [needsSync, user, cartLoading, dispatch]);\r\n\r\n  // Manual sync function\r\n  const syncCart = useCallback(async () => {\r\n    if (cartLoading) return;\r\n\r\n    try {\r\n      if (user) {\r\n        await dispatch(loadCartFromBackend({})).unwrap();\r\n      } else {\r\n        await dispatch(syncCartWithBackend()).unwrap();\r\n      }\r\n    } catch (error) {\r\n      console.error('Manual cart sync failed:', error);\r\n      throw error;\r\n    }\r\n  }, [user, cartLoading, dispatch]);\r\n\r\n  // Merge guest cart when logging in\r\n  const mergeGuestCart = useCallback(async (strategy: 'replace' | 'merge' | 'keep_user' = 'merge') => {\r\n    if (!cartId || cartLoading) return;\r\n\r\n    try {\r\n      await dispatch(mergeGuestCartWithUser({\r\n        guestCartId: cartId,\r\n        strategy\r\n      })).unwrap();\r\n    } catch (error) {\r\n      console.error('Failed to merge guest cart:', error);\r\n      throw error;\r\n    }\r\n  }, [cartId, cartLoading, dispatch]);\r\n\r\n  // Clear cart on logout\r\n  const clearCartOnLogout = useCallback(() => {\r\n    dispatch(clearCart());\r\n  }, [dispatch]);\r\n\r\n  // Force sync cart\r\n  const forceSyncCart = useCallback(async () => {\r\n    if (cartLoading) return;\r\n\r\n    try {\r\n      await dispatch(syncCartWithBackend()).unwrap();\r\n      dispatch(markAsSynced());\r\n    } catch (error) {\r\n      console.error('Force sync failed:', error);\r\n      throw error;\r\n    }\r\n  }, [cartLoading, dispatch]);\r\n\r\n  return {\r\n    syncCart,\r\n    mergeGuestCart,\r\n    clearCartOnLogout,\r\n    forceSyncCart,\r\n    isLoading: cartLoading,\r\n    needsSync,\r\n    lastSyncTime,\r\n    cartId,\r\n    isAuthenticated: !!user,\r\n  };\r\n};\r\n"],"names":[],"mappings":"AAAA,uBAAuB;;;;AACvB;AACA;AAEA;AAOA;;;;;AAEO,MAAM,cAAc;IACzB,MAAM,WAAW,CAAA,GAAA,yJAAA,CAAA,cAAW,AAAD;IAC3B,MAAM,EAAE,IAAI,EAAE,WAAW,WAAW,EAAE,GAAG,CAAA,GAAA,uHAAA,CAAA,UAAO,AAAD;IAC/C,MAAM,EACJ,KAAK,EACL,MAAM,EACN,SAAS,EACT,WAAW,WAAW,EACtB,YAAY,EACb,GAAG,CAAA,GAAA,yJAAA,CAAA,cAAW,AAAD,EAAE,CAAC,QAAqB,MAAM,IAAI;IAChD,wDAAwD;IACxD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,aAAa,QAAQ,iCAAiC;QAE1D,MAAM,iBAAiB;YACrB,IAAI,QAAQ,CAAC,aAAa;gBACxB,oBAAoB;gBACpB,IAAI,UAAU,MAAM,MAAM,GAAG,GAAG;oBAC9B,8CAA8C;oBAC9C,IAAI;wBACF,gEAAgE;wBAChE,MAAM,IAAI,QAAQ,CAAA,UAAW,WAAW,SAAS;wBACjD,MAAM,SAAS,CAAA,GAAA,yHAAA,CAAA,yBAAsB,AAAD,EAAE;4BACpC,aAAa;4BACb,UAAU;wBACZ,IAAI,MAAM;oBACZ,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,+BAA+B;wBAC7C,sCAAsC;wBACtC,MAAM,SAAS,CAAA,GAAA,yHAAA,CAAA,sBAAmB,AAAD,EAAE,CAAC;oBACtC;gBACF,OAAO;oBACL,yCAAyC;oBACzC,MAAM,SAAS,CAAA,GAAA,yHAAA,CAAA,sBAAmB,AAAD,EAAE,CAAC;gBACtC;YACF,OAAO,IAAI,CAAC,QAAQ,MAAM,MAAM,GAAG,KAAK,WAAW;gBACjD,0CAA0C;gBAC1C,IAAI;oBACF,MAAM,SAAS,CAAA,GAAA,yHAAA,CAAA,sBAAmB,AAAD,KAAK,MAAM;gBAC9C,EAAE,OAAO,OAAO;oBACd,QAAQ,KAAK,CAAC,8BAA8B;gBAC9C;YACF;QACF;QAEA;IACF,GAAG;QAAC;QAAM;QAAa;KAAS,GAAI,+EAA+E;IACnH,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,aAAa,CAAC,aAAa;YAC7B,MAAM,cAAc,WAAW;gBAC7B,sEAAsE;gBACtE,oEAAoE;gBACpE,SAAS,CAAA,GAAA,yHAAA,CAAA,sBAAmB,AAAD;YAC7B,GAAG,OAAO,gCAAgC;YAE1C,OAAO,IAAM,aAAa;QAC5B;IACF,GAAG;QAAC;QAAW;QAAM;QAAa;KAAS;IAE3C,uBAAuB;IACvB,MAAM,WAAW,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE;QAC3B,IAAI,aAAa;QAEjB,IAAI;YACF,IAAI,MAAM;gBACR,MAAM,SAAS,CAAA,GAAA,yHAAA,CAAA,sBAAmB,AAAD,EAAE,CAAC,IAAI,MAAM;YAChD,OAAO;gBACL,MAAM,SAAS,CAAA,GAAA,yHAAA,CAAA,sBAAmB,AAAD,KAAK,MAAM;YAC9C;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,4BAA4B;YAC1C,MAAM;QACR;IACF,GAAG;QAAC;QAAM;QAAa;KAAS;IAEhC,mCAAmC;IACnC,MAAM,iBAAiB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,OAAO,WAA8C,OAAO;QAC7F,IAAI,CAAC,UAAU,aAAa;QAE5B,IAAI;YACF,MAAM,SAAS,CAAA,GAAA,yHAAA,CAAA,yBAAsB,AAAD,EAAE;gBACpC,aAAa;gBACb;YACF,IAAI,MAAM;QACZ,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,+BAA+B;YAC7C,MAAM;QACR;IACF,GAAG;QAAC;QAAQ;QAAa;KAAS;IAElC,uBAAuB;IACvB,MAAM,oBAAoB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE;QACpC,SAAS,CAAA,GAAA,yHAAA,CAAA,YAAS,AAAD;IACnB,GAAG;QAAC;KAAS;IAEb,kBAAkB;IAClB,MAAM,gBAAgB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE;QAChC,IAAI,aAAa;QAEjB,IAAI;YACF,MAAM,SAAS,CAAA,GAAA,yHAAA,CAAA,sBAAmB,AAAD,KAAK,MAAM;YAC5C,SAAS,CAAA,GAAA,yHAAA,CAAA,eAAY,AAAD;QACtB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,sBAAsB;YACpC,MAAM;QACR;IACF,GAAG;QAAC;QAAa;KAAS;IAE1B,OAAO;QACL;QACA;QACA;QACA;QACA,WAAW;QACX;QACA;QACA;QACA,iBAAiB,CAAC,CAAC;IACrB;AACF","debugId":null}},
    {"offset": {"line": 2331, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alien/Downloads/Malikli-son%20-%20Preview/frontend/src/components/Cart/CartSyncProvider.tsx"],"sourcesContent":["// components/Cart/CartSyncProvider.tsx\r\n\"use client\";\r\n\r\nimport React from 'react';\r\nimport { useCartSync } from '@/hooks/useCartSync';\r\n\r\n/**\r\n * Provider component that handles cart synchronization with backend\r\n * Should be placed inside the Redux store provider\r\n */\r\nexport function CartSyncProvider({ children }: { children: React.ReactNode }) {\r\n  // This hook handles all the cart synchronization logic\r\n  useCartSync();\r\n  \r\n  return <>{children}</>;\r\n}\r\n"],"names":[],"mappings":"AAAA,uCAAuC;;;;;AAIvC;AAHA;;;AASO,SAAS,iBAAiB,EAAE,QAAQ,EAAiC;IAC1E,uDAAuD;IACvD,CAAA,GAAA,2HAAA,CAAA,cAAW,AAAD;IAEV,qBAAO;kBAAG;;AACZ","debugId":null}},
    {"offset": {"line": 2353, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alien/Downloads/Malikli-son%20-%20Preview/frontend/src/app/LayoutBody.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React from 'react';\r\nimport StoreProvider from './StoreProvider';\r\nimport Navbar from '@/components/Layout/Navbar';\r\nimport Footer from '@/components/Layout/Footer';\r\nimport { useCartPersistence } from '@/hooks/useCartPersistence';\r\nimport { CartSyncProvider } from '@/components/Cart/CartSyncProvider';\r\nimport { I18nProvider } from '@/hooks/useI18n';\r\n\r\n// Cart persistence wrapper component\r\nfunction CartPersistenceWrapper({ children }: { children: React.ReactNode }) {\r\n  useCartPersistence();\r\n  return <>{children}</>;\r\n}\r\n\r\n// Client component wrapper for the layout body content\r\nexport default function LayoutBody({ children }: { children: React.ReactNode }) {\r\n  return (\r\n    <StoreProvider>\r\n      <I18nProvider>\r\n        <CartPersistenceWrapper>\r\n          <CartSyncProvider>            <div className=\"root-layout-container\">\r\n              <Navbar />\r\n              <main className=\"main-content\">\r\n                {children}\r\n              </main>\r\n              {/* <Footer /> */}\r\n            </div>\r\n          </CartSyncProvider>\r\n        </CartPersistenceWrapper>\r\n      </I18nProvider>\r\n    </StoreProvider>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAGA;AACA;AAEA;AACA;AACA;AARA;;;;;;;AAUA,qCAAqC;AACrC,SAAS,uBAAuB,EAAE,QAAQ,EAAiC;IACzE,CAAA,GAAA,kIAAA,CAAA,qBAAkB,AAAD;IACjB,qBAAO;kBAAG;;AACZ;AAGe,SAAS,WAAW,EAAE,QAAQ,EAAiC;IAC5E,qBACE,8OAAC,4HAAA,CAAA,UAAa;kBACZ,cAAA,8OAAC,wHAAA,CAAA,eAAY;sBACX,cAAA,8OAAC;0BACC,cAAA,8OAAC,8IAAA,CAAA,mBAAgB;;wBAAC;sCAAY,8OAAC;4BAAI,WAAU;;8CACzC,8OAAC,sIAAA,CAAA,UAAM;;;;;8CACP,8OAAC;oCAAK,WAAU;8CACb;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASjB","debugId":null}}]
}